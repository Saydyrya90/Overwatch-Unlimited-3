settings {
    "main": {
        "description": "Battle with 113 Custom Hero Classes\r\nAll of the names are anime references or jokes\r\nhttps://discord.com/invite/VKphWxqvj3\r\n - updates and discussions\r\nhttps://workshop.codes/RTMJ2\r\n - All abilities explained\r\nCode: RTMJ2",
        "modeName": "Overwatch Unlimited™ 3"
    },
    "lobby": {
        "allowPlayersInQueue": true,
        "dataCenterPreference": "netherlands",
        "mapRotation": "afterGame",
        "enableMatchVoiceChat": true,
        "team1Slots": 3,
        "team2Slots": 3,
        "returnToLobby": "never",
        "swapTeamsAfterMatch": false
    },
    "gamemodes": {
        "control": {
            "captureSpeed%": 160,
            "scoreToWin": 3,
            "scoringSpeed%": 85
        },
        "escort": {
            "payloadSpeed%": 121
        },
        "flashpoint": {
            "captureSpeed%": 350,
            "firstActiveControlPoint": "random",
            "scoreToWin": 5,
            "scoringSpeed%": 77
        },
        "push": {
            "disabledMaps": [
                "runasapi"
            ],
            "ts1PushSpeedModifier%": 88,
            "ts1WalkSpeedModifier%": 130
        },
        "general": {
            "gamemodeStartTrigger": "immediately",
            "healthPackRespawnTime%": 125,
            "heroLimit": "off",
            "respawnTime%": 80,
            "enableSkins": false,
            "spawnHealthPacks": "enabled",
            "tankPassiveHealthBonus": "disabled"
        }
    },
    "heroes": {
        "allTeams": {
            "ana": {
                "health%": 85,
                "combatUltGen%": 95,
                "passiveUltGen%": 95,
                "ultGen%": 80
            },
            "ashe": {
                "health%": 85
            },
            "baptiste": {
                "combatUltGen%": 90
            },
            "bastion": {
                "health%": 85,
                "enableInfiniteUlt": true,
                "ultDuration%": 260,
                "combatUltGen%": 200,
                "passiveUltGen%": 140,
                "ultGen%": 140
            },
            "brigitte": {
                "health%": 85,
                "ability2Cooldown%": 120,
                "shieldBashCooldown%": 70,
                "combatUltGen%": 55
            },
            "dva": {
                "damageDealt%": 125,
                "damageReceived%": 120,
                "secondaryFireRechargeRate%": 90,
                "health%": 55,
                "projectileSpeed%": 115,
                "combatUltGen%": 210,
                "passiveUltGen%": 115,
                "ultGen%": 145
            },
            "doomfist": {
                "health%": 40,
                "combatUltGen%": 70,
                "ultGen%": 110
            },
            "echo": {
                "health%": 85,
                "jumpVerticalSpeed%": 155,
                "movementGravity%": 40,
                "movementSpeed%": 110,
                "projectileSpeed%": 500,
                "secondaryFireCooldown%": 115,
                "combatUltGen%": 70,
                "passiveUltGen%": 110,
                "ultGen%": 110
            },
            "genji": {
                "damageReceived%": 110,
                "ability2Cooldown%": 115,
                "health%": 85,
                "movementSpeed%": 93,
                "ultDuration%": 130,
                "combatUltGen%": 90
            },
            "hanzo": {
                "health%": 85,
                "ability2Quantity%": 3,
                "combatUltGen%": 90
            },
            "illari": {
                "damageDealt%": 180,
                "ability2Cooldown%": 120,
                "health%": 155,
                "movementSpeed%": 115,
                "projectileSpeed%": 500,
                "combatUltGen%": 165,
                "passiveUltGen%": 135
            },
            "junkerQueen": {
                "damageDealt%": 130,
                "damageReceived%": 105,
                "healingDealt%": 120,
                "healingReceived%": 60,
                "health%": 98,
                "secondaryFireKb%": 400,
                "jumpVerticalSpeed%": 110,
                "movementSpeed%": 115,
                "projectileSpeed%": 145,
                "combatUltGen%": 150,
                "passiveUltGen%": 160
            },
            "junkrat": {
                "ability1Kb%": 200,
                "damageDealt%": 90,
                "primaryFireKb%": 0,
                "health%": 160,
                "jumpVerticalSpeed%": 120,
                "movementSpeed%": 130,
                "projectileGravity%": 280,
                "projectileSpeed%": 250,
                "ability2Cooldown%": 50,
                "ultDuration%": 135,
                "combatUltGen%": 250,
                "passiveUltGen%": 120,
                "ultGen%": 130
            },
            "kiriko": {
                "damageDealt%": 130,
                "healingReceived%": 80,
                "health%": 145,
                "jumpVerticalSpeed%": 115,
                "movementGravity%": 105,
                "movementSpeed%": 125,
                "ability2Cooldown%": 90,
                "ability1Distance%": 300,
                "combatUltGen%": 180,
                "passiveUltGen%": 135
            },
            "lifeweaver": {
                "ammoClipSize%": 125,
                "damageDealt%": 138,
                "healingDealt%": 25,
                "healingReceived%": 90,
                "health%": 145,
                "jumpVerticalSpeed%": 105,
                "movementSpeed%": 130,
                "secondaryFireCooldown%": 150,
                "projectileSpeed%": 350,
                "ability1Health%": 500,
                "ultHealth%": 50,
                "combatUltGen%": 160,
                "ultGen%": 140
            },
            "lucio": {
                "damageDealt%": 140,
                "damageReceived%": 115,
                "health%": 65,
                "projectileSpeed%": 115,
                "combatUltGen%": 215,
                "ultGen%": 110
            },
            "mauga": {
                "ability2Healing%": 80,
                "damageDealt%": 135,
                "healingReceived%": 155,
                "health%": 85,
                "primaryFireIgniteRate": 110,
                "movementSpeed%": 120,
                "combatUltGen%": 190,
                "passiveUltGen%": 155,
                "ultGen%": 120
            },
            "mei": {
                "ultFreezeMinimum%": 40,
                "ultFreezeRate%": 90,
                "damageDealt%": 70,
                "health%": 85,
                "combatUltGen%": 90
            },
            "mercy": {
                "health%": 85,
                "projectileSpeed%": 215,
                "weaponsEnabled": "blaster"
            },
            "moira": {
                "ability2Cooldown%": 110,
                "ability1Cooldown%": 135,
                "combatUltGen%": 95
            },
            "orisa": {
                "health%": 60,
                "combatUltGen%": 250,
                "passiveUltGen%": 120,
                "ultGen%": 115
            },
            "pharah": {
                "ammoClipSize%": 250,
                "health%": 85,
                "enablePassive": false,
                "jumpVerticalSpeed%": 130,
                "movementGravity%": 50,
                "primaryFireKb%": 0,
                "ultGen%": 95
            },
            "ramattra": {
                "damageDealt%": 115,
                "damageReceived%": 70,
                "health%": 95,
                "movementSpeed%": 125,
                "ability1Cooldown%": 110,
                "projectileSpeed%": 499,
                "combatUltGen%": 135,
                "passiveUltGen%": 180,
                "ultGen%": 115
            },
            "reaper": {
                "health%": 85,
                "combatUltGen%": 130,
                "ultGen%": 165
            },
            "reinhardt": {
                "health%": 64,
                "combatUltGen%": 80,
                "ultGen%": 95
            },
            "roadhog": {
                "health%": 65,
                "combatUltGen%": 90,
                "ultKb%": 0
            },
            "sigma": {
                "enableSecondaryFire": false,
                "health%": 80,
                "projectileGravity%": 500,
                "projectileSpeed%": 500
            },
            "sojourn": {
                "damageDealt%": 125,
                "health%": 130,
                "movementSpeed%": 115,
                "ability1Cooldown%": 95,
                "projectileSpeed%": 125,
                "secondaryFireEnergyChargeRate%": 120,
                "combatUltGen%": 160,
                "ultGen%": 145
            },
            "soldier": {
                "health%": 85,
                "projectileSpeed%": 500
            },
            "sombra": {
                "damageDealt%": 125,
                "health%": 175,
                "movementSpeed%": 120,
                "ability2Cooldown%": 145,
                "combatUltGen%": 155,
                "passiveUltGen%": 115,
                "ultGen%": 125
            },
            "symmetra": {
                "health%": 95,
                "ability1Cooldown%": 90,
                "combatUltGen%": 90,
                "ultGen%": 95
            },
            "torbjorn": {
                "damageDealt%": 125,
                "ability1Cooldown%": 0,
                "health%": 130,
                "movementSpeed%": 115,
                "ability2Cooldown%": 95,
                "ability2Duration%": 115,
                "projectileSpeed%": 115,
                "combatUltGen%": 220,
                "ultGen%": 160
            },
            "tracer": {
                "ability1Cooldown%": 67,
                "health%": 85,
                "ability2Cooldown%": 65,
                "combatUltGen%": 70
            },
            "venture": {
                "damageDealt%": 145,
                "damageReceived%": 110,
                "secondaryFireCooldown%": 80,
                "health%": 140,
                "movementSpeed%": 108,
                "ultDuration%": 110,
                "combatUltGen%": 225,
                "passiveUltGen%": 150,
                "ultGen%": 140
            },
            "widowmaker": {
                "damageDealt%": 90,
                "combatUltGen%": 90
            },
            "winston": {
                "damageDealt%": 130,
                "health%": 120,
                "ability1Cooldown%": 90,
                "ability1Kb%": 120,
                "movementGravity%": 300,
                "movementSpeed%": 115,
                "combatUltGen%": 175,
                "ultGen%": 140
            },
            "hammond": {
                "ability2Cooldown%": 103,
                "damageDealt%": 80,
                "secondaryFireCooldown%": 80,
                "ability1Kb%": 30,
                "health%": 75,
                "ultKb%": 400,
                "movementSpeed%": 115,
                "ability3Cooldown%": 80,
                "combatUltGen%": 128,
                "ultGen%": 135
            },
            "zarya": {
                "damageDealt%": 135,
                "health%": 85,
                "movementGravity%": 115,
                "movementSpeed%": 115,
                "ability1Cooldown%": 135,
                "secondaryFireKb%": 135,
                "combatUltGen%": 150,
                "ultGen%": 150
            },
            "zenyatta": {
                "health%": 85,
                "projectileSpeed%": 150,
                "combatUltGen%": 95
            },
            "general": {
                "healingDealt%": 80,
                "healingReceived%": 80,
                "combatUltGen%": 251,
                "passiveUltGen%": 170
            }
        }
    }
}

#Global variables

globalvar Close_enemies_ULT_buff_array 26
globalvar Global_ULTButton_1 27
globalvar Spiderman_trap_list 28
globalvar Global_ULTButton_2 29
globalvar Global_ULTButton_3 30
globalvar Transport_Hero 31
globalvar Winston_Slow_Areas 33
globalvar Falling_floor_array 36
globalvar antiCrashActivated 127


#Player variables

playervar Selected_Hero 26
playervar selected_hero_list_number 27
playervar Effects 28
playervar Medusa_trap 29
playervar Medusa_ultimate 30
playervar FoV_and_lineOFsight_player 31
playervar blood_beam_pool 32
playervar Medea_rule_breaker 33
playervar for_loop_2 34
playervar moctezuma_lifted 35
playervar Berserker_lives 36
playervar Snow_protection_area 37
playervar heal_over_time 38
playervar was_damaged 39
playervar Hassan_deathmark 40
playervar Nobunaga_curse 41
playervar selecting_HUD 42
playervar Holy_heal 43
playervar Chase_speed_para 44
playervar is_falling 45
playervar in_world_text 46
playervar Wallee_ing 47
playervar Crippled_ULT_saved 48
playervar Jehsus_icon 49
playervar Jehsus_protected_player 50
playervar Lanling_array 51
playervar Snow_protection_active 52
playervar Gate_of_Babylon_index 53
playervar Lanling_master 54
playervar is_tracer_marked 55
playervar delay_tagger 56
playervar enkidu_float 57
playervar color 58
playervar has_soul 59
playervar ozymandias_master 60
playervar shakespeare_master 61
playervar Choice_rock_paper_scissors 62
playervar for_loop 63
playervar Mahito_Transfigured 64
playervar is_curie_cursed 65
playervar Curserer_master 66
playervar B_3 67
playervar Blood_arthur_1 68
playervar Blood_arthur_2 69
playervar Blood_arthur_3 70
playervar Blood_arthur_4 71
playervar Blood_arthur_5 72
playervar healthpack_cursed 73
playervar lighting_pool 74
playervar Moving_ball 75
playervar Moving_ball_array 76
playervar Moving_ball_trigger 77
playervar Emiya_master 78
playervar leonidas_shield 79
playervar trump_wait_time 80
playervar trump_wait_middle 81
playervar ozymandias_ab1_using 82
playervar jehsus_master 83
playervar HUD_tutorial_screen 84
playervar garden_value 85
playervar saber_wind_gust 86
playervar vamp_absorb 87
playervar All_explanation_text 88
playervar air_area_difference_array 89
playervar Hassan_Hand_ULT 90
playervar was_damagedBig 91
playervar is_player_anchored 92
playervar anchor_position 93
playervar anchor_effect 94
playervar Cursed_facing_status 95
playervar Is_Crippled 96
playervar moctezuma_ab1_active 97
playervar Vlad_effect_master 98
playervar filtered_array 99
playervar Medea_rule_breaker2 100
playervar Donald_chaser1 101
playervar Solomon_pillar_array 102
playervar Is_Using_Ultimate 103
playervar solomon_master 104
playervar Donald_chaser2 105
playervar moira_dummy 106
playervar gilles_de_rais_damage 107
playervar in_area_counter 108
playervar mordred_extra_armor 109
playervar is_healing_cursed 110
playervar moctezuma_attack 111
playervar saint_lucy_person 112
playervar playerSpeed 113
playervar raycast_hit_position 114
playervar raycast_hit_position2 115
playervar raycast_hit_player 116
playervar raycast_lenght 117
playervar hassan_near_sight_list 118
playervar chase_Variable_time 119
playervar chase_Variable_at_rate 120
playervar chase_variable_destination 121
playervar chase_variable_duration 122
playervar chase_variable_rate_speed 123
playervar chase_variable_destination2 124
playervar mercy_attached_master 125
playervar hokusai_check_teleport 126
playervar is_damage_reversing 127


#Subroutine names

subroutine Bedivere_ult 1
subroutine create_dummy_of_EventPlayer 2
subroutine Snow_storm 3
subroutine Gilgamesh_cleaning_GOB 4
subroutine calling_nameplates_restart 8
subroutine saber_alter_wind_gust 9
subroutine transfigure_victim 10
subroutine remove_mordred_armor 11
subroutine vlad_effect_beam_loop 12
subroutine bounty_loop 13
subroutine simo_haya_debug 14
subroutine xuanzang_ULT_loop 15
subroutine ultimate_ender 16
subroutine SaintLucy_ab2_loop 17
subroutine Farthest_solomon_array_minion 19
subroutine level_up_call_subroutine 20
subroutine iskandar_cancel_animations_loop 21
subroutine create_beam_effect_subroutine 22
subroutine gilles_de_rais_tentacle_loop 23
subroutine destroy_beam_effect_subroutine 24
subroutine hassan_100_loop 25
subroutine atalante_ultimate_loop 26
subroutine charles_de_gaulle_ab2_loop 27
subroutine sieg_ab2 28
subroutine reaper_set_lower_HP 29
subroutine Experimental 30
subroutine mordred_ultimate_damage_loop 31
subroutine can_use_blade_subroutine 32
subroutine houdini_create_clone 33
subroutine Remove_healee_debuffs 34
subroutine enkidu_ab1_loop 35
subroutine moving_ball_ab2_loop 36
subroutine tawara_tota_remove_armor 37
subroutine tesla_ab1_loop 38
subroutine karna_laser_loop 39
subroutine ozymandias_ab2_loop 41
subroutine salome_setup_ab2 42
subroutine salome_ab2_damage_loop 43
subroutine solomon_ab1_loop 45
subroutine saint_lucy_subroutine 46
subroutine caster_gilgamesh_ab1 47
subroutine simo_haya_invisibility_loop 51
subroutine tesla_cooldown_reset 52
subroutine frankenstein_good_loop 54
subroutine stop_healing_over_time 55
subroutine raycast_hit_position1 56
subroutine ozymandias_ab1_loop 58
subroutine leonidas_dash 60
subroutine excalibur_morgan 62
subroutine baptiste_ult_subroutine 63
subroutine felix_faust_ab1_loop 68
subroutine Muramasa_ab2_loop 71
subroutine Solomon_ab2_loop 73
subroutine raycast_hit_position2 74
subroutine chase_player_var_time 75
subroutine chase_player_var_speed 76
subroutine raycast_hit_player 77
subroutine emyia_clear_shield 79
subroutine FoV_and_LoS_player_select 80
subroutine caesar_melee_cooldown 81
subroutine Enable_Buttons_sub 85
subroutine Tracer_trigger 86
subroutine mei_spiderwoman_loop 87
subroutine Symmetra_AA_mine 88
subroutine float_player_above_level 90
subroutine create_nameONplayer 91
subroutine destroy_nameONplayer 92
subroutine Auto_tracking_variable_Rule 93
subroutine Franken_Loop_subroutine 94
subroutine Area_Casting_Animation 95
subroutine Felix_ballin 96


#Activated extensions

#!extension beamEffects
#!extension buffStatusEffects
#!extension debuffStatusEffects
#!extension energyExplosionEffects
#!extension kineticExplosionEffects
#!extension explosionSounds
#!extension playMoreEffects
#!extension spawnMoreDummyBots
#!extension projectiles
#!extension buffStatusEffects
#!extension energyExplosionEffects
#!extension buffStatusEffects
#!extension buffStatusEffects
#!extension debuffStatusEffects
#!extension beamEffects
#!extension beamEffects
#!extension beamEffects
#!extension buffStatusEffects
#!extension buffStatusEffects
#!extension beamEffects
#!extension buffStatusEffects
#!extension beamEffects
#!extension kineticExplosionEffects
#!extension beamEffects
#!extension energyExplosionEffects
#!extension debuffStatusEffects
#!extension buffStatusEffects
#!extension beamEffects
#!extension beamEffects
#!extension buffStatusEffects
#!extension buffStatusEffects
#!extension debuffStatusEffects
#!extension energyExplosionEffects
#!extension energyExplosionEffects
#!extension energyExplosionEffects
#!extension energyExplosionEffects
#!extension buffStatusEffects
#!extension buffStatusEffects
#!extension buffStatusEffects
#!extension buffStatusEffects
#!extension buffStatusEffects
#!extension energyExplosionEffects


rule "ALL DAMAGE DEALT complete set":
    @Event playerDealtDamage
    @Condition eventPlayer.isAlive() == true
    
    if eventPlayer.getCurrentHero() == Hero.SIGMA:
        if eventAbility == Button.MELEE:
            if eventPlayer.V and eventPlayer.selected_hero_list_number:
                victim.applyImpulse(eventPlayer.getFacingDirection(), 105, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
                victim.setStatusEffect(eventPlayer, Status.ROOTED, 1)
                eventPlayer.setDamageDealt(145)
                eventPlayer.R -= 10 if eventPlayer.isMoving() else null
            else:
                damage(victim, null, 85)
        if eventPlayer.selected_hero_list_number == null and eventAbility == Button.ABILITY_2:
            victim.applyImpulse(eventPlayer.getFacingDirection(), 10000, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
            victim.setGravity(false)
            wait(0.95)
            victim.applyImpulse(Vector.DOWN, 5000, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
            wait(true)
            victim.setGravity(100)
        elif eventPlayer.selected_hero_list_number == 1:
            if eventAbility == Button.ABILITY_2 and eventPlayer.V == false:
                victim.exclude(eventPlayer).setStatusEffect(eventPlayer, Status.BURNING, 3)
                victim.exclude(eventPlayer).startDoT(null, 6, 14)
    elif eventPlayer.getCurrentHero() == Hero.GENJI:
        if eventPlayer.selected_hero_list_number == 1 and victim == eventPlayer.T and eventPlayer.Is_Using_Ultimate:
            eventPlayer.startHoT(eventPlayer, 0.8, 95)
            eventPlayer.setStatusEffect(null, Status.INVINCIBLE, 1.2)
        elif eventPlayer.selected_hero_list_number == 2:
            if eventAbility == Button.MELEE:
                damage(victim, eventPlayer, 10)
                damage(victim, null, 30)
            elif eventAbility == Button.ABILITY_1:
                damage(victim, eventPlayer, 20)
        elif eventPlayer.selected_hero_list_number == 3:
            if eventAbility == Button.MELEE:
                if eventPlayer.isInViewAngle(victim, 70) and not victim.isInViewAngle(eventPlayer, 70):
                    damage(victim, eventPlayer, 45)
        elif eventPlayer.isUsingAbility2() and eventPlayer.selected_hero_list_number == 4:
            victim.setStatusEffect(eventPlayer, Status.ROOTED, 2)
            victim.setStatusEffect(eventPlayer, Status.BURNING, 2)
        elif eventPlayer.selected_hero_list_number == 4 and eventAbility == Button.ABILITY_1:
            victim.startDoT(eventPlayer, 2, 18)
        elif eventPlayer.selected_hero_list_number == 5:
            if eventAbility == Button.ABILITY_1:
                if eventPlayer.G == 1:
                    victim.setStatusEffect(eventPlayer, Status.FROZEN, 2)
                    damage(victim, eventPlayer, 75)
                    victim.setDamageReceived(40)
                    waitUntil(eventPlayer.isUsingUltimate(), 2)
                    victim.setDamageReceived(70)
                elif eventPlayer.G == 2:
                    victim.setStatusEffect(eventPlayer, Status.BURNING, 3.5)
                    victim.startDoT(attacker, 3, 60)
            elif eventAbility == Button.ULTIMATE:
                victim.setStatusEffect(eventPlayer, Status.ROOTED, 2)
                victim.setStatusEffect(eventPlayer, Status.BURNING, 2)
                damage(victim, eventPlayer, 30)
                victim.startDoT(attacker, 2, 30)
            elif eventAbility == Button.MELEE:
                damage(victim, eventPlayer, 35)
        elif eventPlayer.selected_hero_list_number == 6:
            if eventPlayer.isUsingUltimate():
                heal(victim, eventPlayer, eventDamage)
                damage(victim, null, victim.getHealth() / 2 + 50)
            elif eventAbility == Button.ABILITY_1 and not eventPlayer.isUsingUltimate():
                damage(victim, eventPlayer, victim.getUltCharge() * 2)
            elif eventAbility == Button.MELEE:
                damage(victim, eventPlayer, 45)
        elif eventPlayer.selected_hero_list_number == 7:
            if eventAbility == Button.ABILITY_1:
                if victim in eventPlayer.Medusa_trap:
                    smallMessage(eventPlayer, "Nice combo!")
                    victim.startDoT(null, 3, 16)
                    eventPlayer.setUltCharge(eventPlayer.getUltCharge() + victim.getUltCharge() / 5)
                    victim.setUltCharge(victim.getUltCharge() / 1.2)
                eventPlayer.H = victim.getUltCharge()
                victim.setUltCharge(false)
                waitUntil(eventPlayer.isDead(), 4)
                victim.setUltCharge(eventPlayer.H)
        elif eventAbility == Button.ABILITY_1 and eventPlayer.selected_hero_list_number == 8:
            victim.setStatusEffect(eventPlayer, Status.BURNING, 3)
            victim.startDoT(eventPlayer, 3, 45)
            damage(victim, eventPlayer, 40)
            victim.setUltCharge(victim.getUltCharge() - 5)
            eventPlayer.setUltCharge(eventPlayer.getUltCharge() + 15)
        elif eventPlayer.selected_hero_list_number == 9 and eventAbility == Button.ABILITY_1:
            victim.removeAllHealthPools()
            victim.setHealth(victim.getHealth() - victim.getMaxHealth() / 5)
            victim.cancelPrimaryAction()
            victim.Is_Using_Ultimate = null
        elif eventAbility == Button.ABILITY_1 and eventPlayer.selected_hero_list_number == 11:
            victim.startDoT(eventPlayer, 9, 4)
            damage(victim, eventPlayer, 25)
            wait(0.7)
            eventPlayer.setAbilityCooldown(Button.ABILITY_1, 3.5)
        elif eventAbility == Button.ABILITY_1 and eventPlayer.selected_hero_list_number == 12:
            damage(victim, eventPlayer, (eventPlayer.getMaxHealth() - eventPlayer.getHealth()) * 0.6)
    elif eventPlayer.getCurrentHero() == Hero.SOLDIER:
        if eventAbility == Button.SECONDARY_FIRE:
            if eventPlayer.selected_hero_list_number == null:
                if eventPlayer.Is_Using_Ultimate:
                    smallMessage(victim, "Chu Chulainn: You are already dead")
                    victim.Berserker_lives = null
                    wait(2)
                    for eventPlayer.for_loop in range(4):
                        kill(victim, eventPlayer)
                        damage(victim, eventPlayer, 10000)
                        wait()
                    if victim.getCurrentHero() == Hero.HANZO and victim.selected_hero_list_number == null:
                        victim.H = null
                    eventPlayer.setUltCharge(0)
                    eventPlayer.allowButton(Button.SECONDARY_FIRE)
                else:
                    playEffect(getAllPlayers(), DynamicEffect.BAD_PICKUP_EFFECT, Color.RED, victim, 4)
                    victim.setHealth(victim.getHealth() - victim.getMaxHealth() / 4)
                    victim.setUltCharge(victim.getUltCharge() - 15)
                    victim.removeAllHealthPools()
                    wait(0.36)
            elif eventPlayer.selected_hero_list_number == 2 and eventPlayer.D == 2:
                victim.startDoT(attacker, 9999, 12)
                eventPlayer.Q.append(getLastDoT())
            elif eventPlayer.selected_hero_list_number == 1:
                victim.setStatusEffect(eventPlayer, Status.STUNNED, 0.6)
            elif eventPlayer.selected_hero_list_number == 4:
                victim.playerSpeed[false] -= 30
                wait(3)
                victim.playerSpeed[false] += 30
    elif eventPlayer.getCurrentHero() == Hero.ROADHOG:
        if eventPlayer.moctezuma_attack and eventPlayer.selected_hero_list_number and eventAbility == Button.MELEE:
            eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 3)
            eventPlayer.startHoT(eventPlayer, 5, 235)
            playEffect(getAllPlayers(), DynamicEffect.BAD_PICKUP_EFFECT, Color.RED, victim, 2)
            playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.BLACK, victim, 2)
            playEffect(getAllPlayers(), DynamicEffect.GOOD_EXPLOSION, Color.RED, victim, 2)
            damage(victim, eventPlayer, 40)
            smallMessage([attacker, getPlayersInRadius(victim, 8, victim.getTeam(), LosCheck.OFF)], "{0} Get Moctezumaed!".format(heroIcon(eventPlayer.getCurrentHero())))
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.RED, victim.getEyePosition(), 8)
            getPlayersInRadius(victim, 8, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF).startDoT(eventPlayer, 3, 9)
            waitUntil(eventPlayer.moctezuma_ab1_active == false, 5)
        elif eventPlayer.selected_hero_list_number == null:
            if eventAbility == Button.MELEE:
                eventPlayer.V.append(victim)
                victim.attachTo(eventPlayer, vect(false, 2, false))
                victim.setStatusEffect(null, Status.KNOCKED_DOWN, 9999)
                victim.setStatusEffect(null, Status.PHASED_OUT, 9999)
            elif eventAbility == Button.ABILITY_1:
                eventPlayer.setStatusEffect(null, Status.STUNNED, 0.016)
                smallMessage(victim, "Here I come :3")
                eventPlayer.P = victim.getPosition()
                eventPlayer.teleport(nearestWalkablePosition(eventPlayer.P))
            if eventAbility == Button.ULTIMATE:
                victim.applyImpulse(directionTowards(victim, eventPlayer), 35, Relativity.TO_WORLD, Impulse.INCORPORATE_CONTRARY_MOTION)
                victim.setStatusEffect(eventPlayer, Status.ROOTED, true)
    elif eventPlayer.getCurrentHero() == Hero.MOIRA:
        if eventAbility == Button.SECONDARY_FIRE and eventPlayer.selected_hero_list_number == 1:
            eventPlayer.startHoT(eventPlayer, 0.4, 15)
            eventPlayer.setUltCharge(eventPlayer.getUltCharge() + 0.65)
        elif (eventPlayer.selected_hero_list_number == null and (eventAbility == Button.SECONDARY_FIRE or eventAbility == Button.MELEE)) and eventPlayer.Medea_rule_breaker == true:
            damage(victim, eventPlayer, 65)
            eventPlayer.setUltCharge(eventPlayer.getUltCharge() + eventDamage / 8)
        elif eventAbility == Button.ABILITY_2 and eventPlayer.selected_hero_list_number == 3:
            victim.setUltCharge(victim.getUltCharge() - 2)
            eventPlayer.setUltCharge(eventPlayer.getUltCharge() + 2.5)
            damage(victim, null, 5)
    elif eventPlayer.getCurrentHero() == Hero.ANA:
        if eventPlayer.selected_hero_list_number == null:
            async(simo_haya_debug, AsyncBehavior.NOOP)
            if eventPlayer.Is_Using_Ultimate and (eventAbility == Button.PRIMARY_FIRE or eventAbility == Button.SECONDARY_FIRE):
                if eventPlayer.J:
                    goto lbl_0
                kill(victim, eventPlayer)
                eventPlayer.Is_Using_Ultimate = null
            elif eventAbility == Button.ABILITY_1:
                getPlayersInRadius(victim, 7, Team.ALL, LosCheck.OFF).applyImpulse(Vector.UP, 15, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
                lbl_0:
                victim.setStatusEffect(null, Status.FROZEN, 1.7)
                if distance(eventPlayer, victim) <= 15:
                    eventPlayer.playerSpeed[false] += 425
                    wait(0.75)
                    eventPlayer.playerSpeed[false] -= 425
            wait(0.15)
        elif eventPlayer.selected_hero_list_number == 1:
            if eventAbility == Button.ABILITY_1:
                eventPlayer.Medusa_trap = victim
                victim.setStatusEffect(eventPlayer, Status.BURNING, 5)
                victim.setAbilityCooldown(Button.ABILITY_1, victim.getAbilityCooldown(Button.ABILITY_1) + 5)
                victim.setAbilityCooldown(Button.ABILITY_2, victim.getAbilityCooldown(Button.ABILITY_2) + 5)
                victim.setStatusEffect(null, Status.HACKED, 5)
                victim.startDoT(eventPlayer, victim.getUltCharge() / 10, 10)
                wait(true)
                eventPlayer.setAbilityCooldown(Button.ABILITY_1, 9)
            elif eventAbility == Button.ABILITY_2:
                victim.setStatusEffect(null, Status.HACKED, 2.5)
                victim.setStatusEffect(null, Status.BURNING, 2.5)
                victim.startDoT(eventPlayer, 3, 25)
                playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.RED, eventDamage, 3)
    elif eventPlayer.getCurrentHero() == Hero.BAPTISTE:
        if eventPlayer.selected_hero_list_number == null:
            if eventAbility == Button.MELEE:
                victim.applyImpulse(directionTowards(eventDirection, victim), 30, Relativity.TO_PLAYER, Impulse.CANCEL_CONTRARY_MOTION)
                damage(victim, eventPlayer, 15)
        elif eventPlayer.selected_hero_list_number == 1:
            if not eventAbility in [Button.PRIMARY_FIRE, Button.MELEE] or not eventPlayer.isHoldingButton(Button.ABILITY_2):
                eventPlayer.H += eventDamage / 1.1
            if eventAbility == Button.PRIMARY_FIRE:
                damage(victim, eventPlayer, 30)
                damage(victim, null, 25)


rule "ALL DAMAGE DEALT complete set 2":
    @Event playerDealtDamage
    @Condition eventPlayer.isAlive() == true
    
    if eventPlayer.getCurrentHero() == Hero.BRIGITTE:
        if eventPlayer.isFiringSecondaryFire() and eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) and eventPlayer.selected_hero_list_number == 1:
            damage(victim, null, 30)
        elif eventPlayer.selected_hero_list_number == 1 and eventAbility == Button.ABILITY_1:
            victim.applyImpulse(eventPlayer.getFacingDirection(), 6, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
            damage(victim, null, 70)
            wait(0.1)
            victim.setStatusEffect(null, Status.ROOTED, 2)
        elif eventPlayer.selected_hero_list_number == null and eventAbility == Button.ABILITY_1:
            victim.setStatusEffect(null, Status.ROOTED, 2)
        elif eventPlayer.selected_hero_list_number == 2:
            if eventAbility != Button.ABILITY_1:
                goto lbl_0
            damage(victim, null, 70)
            lbl_0:
            if eventPlayer.Is_Using_Ultimate:
                victim.setHealth(victim.getHealth() - victim.getMaxHealth() / 2)
                eventPlayer.S += 1
        elif eventPlayer.selected_hero_list_number == 3 and eventAbility == Button.ABILITY_1:
            damage(victim, eventPlayer, 50)
            eventPlayer.startHoT(eventPlayer, 2, 50)
            victim.applyImpulse(Vector.BACKWARD, 10, Relativity.TO_PLAYER, Impulse.INCORPORATE_CONTRARY_MOTION)
        elif eventPlayer.selected_hero_list_number == 4 and eventAbility == Button.ABILITY_1:
            eventPlayer.startHoT(eventPlayer, 1.25, 95)
            victim.startDoT(eventPlayer, 3, 40)
            eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 1.25)
    elif eventPlayer.getCurrentHero() == Hero.REINHARDT:
        if eventAbility == Button.ULTIMATE:
            victim.setStatusEffect(null, Status.FROZEN, 9999)
            victim.clearStatusEffect(Status.FROZEN)
            if victim.isOnGround():
                kill(victim, eventPlayer)
        elif eventAbility == Button.ABILITY_2:
            if eventPlayer.selected_hero_list_number == 3:
                if eventPlayer.X == 1:
                    victim.setHealth(victim.getHealth() - victim.getMaxHealth() / 3)
                else:
                    damage(victim, null, 35)
            elif eventPlayer.selected_hero_list_number == null:
                victim.applyImpulse(directionTowards(victim, attacker), 16, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
            elif eventPlayer.selected_hero_list_number == 2:
                victim.setStatusEffect(null, Status.ROOTED, 2)
            elif eventPlayer.selected_hero_list_number == 5:
                victim.setAbilityCooldown(Button.ABILITY_1, victim.getAbilityCooldown(Button.ABILITY_1) + 5)
                victim.setAbilityCooldown(Button.ABILITY_2, victim.getAbilityCooldown(Button.ABILITY_2) + 5)
                damage(victim, null, 35)
            elif eventAbility == Button.PRIMARY_FIRE:
            if eventPlayer.selected_hero_list_number == 2:
                damage(victim, eventPlayer, victim.getUltCharge() / 2)
    elif eventPlayer.getCurrentHero() == Hero.HANZO:
        if eventPlayer.selected_hero_list_number == 2 and eventAbility != Button.ULTIMATE:
            eventPlayer.O = victim
            victim.setStatusEffect(eventPlayer, Status.HACKED, 3 if eventAbility == Button.ABILITY_2 else null)
        elif eventPlayer.selected_hero_list_number == 5 and (eventAbility == Button.ULTIMATE or eventAbility == Button.ABILITY_2):
            if eventAbility == Button.ULTIMATE:
                victim.clearStatusEffect(Status.UNKILLABLE)
                eventPlayer.setStatusEffect(null, Status.PHASED_OUT, 3)
                kill(victim, eventPlayer)
            elif eventAbility == Button.ABILITY_2:
                victim.applyImpulse(eventDirection + Vector.UP, 15, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
                heal(eventPlayer, eventPlayer, 40)
                eventPlayer.addHealthPool(Health.NORMAL, 100, false, true)
                async(tawara_tota_remove_armor, AsyncBehavior.NOOP)
        elif eventAbility == Button.PRIMARY_FIRE and eventPlayer.selected_hero_list_number == 3:
            victim.playerSpeed[false] -= 30
            smallMessage(victim, "{0} Slow down!!!".format(heroIcon(Hero.HANZO)))
            waitUntil(eventPlayer.isInSpawnRoom(), 3)
            victim.playerSpeed[false] += 30
        elif eventPlayer.selected_hero_list_number == 6:
            victim.setUltCharge(victim.getUltCharge() - 1)
            wait(0.05)
    elif eventPlayer.getCurrentHero() == Hero.ZENYATTA:
        if eventPlayer.selected_hero_list_number == null and eventAbility == Button.PRIMARY_FIRE and eventPlayer.X:
            victim.setFacing(angleToDirection(random.randint(false, 360), random.randint(false, 360)), Relativity.TO_WORLD)
        elif eventAbility == Button.SECONDARY_FIRE and eventPlayer.selected_hero_list_number == 1:
            eventPlayer.setUltCharge(eventPlayer.getUltCharge() + 10)
            victim.setUltCharge(victim.getUltCharge() - 10)
        elif eventPlayer.selected_hero_list_number == 2:
            if eventAbility == Button.PRIMARY_FIRE:
                damage(victim, eventPlayer, 12)
                playEffect(getAllPlayers(), DynamicEffect.GOOD_EXPLOSION, Color.RED, victim, 0.85)
            elif eventAbility == Button.SECONDARY_FIRE:
                damage(victim, eventPlayer, 0.5)
                playEffect(getAllPlayers(), DynamicEffect.GOOD_EXPLOSION, Color.RED, victim, 0.35)
        elif eventPlayer.isUsingUltimate() and eventPlayer.selected_hero_list_number == 2:
            wait(true, Wait.RESTART_WHEN_TRUE)
            eventPlayer.setUltCharge(0)
        elif not eventPlayer.isUsingUltimate() and eventPlayer.selected_hero_list_number == 3:
            eventPlayer.setUltCharge(eventPlayer.getUltCharge() + eventDamage / 10)
    elif eventPlayer.getCurrentHero() == Hero.DOOMFIST:
        if eventPlayer.selected_hero_list_number == 1:
            if eventAbility == Button.ABILITY_1:
                victim.setStatusEffect(eventPlayer, Status.STUNNED, 2)
                victim.applyImpulse(eventPlayer.getFacingDirection(), 25, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
                wait(0.95)
                eventPlayer.setAbilityCooldown(Button.ABILITY_1, 6)
            elif eventAbility == Button.ULTIMATE:
                kill(victim, eventPlayer)
            elif eventAbility == Button.SECONDARY_FIRE:
                damage(victim, eventPlayer, 35)
                victim.applyImpulse(eventPlayer.getFacingDirection(), 45, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
        elif eventPlayer.selected_hero_list_number == 2:
            if eventAbility == Button.SECONDARY_FIRE:
                if not eventPlayer.Is_Using_Ultimate:
                    damage(victim, null, eventDamage / 2)
                    victim.applyImpulse(eventPlayer.getFacingDirection(), 35, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
                elif eventPlayer.Is_Using_Ultimate or eventPlayer.X == 1:
                    damage(victim, null, victim.getMaxHealth() / 2)
                    victim.applyImpulse(eventPlayer.getFacingDirection(), 2600, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
                    wait(1.5)
                    victim.setStatusEffect(null, Status.FROZEN, 1.5)
            elif eventAbility == Button.ABILITY_1:
                eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 4)
                damage(victim, null, 45)
        elif eventPlayer.selected_hero_list_number == 3:
            if eventAbility == Button.SECONDARY_FIRE:
                damage(victim, eventPlayer, 45)
                victim.applyImpulse(eventPlayer.getFacingDirection(), 45, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
    elif eventPlayer.getCurrentHero() == Hero.CASSIDY:
        if eventWasCriticalHit:
            if eventPlayer.selected_hero_list_number:
                goto lbl_1
            damage(victim, null, victim.getMaxHealth() / 6)
            lbl_1:
            if eventPlayer.selected_hero_list_number:
                victim.Is_Using_Ultimate = false
                heal(eventPlayer, eventPlayer, eventDamage)
            else:
                eventPlayer.setUltCharge(eventPlayer.getUltCharge() + 7)
        if eventPlayer.selected_hero_list_number == null:
            if eventAbility != Button.ABILITY_2:
                goto lbl_2
            victim.setHealth(victim.getHealth() - victim.getHealthOfType(Health.ARMOR) / 2)
            lbl_2:
            if eventPlayer.isUsingUltimate():
                if eventAbility == Button.ULTIMATE:
                    kill(victim, eventPlayer)
                    startDamageModification(getPlayers(getOppositeTeam(eventPlayer.getTeam())), eventPlayer, 0, DamageReeval.RECEIVERS_DAMAGERS_AND_DMGPERCENT)
                    wait(true)
                    stopDamageModification(getLastDamageModification())
        elif eventAbility == Button.PRIMARY_FIRE and eventPlayer.selected_hero_list_number:
            raycast_hit_position1()
            playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.PURPLE, eventPlayer.raycast_hit_position, 0.1)
            heal(eventPlayer, eventPlayer, eventDamage * 1.3)
    elif eventPlayer.getCurrentHero() == Hero.ORISA:
        if eventAbility == Button.ABILITY_2:
            victim.setStatusEffect(eventPlayer, Status.FROZEN, 0.3)
            victim.applyImpulse(directionTowards(eventPlayer - vect(false, 0.5, false), victim), 26, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
    elif eventPlayer.getCurrentHero() == Hero.DVA and eventAbility == Button.ABILITY_1 and eventPlayer.Is_Using_Ultimate:
        kill(victim, eventPlayer)
    elif eventPlayer.getCurrentHero() == Hero.HAMMOND and eventAbility == Button.PRIMARY_FIRE:
        if eventPlayer.Mahito_Transfigured:
            goto lbl_3
        victim.startDoT(eventPlayer, 3, 5)
        lbl_3:
    elif eventPlayer.getCurrentHero() == Hero.WINSTON:
        if eventAbility == Button.SECONDARY_FIRE:
            eventPlayer.startHoT(eventPlayer, 2.15, eventDamage * 2)
        elif eventAbility == Button.ULTIMATE:
            damage(victim, null, 150)
            victim.setUltCharge(victim.getUltCharge() - victim.getUltCharge() / 5)
        elif eventAbility == Button.PRIMARY_FIRE:
            victim.setHealth(victim.getHealth() - victim.getMaxHealth() / 75)
        wait(0.15)
    elif eventPlayer.getCurrentHero() == Hero.RAMATTRA:
        if eventPlayer.selected_hero_list_number == 0:
            if eventAbility == Button.ABILITY_1:
                eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 2.5)
                damage(victim, eventPlayer, 30)
            elif eventAbility == Button.ULTIMATE:
                heal(eventPlayer, eventPlayer, eventDamage * 3)
        elif eventPlayer.selected_hero_list_number == 1:
            if eventAbility in [Button.ABILITY_1, Button.MELEE]:
                victim.is_curie_cursed += 1
                victim.Curserer_master = eventPlayer
    elif eventPlayer.getCurrentHero() == Hero.ZARYA:
        if not eventPlayer.selected_hero_list_number:
            heal(eventPlayer, eventPlayer, eventDamage)
            if eventAbility != Button.SECONDARY_FIRE:
                if victim.getUltCharge() > 1:
                    victim.setUltCharge(victim.getUltCharge() - eventDamage / 8)
                    eventPlayer.setUltCharge(eventPlayer.getUltCharge() + eventDamage / 20)
            else:
                victim.setStatusEffect(null, Status.ROOTED, 1.55)
                eventPlayer.setAmmo(0, 0)
        else:
            if eventAbility == Button.MELEE:
                eventPlayer.startHoT(eventPlayer, 2, eventDamage * 3)
                damage(victim, eventPlayer, 65)
    elif eventPlayer.getCurrentHero() == Hero.KIRIKO:
        if eventPlayer.selected_hero_list_number == 0:
            if eventWasCriticalHit:
                eventPlayer.startHoT(eventPlayer, 1, 30)
                if eventPlayer.Is_Using_Ultimate:
                    damage(victim, eventPlayer, 100000)
        else:
            if teamScore(getOppositeTeam(eventPlayer.getTeam())) <= teamScore(eventPlayer.getTeam()):
                goto lbl_4
            damage(victim, eventPlayer, 35 * (teamScore(getOppositeTeam(eventPlayer.getTeam())) - teamScore(eventPlayer.getTeam())))
            lbl_4:
            if distance(eventPlayer, victim) >= 3 and distance(eventPlayer, victim) <= 7:
                if eventPlayer.isUsingUltimate() or eventPlayer.getUltCharge() >= 30:
                    damage(victim, eventPlayer, eventDamage * 3)
                    smallMessage(eventPlayer, "7-3 Crit")
                    wait(0.3)
                    eventPlayer.setUltCharge(eventPlayer.getUltCharge() - 45)
        wait(0.25)
    elif eventPlayer.getCurrentHero() == Hero.MAUGA:
        if not eventPlayer.selected_hero_list_number:
            if eventPlayer.isUsingAbility2():
                heal(eventPlayer, eventPlayer, eventDamage * 0.5)
            if eventAbility == Button.ABILITY_1:
                victim.cancelPrimaryAction()
                victim.Is_Using_Ultimate = false
                victim.setStatusEffect(null, Status.ROOTED, 2.3)
                victim.setAbilityCooldown(Button.ABILITY_1, victim.getAbilityCooldown(Button.ABILITY_1) + 2)
                victim.setAbilityCooldown(Button.ABILITY_2, victim.getAbilityCooldown(Button.ABILITY_2) + 2)
    elif eventPlayer.getCurrentHero() == Hero.MEI:
        if eventPlayer.selected_hero_list_number == 2:
            victim.setStatusEffect(null, Status.BURNING, 2)
            if eventAbility == Button.PRIMARY_FIRE:
                damage(victim, eventPlayer, eventDamage * 0.65)
            elif eventAbility == Button.SECONDARY_FIRE:
                damage(victim, eventPlayer, victim.getHealthOfType(Health.ARMOR) / 3)
    elif eventPlayer.getCurrentHero() == Hero.VENTURE:
        if eventAbility == Button.ABILITY_1 and victim.getNormalizedHealth() < 0.3:
            kill(victim, eventPlayer)
        elif eventAbility == Button.ULTIMATE:
            victim.setStatusEffect(eventPlayer, Status.ROOTED, 1.5)
    elif eventPlayer.getCurrentHero() == Hero.REAPER:
        if eventPlayer.selected_hero_list_number:
            heal(eventPlayer, null, eventDamage * 0.65)
        else:
            if eventAbility == Button.PRIMARY_FIRE:
                damage(victim, null, eventDamage * 2.5)


rule "anti crash":
    @Condition getServerLoad() > 230
    @Condition antiCrashActivated == false
    
    wait(true, Wait.ABORT_WHEN_FALSE)
    smallMessage(getAllPlayers(), "Anti crash system activated")
    setSlowMotion(10)
    antiCrashActivated = true


rule "disable anti crash":
    @Condition antiCrashActivated == true
    @Condition getServerLoad() < 200
    
    setSlowMotion(100)
    antiCrashActivated = false


rule "Player Speed automator":
    @Event eachPlayer
    #@Condition isAssemblingHeroes() == false
    @Condition isMatchBetweenRounds() == false
    @Condition eventPlayer.playerSpeed[true] != eventPlayer.playerSpeed[false]
    
    eventPlayer.playerSpeed[true] = eventPlayer.playerSpeed[false]
    eventPlayer.setMoveSpeed(eventPlayer.playerSpeed[true])


rule "Healthpacks give extra life ( 30% cooldown reduction + 15% ULT)":
    @Event playerReceivedHealing
    @Condition eventWasHealthPack == true
    
    eventPlayer.setAbilityCooldown(Button.ABILITY_2, eventPlayer.getAbilityCooldown(Button.ABILITY_2) - eventPlayer.getAbilityCooldown(Button.ABILITY_2) / 3)
    eventPlayer.setAbilityCooldown(Button.ABILITY_1, eventPlayer.getAbilityCooldown(Button.ABILITY_1) - eventPlayer.getAbilityCooldown(Button.ABILITY_1) / 3)
    __skipIf__(eventPlayer.getCurrentHero() == Hero.BRIGITTE and eventPlayer.selected_hero_list_number == 1, true)
    eventPlayer.setUltCharge(eventPlayer.getUltCharge() + 15)


rule "Give extra ultimate when players near player":
    @Event eachPlayer
    @Condition eventPlayer in Close_enemies_ULT_buff_array == true
    @Condition eventPlayer.isAlive() == true
    
    eventPlayer.in_area_counter = [player for player in getPlayersInRadius(eventPlayer, 8, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF) if entityExists(player)]
    if len(eventPlayer.in_area_counter) >= 1:
        eventPlayer.setUltCharge(eventPlayer.getUltCharge() + len(eventPlayer.in_area_counter) * 2)
    wait(0.85)
    if RULE_CONDITION:
        goto RULE_START


rule "Reset when spawning or re entering spawn":
    @Event eachPlayer
    @Condition (eventPlayer.isInSpawnRoom() or eventPlayer in Transport_Hero) == true
    @Condition eventPlayer.hasSpawned() == true
    
    Winston_Slow_Areas.remove(eventPlayer)
    calling_nameplates_restart()
    destroyHudText(eventPlayer.HUD_tutorial_screen[8])
    hudSubheader(eventPlayer, eventPlayer.All_explanation_text[eventPlayer.selected_hero_list_number], HudPosition.LEFT, 1, Color.WHITE, HudReeval.VISIBILITY_AND_STRING, SpecVisibility.DEFAULT)
    eventPlayer.HUD_tutorial_screen[8] = getLastCreatedText()
    Enable_Buttons_sub()
    Close_enemies_ULT_buff_array.remove(eventPlayer)
    Transport_Hero.remove(eventPlayer)
    eventPlayer.stopForcingCurrentHero()
    eventPlayer.O = false
    eventPlayer.clearStatusEffect(Status.UNKILLABLE)
    eventPlayer.disableVoiceChat(true, false, true)
    eventPlayer.setAimSpeed(100)
    eventPlayer.stopTransformingThrottle()
    eventPlayer.Emiya_master = null
    eventPlayer.setJumpVerticalSpeed(100)
    eventPlayer.stopFacing()
    eventPlayer.is_tracer_marked[false] = false
    destroyEffect(eventPlayer.Effects[3])
    eventPlayer.stopAllHoT()
    destroyIcon(eventPlayer.Effects[4])
    destroyEffect(eventPlayer.Effects[true])
    destroyIcon(eventPlayer.Effects[2])
    destroyEffect(eventPlayer.Effects[2])
    eventPlayer.trump_wait_middle = false
    eventPlayer.vamp_absorb = false
    eventPlayer.stopAllDoT()
    eventPlayer.healthpack_cursed[0] = false
    eventPlayer.healthpack_cursed[4] = false
    eventPlayer.stopScalingBarriers()
    destroyEffect(eventPlayer.Effects[true])
    destroyIcon(eventPlayer.Effects[2])
    eventPlayer.setInvisibility(Invis.NONE)
    eventPlayer.removeAllHealthPools()
    eventPlayer.stopCamera()
    destroyHudText(eventPlayer.HUD_tutorial_screen[7])
    destroyHudText(eventPlayer.in_world_text[1])
    destroyInWorldText(eventPlayer.in_world_text[0])
    destroyProgressBarHud(eventPlayer.HUD_tutorial_screen[6])
    S.remove(eventPlayer)
    H.remove(eventPlayer)
    L.remove(eventPlayer)
    eventPlayer.is_player_anchored = 0
    eventPlayer.stopForcingThrottle()
    eventPlayer.Is_Using_Ultimate = false
    eventPlayer.stopScalingSize()
    eventPlayer.setDamageReceived(70)
    eventPlayer.setMaxHealth(100)
    eventPlayer.setDamageDealt(100)
    eventPlayer.setProjectileSpeed(100)
    eventPlayer.setHealingDealt(100)
    eventPlayer.setHealingReceived(100)
    eventPlayer.setMoveSpeed(100)
    eventPlayer.setGravity(100)
    eventPlayer.is_healing_cursed = false
    #current player speed
    eventPlayer.playerSpeed[true] = 100
    #value to modify
    eventPlayer.playerSpeed[false] = 100
    eventPlayer.Snow_protection_active = false
    eventPlayer.enableEnvironmentCollision()
    eventPlayer.selecting_HUD = true
    destroyHudText(eventPlayer.in_world_text[1])
    #explanation text
    destroyInWorldText(eventPlayer.HUD_tutorial_screen[0])
    calling_nameplates_restart()
    if eventPlayer.Mahito_Transfigured[3] == false:
        goto lbl_0
    wait(0.089)
    eventPlayer.selected_hero_list_number = eventPlayer.Mahito_Transfigured[2]
    eventPlayer.stopForcingCurrentHero()
    eventPlayer.Mahito_Transfigured[0] = false
    lbl_0:
    createInWorldText(localPlayer, "- - - - - - - TUTORIAL - - - - - - -\n{0}".format("Objective: Kill the enemies\r\n(back) {1} : {2} (forward)\r\n{0}".format("\r\nPress ({1}) to select the class\r\nCrouch 2s in Spawn for Random Class\r\n{0}".format("Game has 113! Custom Hero SubClasses\r\n{0}".format("All abilities are explained at https://workshop.codes/RTMJ2\r"), buttonString(Button.INTERACT)), buttonString(Button.PRIMARY_FIRE), buttonString(Button.SECONDARY_FIRE))), eventPlayer.getFacingDirection() + eventPlayer.getEyePosition(), true, Clip.SURFACES, WorldTextReeval.VISIBILITY_POSITION_AND_STRING, Color.WHITE, SpecVisibility.DEFAULT)
    eventPlayer.HUD_tutorial_screen[0] = getLastCreatedText()
    wait()
    #create the first text ui
    hudText(eventPlayer, eventPlayer.Selected_Hero[eventPlayer.selected_hero_list_number], "{0} / {1}".format(eventPlayer.selected_hero_list_number, len(eventPlayer.Selected_Hero) - 1), null, HudPosition.TOP, true, Color.YELLOW, Color.WHITE, null, HudReeval.VISIBILITY_AND_STRING, SpecVisibility.DEFAULT)
    #delete this if it doesnt work ( it worked)
    eventPlayer.in_world_text[1] = getLastCreatedText()
    #create the above player hud
    createInWorldText(getAllPlayers(), "{0}{1}".format(heroIcon(eventPlayer.getCurrentHero()), eventPlayer.Selected_Hero[eventPlayer.selected_hero_list_number]), eventPlayer, true, Clip.SURFACES, WorldTextReeval.VISIBILITY_POSITION_AND_STRING, Color.WHITE, SpecVisibility.DEFAULT)
    eventPlayer.in_world_text[false] = getLastCreatedText()
    eventPlayer.selecting_HUD = 2
    eventPlayer.Solomon_pillar_array = []
    waitUntil(evalOnce(eventPlayer.getCurrentHero()) != eventPlayer.getCurrentHero() or eventPlayer.isHoldingButton(Button.INTERACT) or not eventPlayer.isInSpawnRoom(), 99999)
    #explanation text
    destroyInWorldText(eventPlayer.HUD_tutorial_screen[0])
    eventPlayer.selecting_HUD = false
    waitUntil(evalOnce(eventPlayer.getCurrentHero()) != eventPlayer.getCurrentHero() or not eventPlayer.isInSpawnRoom(), 99999)
    eventPlayer.startHoT(null, 1, 9000)
    wait(0.1)
    if RULE_CONDITION:
        goto RULE_START


def calling_nameplates_restart():
    @Name "Array list for All servants"
    
    eventPlayer.All_explanation_text = []
    eventPlayer.Selected_Hero = []
    if eventPlayer.getCurrentHero() == Hero.ROADHOG:
        eventPlayer.Selected_Hero.append(["Caesar", "Moctezuma II"])
        eventPlayer.All_explanation_text.append("Ab1: Teleport to victim\r\nAb2: Speed boost\r\n'Melee': Grab enemies\r\nULT: Pull victims to you")
        eventPlayer.All_explanation_text.append("Ab1: First punch fully heals\r\nAb2: Confuse enemies around you\r\nULT: 50% fall damage and AoE healing-curse\r\naround you")
    elif eventPlayer.getCurrentHero() == Hero.ECHO:
        eventPlayer.Selected_Hero.append(["Enkidu", "Archangel Michael"])
        eventPlayer.All_explanation_text.append("'R.Click':Fly forward\r\n'Jump':Change gravity\r\nAb2: Chain barrage\r\n'Ab1': Shoot a chain\r\n'ULT': Chain enemies&Anti-heal them")
        eventPlayer.All_explanation_text.append("Ab1: Go through walls, looking at you damages enemies\nULT: Everyone NOT under a roof dies (not you lol)")
    elif eventPlayer.getCurrentHero() == Hero.MERCY:
        eventPlayer.Selected_Hero.append(["Jeanne D'Arc"])
        eventPlayer.All_explanation_text.append("Ab1: Stick to ally back\r\nAb2: Teleport\r\nULT: Start absorbing all Damage\r\nPress (ULT) again to release IT around you")
    elif eventPlayer.getCurrentHero() == Hero.PHARAH:
        eventPlayer.Selected_Hero.append(["Ishtar", "David"])
        eventPlayer.All_explanation_text.append("'Ab1': (HOLD) Fly to where you look\n'Crouch': Stop all movement\nAb2: Big Speed boost\nUltimate: Friendly-fire Nuke on mouse")
        eventPlayer.All_explanation_text.append("'Ab1': Dash to where you look (3 charges)\nAb2: Damage and stun very close enemies\n'ULT': Instant projectile: Victims->25%HP")
    elif eventPlayer.getCurrentHero() == Hero.MEI:
        eventPlayer.Selected_Hero.append(["Marie Antoinette", "Mahito", "Surtr"])
        eventPlayer.All_explanation_text.append("'Shoot+Crouch': Fly\r\nAb1: Hipnotize enemy\r\nAn2: Stick to an enemy\r\nULT: Freeze All Players in ULT Range")
        eventPlayer.All_explanation_text.append("Ab2: (Punch)Transform enemy\nULT: Become GigaBuffed Rein\n(EarthShatter Kills people on the ground)")
        eventPlayer.All_explanation_text.append("Ab1: IceBlock Smash\nULT: Become drone that spits fire")
    elif eventPlayer.getCurrentHero() == Hero.TRACER:
        eventPlayer.Selected_Hero.append(["Terry Jade", "Split-Stream"])
        eventPlayer.All_explanation_text.append("Ab1: Damage and stun marked enemies\r\nPunch: To mark enemy\r\nULT: EXPLODE all marked enemies")
        eventPlayer.All_explanation_text.append("Passive1: Emergency Recall&Heal\nKills give ULT+Heal allies\nULT: Enemies (in range) looking away are paralysed")
    elif eventPlayer.getCurrentHero() == Hero.DVA:
        eventPlayer.Selected_Hero.append(["Kazuhiko Nagata"])
        eventPlayer.All_explanation_text.append("Ab1: Become Invisible\r\nMatrix: Dodge enemies attacks\r\nULT: One-shot Forward Dash\r\n(Has loading time)")
    elif eventPlayer.getCurrentHero() == Hero.DOOMFIST:
        eventPlayer.Selected_Hero.append(["Hassan of the Great Hand", "Quetzalcoatl", "Tamamo Cat", "Kinji Hakari"])
        eventPlayer.All_explanation_text.append("Ab1: Invisible\r\nAb2: Dash into enemy\r\nPassive: Backstab +Ult charge\r\nUltimate: RocketPunch to mark enemy\r\nULT again to kill him")
        eventPlayer.All_explanation_text.append("'Ab1': Knockdown enemies hit\nAb2: Lower gravity and speed buff\nUltimate: Instakill people")
        eventPlayer.All_explanation_text.append("'Ab1': Invincible 4s after hit\r\nAb2(Toggle)Take 0.1% damage, get pushed instead\r\nPassive: Punch very fast\r\n'ULT': Hyper Punch")
        eventPlayer.All_explanation_text.append("Ab2: -50%HP or 6s infinite healing\n(50-50 chance)\nULT: Kill a random person in the Match")
    elif eventPlayer.getCurrentHero() == Hero.BAPTISTE:
        eventPlayer.Selected_Hero.append(["Defender", "Don Bateman", "Copy-Cat"])
        eventPlayer.All_explanation_text.append("Ab2: Temporary armor\nUltimate: Select an ally\nYou and him share Damage & Heal\nIF you are LAST player ALIVE ULT gives\n+Speed&Dmg")
        eventPlayer.All_explanation_text.append("Ab1: Absorb Life\nAb2: Release Life to Heal \n&Damage around you\nULT: Steal life from everyone you can SEE")
        eventPlayer.All_explanation_text.append("Ab2: Cripple&Root Sphere\nULT: Copy Enemy Hero&Use his ULT")
    elif eventPlayer.getCurrentHero() == Hero.MOIRA:
        eventPlayer.Selected_Hero.append(["Medea", "Vlad Tepes", "Felix Faust", "Asclepius", "Salome", "Paracelsus von Hohenheim"])
        eventPlayer.All_explanation_text.append("Ab1: Orb Barrage\nAb2: Absorb then release damage as projectile\nCrouch+Jump:Dash Forward\nULT: 6xDamage")
        eventPlayer.All_explanation_text.append("Ab1: Super Speed boost\nAb2: Steal ULT charge when damaged\nULT: Create Vampire Orb")
        eventPlayer.All_explanation_text.append("Ab1: Damage people in LoS\n(Cancels when moved)\nAb2: Throw stun sphere\nULT: Shoot after to release ball\nFloor eats enemy hit")
        eventPlayer.All_explanation_text.append("Ab1: Charge Orb\nSpin=+Speed&Damage\nPr.Fire:Fire Orb\nSec.Fire: Orb follows enemy\nAb2: Suck enemy ULT\nULT:(PRESS)Revive&Damage ene")
        eventPlayer.All_explanation_text.append("Ab1: Swap location with a player\nAb2: Create protection area\nULT: Black Hole")
        eventPlayer.All_explanation_text.append("Ab1: Shoot laser\nAb2: Man Eating Ball\nDamage, Moving CANCELS it\nUltimate: Energy Tsunami")
    elif eventPlayer.getCurrentHero() == Hero.ZENYATTA:
        eventPlayer.Selected_Hero.append(["Andrei Cosmin", "Ereshkigal", "Tristan", "Ozymandias"])
        eventPlayer.All_explanation_text = ["Ab1: Gives temporary armor to Ally\nAb2: Hit enemy to confuse him\n(After ability Active)\nULT: Burns enemies", "Ab1: Stun and damage enemy\nAb2: Starts charging balls\nIt steals ult charge from enemy hit\nULT: Create shrinking prison", "Ab1: Heal yourself (uses ULT charge)\nAb2: Damage around you\nULT: If they move they die", "Ab1: (HOLD) Charge Sunbeam damage\nAb2: Create defensive orb on you\nULT: Kill everyone around you"]
    elif eventPlayer.getCurrentHero() == Hero.SYMMETRA:
        eventPlayer.Selected_Hero.append(["Gilles de Rais", "Donald Drump", "Gordon Freeman", "Sherlock Holmes"])
        eventPlayer.All_explanation_text.append("Ab2: Deploy 4 damage areas\nPress again after setup to explode them\nULT: Create giant trap on yourself")
        eventPlayer.All_explanation_text.append("Ab1: Create a Laser Turret-Camera\nPr.Fire to shoot lasers\nAb2: Stun Laser from Camera (if active)\nULT: Real Wall or Double Camer")
        eventPlayer.All_explanation_text.append("Ab1: No-clip mode\nAb2: Anti-Jump Area\nSec.Fire: Capture an enemy\nPr.Fire: Throw enemy away\nULT: Force Push.Cancels ULTs")
        eventPlayer.All_explanation_text.append("Ab2: Steal Life from enemy\nAnd blind enemy\nSec.Fire: Shoot heal orb\nULT: Cripple enemies around you")
    elif eventPlayer.getCurrentHero() == Hero.BRIGITTE:
        eventPlayer.Selected_Hero.append(["Medusa", "Mash Kyrielight", "Astolfo", "Saint Lucia", "Hannibal Barca"])
        eventPlayer.All_explanation_text.append("Ab1: Enemy +5s cooldown & rooted\nShield: Stop HOLDING to Freeze enemies that look at You\n(freezes you too)\nULT: (shoot) Fall on ")
        eventPlayer.All_explanation_text.append("Ab1: Dmg&Push around you\nAb2: Push around Healee\nULT: Pr.Fire becomes whippShot")
        eventPlayer.All_explanation_text.append("Ab1+Jump: Fly Forward\nSec.Fire: +Speed&Dmg\n(Uses MaxHP)\nULT: Next 2 Hits: 50%MaxHP DMG")
        eventPlayer.All_explanation_text.append("Ab1: Push enemy\nAb2: Unkillable Link to ally\nSec.Fire: (HOLD) Give armor to Allies in LoS\nULT: Become giant woman")
        eventPlayer.All_explanation_text.append("Ab1: Poison enemy&Heal yourself\nAb2: Chain enemy\nPassive: Kills=DMG&Speed Buff\nULT: Unkillable 4s & Temp +1 LEVEL")
    elif eventPlayer.getCurrentHero() == Hero.GENJI:
        eventPlayer.Selected_Hero.append(["Saber Alter", "Jack the Ripper", "Sasaki Kojiro", "Katsushika Hokusai", "Hassan of the 100", "Miyamoto Musashi", "Bedivere", "Lanling Wang", "Nero", "Senji Muramasa", "Siegfried", "Mordred", "Charlemagne"])
        eventPlayer.All_explanation_text.append("Ab1: Omnidirectional dash\nAb2: Shoot wind gust\nUltimate: Shoot Energy Pillars")
        eventPlayer.All_explanation_text.append("Ab1: Double dash\nAb2: Go backwards and invisible\nULT: Mark an enemy\nEach hit on target heals +1s invincible")
        eventPlayer.All_explanation_text.append("Ab1: AimAssist Dash\nAb2: Dodge while deflecting\nUltimate: 3 hits * 1/3 of enemies MaxHp\n(around you)")
        eventPlayer.All_explanation_text.append("Ab1: Teleport\nAb2: Teleport behind an enemy\n(Backstab =+ damage)\nUltimate: Create tower prison")
        eventPlayer.All_explanation_text.append("Ab1: Enemy hit starts bleeding\nAb2: Root bleeding victims\nULT: Genji assasins spawn on enemy")
        eventPlayer.All_explanation_text.append("Ab1: Add elemental effect on enemy hit\nAb2: Switch element type\n     Fire or Ice\nUltimate: Root and Burn enemies hit")
        eventPlayer.All_explanation_text.append("Ab1: Big enemy ult=Big dmg\nAb2: Immortal & reverse damage\nULT: Spam Dash that slice enemy HP in half")
        eventPlayer.All_explanation_text.append("Ab1: Steal enemy ULT for a few seconds\nAb2: Shoot a stun projectile \nULT: Force close enemies to look where you look\nAoE Healing")
        eventPlayer.All_explanation_text.append("Ab1: Burn enemy\nAb2: Take 0 damage from that enemy for 2s\nULT: Can't die + DMG Buff in Area created")
        eventPlayer.All_explanation_text.append("Ab1: Remove extra armor or life cancel ULTs\nAb2: Create burning area\nULT: Cancel ULTs, Double Fire Damage")
        eventPlayer.All_explanation_text.append("Ab1: Short speed buff \nAb2: Shoot laser beam\n     press to cancel\nULT: Shoot Energy Projectiles")
        eventPlayer.All_explanation_text.append("Ab1: Short poison for enemy\nAb2: Drop extra-armor\n+Speed&Dmg\n(Ab2) now stuns close enemies\nUltimate: Shoot DeathBalls")
        eventPlayer.All_explanation_text.append("Ab1: Lower HP, Bigger DMG\nAb2: Force an enemy to look at you\nand heal\nUltimate: Homming Shuriken Tornado")
    elif eventPlayer.getCurrentHero() == Hero.REINHARDT:
        eventPlayer.Selected_Hero.append(["Hercules", "Iskandar", "Frankenstein", "Genghis Korn", "Avicebron", "Mahoraga"])
        eventPlayer.All_explanation_text.append("Ab1: Buff speed and damage\n'Passive': Revive after death\nULT: Heal +1 Life (max 12)")
        eventPlayer.All_explanation_text.append("Ab1: Cancel animations around you\nAb2: Pull enemy to you\nUltimate: Death ChooChoo Train")
        eventPlayer.All_explanation_text.append("Ab1: Discharge ULT, damage around you\nAb2: Root enemy for 3s\nPassive:Give ULT to allies in area\nSec.Fire: Use ULT to Heal")
        eventPlayer.All_explanation_text.append("Ab1: ChangeSize\nBig: big life,big damage\nSmall: big speed, low damage\nULT: Enemies in range become small")
        eventPlayer.All_explanation_text.append("Ultimate: Spawn a Rein minion\nAb1: Select farthest rein and move him\nAb2: Teleport Selected rein to you")
        eventPlayer.All_explanation_text.append("Ab1: Adapt to +15% of enemy DMG\nAb2: +5s cooldowns\nHammer: 2s anti-healing\nULT: +100% Adapt to enemy")
    elif eventPlayer.getCurrentHero() == Hero.ORISA:
        eventPlayer.Selected_Hero.append(["Charles de Gaulle", "Marcus Aurelius"])
        eventPlayer.All_explanation_text.append("Sec.Fire: Create a LandMine\nAb2: Enemies can't get inside\nUltimate: Create a Sphere on you\n(Pushes back enemies)")
        eventPlayer.All_explanation_text.append("Passive: Can't die, Only Frozen\nAb1: Transfer your Life to allies in area\nULT:Chain EVERYONE around you to You")
    elif eventPlayer.getCurrentHero() == Hero.HANZO:
        eventPlayer.Selected_Hero.append(["Emyia", "Gilgamesh", "Chiron", "Atalanta", "Chen Gong", "Tawara Tōta", "Nikola Tesla"])
        eventPlayer.All_explanation_text.append("Ab1: Toggle shield ON|OFF\nAb2: First arrow AoE stun\nULT: Pr.Fire to shoot lasers")
        eventPlayer.All_explanation_text.append("Ab1: Root enemies around you\nAb2(HOLD): Laser barrage\nUses ULT\nUltimate: Deletes people in area")
        eventPlayer.All_explanation_text.append("Ab1: Arrow Follows enemy in LoS\nDamage enemy to mark him\nUltimate: Bouncing Homming Arrow")
        eventPlayer.All_explanation_text.append("Ab1: Track enemy through walls\nAb2: Slow tracked enemy\nPassive:Arrows slow enemies\nULT: Meteor Shower")
        eventPlayer.All_explanation_text.append("Ab1: Push away close enemies\nAb2: Create a damage tower\nULT: Bouncing DeathBall")
        eventPlayer.All_explanation_text.append("Ab1: Short punching barrage\nAb2: Each hit gives armor & pushes enemies\nUltimate: One shot dragon")
        eventPlayer.All_explanation_text.append("Ab1: Defense lightning orb\nAb2: Shoot lightning arcs\nUltimate: Respawn all players in an area\n(click on a location)")
    elif eventPlayer.getCurrentHero() == Hero.LUCIO:
        eventPlayer.Selected_Hero.append(["Amadeus Mozart"])
        eventPlayer.All_explanation_text.append("Ab1: Close Allies big Speed Buff\nAb2: Close Allies heal burst\nULT: Spawn Damage Area on mouse\n(slows enemies inside it)")
    elif eventPlayer.getCurrentHero() == Hero.CASSIDY:
        eventPlayer.Selected_Hero.append(["Billy the Kid", "Abigail Williams"])
        eventPlayer.All_explanation_text.append("Ab1: Freeze very close enemies\nAb2: Double damage against armor\nULT: First bullet hit kills the enemy")
        eventPlayer.All_explanation_text.append("Ab1: Speed buff and stun remove\nAb2: Create stun trap\nULT: Players close to you get damaged")
    elif eventPlayer.getCurrentHero() == Hero.REAPER:
        eventPlayer.Selected_Hero.append(["Solomon", "Charles-Henri Sanson"])
        eventPlayer.All_explanation_text.append("Ab1: Steal or give Ally ULT\nAb2: Create healing and ULT generators\nULT: Poison enemy")
        eventPlayer.All_explanation_text.append("Ab1: Transfer HP to ally\nAb2: Clone freezes attacker when killed\nULT: Switch HP with enemy")
    elif eventPlayer.getCurrentHero() == Hero.ASHE:
        eventPlayer.Selected_Hero.append(["Nobunaga", "Xuanzang Sanzang", "Caster Gilgamesh", "William Tell"])
        eventPlayer.All_explanation_text.append("Ab1: Fly to where you look\nAb2: Shoot rockets\nULT: Cancel ULTs and burn enemies inside")
        eventPlayer.All_explanation_text.append("Ab1: Pull enemies to you\nAb2: Punch enemies away\n'Crouch+Jump':Dash Forward\nULT: Heals|Clear debuff|Cancel enemy ULTs|Fast punch")
        eventPlayer.All_explanation_text.append("Ab1: Spawn lightning storm\nAb2: Spawn 3 homming projectiles\nULT: Friendly-fire airstrike")
        eventPlayer.All_explanation_text.append("Ab1: GrappleHook to close walls\nAb2: Place a trap\nULT: Start charging Railgun\n(Shoot to fire it,Body-shots deals more DMG")
    elif eventPlayer.getCurrentHero() == Hero.SOLDIER:
        eventPlayer.Selected_Hero.append(["Cu Chulainn", "Achilles", "Diarmuid Ua Duibhne", "Leonidas", "Karna", "Shakespeare"])
        eventPlayer.All_explanation_text.append("Ab1: Fly\nAb2: Heal&remove stuns\nSec.Fire: 1/5 of enemy life as damage\nULT: First Rocket hit kills the enemy")
        eventPlayer.All_explanation_text.append("Ab1: Forward-only dash + Unkillable\nAb2: Shoot stun rockets\nULT:(Sec.Fire):Forward Dash Attack")
        eventPlayer.All_explanation_text.append("'Ab1': Switch rocket mode\n(PoisonStack or Invincible cancel)\nAb2: Very close enemy push away \n{0}".format("(remove his invincible)\n'ULT': Disable healing + Double damage\nfor enemies around you"))
        eventPlayer.All_explanation_text.append("Ab1: Dash\nAb2: Toggle Shield\nSec.Fire: LowHP=FasterPunch\nULT: Unkillable 8s&SpeedBUFF")
        eventPlayer.All_explanation_text.append("Ab1: Fly upwards \nAb2: Laser beam\nSec.Fire: Slow enemy\nULT: Throw a Red Bomb")
        eventPlayer.All_explanation_text.append("Ab1: Trap starts shooting enemy\nAb2: Create soldier trap\nULT: You and the enemy get poison\nLast alive gets fully healed")
    elif eventPlayer.getCurrentHero() == Hero.ANA:
        eventPlayer.Selected_Hero.append(["Simo Häyhä", "Robin Hood", "Semiramis"])
        eventPlayer.All_explanation_text.append("Ab1: Stun enemy + speed buff\nAb2: Invisible while in snow area\n(Area steals ULT charge)\nULT: First bullet shot is a One Shot")
        eventPlayer.All_explanation_text.append("Ab1: Burn enemy +5s Cooldown to abilities\nAb2: Napalm grenade (Hacks enemies)\nULT: Create a time-bomb")
        eventPlayer.All_explanation_text.append("Ab1: Go through walls\nAb2:+Damage resistence\nSec.Fire: Removes enemy armor & anti-heal\nUltimate: Shoot laser beam")
    elif eventPlayer.getCurrentHero() == Hero.SIGMA:
        eventPlayer.Selected_Hero.append(["Albert Einstein", "The Old Man of the Mountain"])
        eventPlayer.All_explanation_text.append("Ab1: Slow down time\n+Damage while active\nAb2: Enemy gets pushed down\nULT: Push enemies around where you want")
        eventPlayer.All_explanation_text.append("Ab1: Move fast&Punch people to stun them\nAb2: Victim bleeding\nULT: Enemies hit become 1HP for a few seconds")
    elif eventPlayer.getCurrentHero() == Hero.SOMBRA:
        eventPlayer.Selected_Hero.append(["Houdini", "Junji Ito"])
        eventPlayer.All_explanation_text.append("Ab1: Sombra clone\nRevives you\n'F' to destroy it\nAb2: Remove all stuns\nULT: Explode clone& confuse enemies")
        eventPlayer.All_explanation_text.append("Passive: Extra damage if the enemy has a lot of kills +SMG Dmg * [(His Kills - Your kills) / 2]\nULT: Become parasite and reverse")
    elif eventPlayer.getCurrentHero() == Hero.WIDOWMAKER:
        eventPlayer.Selected_Hero.append(["L.M.Pavlichenko", "Bayonetta"])
        eventPlayer.All_explanation_text.append("Ab1: Stick to a surface\nAb2: Stuns enemy\nULT: +DMG\nHeadshot stuns enemies\nVenomMine instakills")
        eventPlayer.All_explanation_text.append("(Press Pr.Fire) Shoot Projectiles\nAb2: Place teleport location\nULT: Shoot a projectile barrage")
    elif eventPlayer.getCurrentHero() == Hero.BASTION:
        eventPlayer.Selected_Hero.append(["Alfried Krupp von Bohlen", "Lancelot", "Bounty Hunter"])
        eventPlayer.All_explanation_text.append("Ab2: Don't die for a few seconds\nULT: Start charging Railgun\nShoot to release it")
        eventPlayer.All_explanation_text.append("Ab1: Slow attackers\nAb2: Reverse enemy damage\nULT:  Bastions spam grenades")
        eventPlayer.All_explanation_text.append("Ab2: Select enemy as Bounty\nBounty can't be Unkillable\nULT: ArmorBuff&Reverse damage")
    elif eventPlayer.getCurrentHero() == Hero.RAMATTRA:
        eventPlayer.Selected_Hero.append(["Gahandhi", "Marie Currie", "Hyakunosuke Ogata"])
        eventPlayer.All_explanation_text.append("Ab1: Hit enemies for 2s of immortality\nULT: Damage heals you")
        eventPlayer.All_explanation_text.append("Curse:Healing, Slow&dmg enemy\nAb1(punch)/Ab2: Curse enemy in LoS\nULT: Double Damage & Infinite Heal while Totem alive")
        eventPlayer.All_explanation_text.append("Ab2: Carpet Bombing Forward\nULT: Damage and Stun Beam Through Walls\n(If LoS to enemy BLOCKED)")
    elif eventPlayer.getCurrentHero() == Hero.ZARYA:
        eventPlayer.Selected_Hero.append(["Ivan the Terrible", "Choso"])
        eventPlayer.All_explanation_text.append("PASSIVE: LifeSteal&ULTSteal\nULT:  Create Clone|If one survives 10s\nGigaBuffed for 6.5s")
        eventPlayer.All_explanation_text.append("Ab1: (HOLD)Aimbot Laser\nAb2:AoE Heal(uses HP)\nPASSIVE: LifeSteal Punch\nULT:+45%MAXhp & FREE abilities")
    elif eventPlayer.getCurrentHero() == Hero.WINSTON:
        eventPlayer.Selected_Hero.append(["Jack and Hyde"])
        eventPlayer.All_explanation_text.append("'Passive': Enemies around him get slowed\n'RightClick': More damage = more healing\n'Ultimate':  Steal enemy ULT charge ")
    elif eventPlayer.getCurrentHero() == Hero.TORBJORN:
        eventPlayer.Selected_Hero.append(["Winston ChurchHill", "Higurama"])
        eventPlayer.All_explanation_text.append("Ab2: Can't die while active\nULT:  Turret has 8x DMG & Resistence")
        eventPlayer.All_explanation_text.append("PASSIVE: Dies by punching only\nULT:  Rock, Paper, Scissors")
    elif eventPlayer.getCurrentHero() == Hero.SOJOURN:
        eventPlayer.Selected_Hero.append(["Henry Henson", "HeadHunter"])
        eventPlayer.All_explanation_text.append("Ab1: Unkillable +healing\nAb2: Chain enemy to the ground\nULT: Share Freedom with Enemies")
        eventPlayer.All_explanation_text.append("Ab1: Unkillable +healing\nAb2: 2.5s->Linked enemy stun\nULT: Deadly Gas Area")
    elif eventPlayer.getCurrentHero() == Hero.KIRIKO:
        eventPlayer.Selected_Hero.append(["Paganini", "Kento Nanami"])
        eventPlayer.All_explanation_text.append("Ab1: Almost infinite range\nAb2: +Heal&ULT to Healee\nULT:First Kunai Headshot Kills\nPASSIVE: Hitscan Kunai")
        eventPlayer.All_explanation_text.append("Passive: If enemy between the rings, he takes 3*Damage\nPassive2: You get 35DMG*TeamScore difference\nAb2: Cleanse curses")
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 10)
    elif eventPlayer.getCurrentHero() == Hero.JUNKRAT:
        eventPlayer.Selected_Hero.append(["Osmey Han"])
        eventPlayer.All_explanation_text.append("Ab1: Give fall damage to enemy\nAb2: Trap damage makes enemy 50%HP\nULT: Inverted Floor Is Lava")
    elif eventPlayer.getCurrentHero() == Hero.JUNKER_QUEEN:
        eventPlayer.Selected_Hero.append(["John Lenon"])
        eventPlayer.All_explanation_text.append("Ab2: Faster while using\nPASSIVE: More bleeding lifesteal\nPASSIVE#2: Knife Grab is very strong")
    elif eventPlayer.getCurrentHero() == Hero.HAMMOND:
        eventPlayer.Selected_Hero.append(["Barthlomoeu Man"])
        eventPlayer.All_explanation_text.append("Ab2: The closer the enemy, the less DMG you take\nULT: Bouncing MineField")
    elif eventPlayer.getCurrentHero() == Hero.LIFEWEAVER:
        eventPlayer.Selected_Hero.append(["Merlin", "Queen Elizabeth II"])
        eventPlayer.All_explanation_text.append("Ab1:Invisible & Faster\nAb2: Lock/Revert All players HP\nULT: Clear debuffs & buff allies")
        eventPlayer.All_explanation_text.append("Pr.Fire: Healthpacks damage enemy hit\nAb2: Invert FoV&LoS enemy controls\nULT: Invert All Enemies HP & Movement")
    elif eventPlayer.getCurrentHero() == Hero.ILLARI:
        eventPlayer.Selected_Hero.append(["Cuauhtémoc", "Leonardo da Vinci"])
        eventPlayer.All_explanation_text.append("Ab1: Duel an enemy\nOnly you two can damage each other\nULT:Create an explosion")
        eventPlayer.All_explanation_text.append("Pr.Fire: AirBurst bullets\nSec.Fire: Give Unkillable to Healee\nPassive: Many enemies around you=Big resistence")
    elif eventPlayer.getCurrentHero() == Hero.MAUGA:
        eventPlayer.Selected_Hero.append(["Maui", "LeBron James"])
        eventPlayer.All_explanation_text.append("Ab1: Root, Cancel Ults, +2s Cooldowns\nAb2: 100% lifesteal\nULT: Unkillable ")
        eventPlayer.All_explanation_text.append("PASSIVE:Only Small DMG hurts you\nULT: Steal Body of Enemy")
    elif eventPlayer.getCurrentHero() == Hero.VENTURE:
        eventPlayer.Selected_Hero.append(["HP Lovecraft"])
        eventPlayer.All_explanation_text.append("Ab1: Move through walls\nKills enemies if =< 1/3 of HP\nULT: Stuns enemies")


rule "Become All Heroes 1":
    @Event eachPlayer
    @Condition eventPlayer.selecting_HUD == 2
    @Condition eventPlayer.getCurrentHero() in [Hero.HANZO, Hero.ORISA, Hero.REINHARDT, Hero.ROADHOG, Hero.SIGMA, Hero.ASHE, Hero.CASSIDY, Hero.DOOMFIST, Hero.ECHO, Hero.GENJI] == true
    
    waitUntil(evalOnce(eventPlayer.getCurrentHero()) != eventPlayer.getCurrentHero() or not eventPlayer.isInSpawnRoom(), 99999)
    if eventPlayer.isInSpawnRoom():
        goto lbl_0
    if eventPlayer.getCurrentHero() == Hero.HANZO:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.playerSpeed[false] += 30
            eventPlayer.setMaxHealth(180)
            eventPlayer.setDamageDealt(105)
            eventPlayer.setProjectileSpeed(1000)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ULTIMATE)
            P = eventPlayer
            P.T = false
            P.X = true
            eventPlayer.T = false
            #players inside UBW
            eventPlayer.M = []
            eventPlayer.X = true
            L.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.playerSpeed[false] += 20
            eventPlayer.setMaxHealth(170)
            eventPlayer.setUltCharge(30)
            eventPlayer.setDamageDealt(130)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.ULTIMATE)
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.playerSpeed[false] += 20
            eventPlayer.setMaxHealth(180)
            eventPlayer.setDamageDealt(115)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.setProjectileSpeed(175)
            eventPlayer.O = []
            S.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 3:
            eventPlayer.playerSpeed[false] += 45
            eventPlayer.setMaxHealth(185)
            eventPlayer.setDamageDealt(110)
            eventPlayer.setJumpVerticalSpeed(145)
            eventPlayer.setGravity(95)
            eventPlayer.setProjectileSpeed(175)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.ABILITY_1)
            S.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 4:
            eventPlayer.playerSpeed[false] += 45
            eventPlayer.setMaxHealth(165)
            eventPlayer.setDamageDealt(110)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.Is_Using_Ultimate = false
            eventPlayer.setProjectileSpeed(150)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.setProjectileSpeed(400)
            H.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 5:
            eventPlayer.playerSpeed[false] += 45
            eventPlayer.setMaxHealth(180)
            eventPlayer.setDamageDealt(110)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.setProjectileSpeed(150)
            S.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 6:
            eventPlayer.playerSpeed[false] += 45
            eventPlayer.setMaxHealth(180)
            eventPlayer.setDamageDealt(125)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.U = false
            eventPlayer.setProjectileSpeed(150)
            eventPlayer.H = false
            eventPlayer.Z = 6
            eventPlayer.X = vect(222, -999, 44)
            S.append(eventPlayer)
    elif eventPlayer.getCurrentHero() == Hero.ORISA:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.playerSpeed[false] += 25
            eventPlayer.setMaxHealth(215)
            eventPlayer.setDamageDealt(130)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.N = vect(123, -222, false)
            eventPlayer.C = false
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.playerSpeed[false] += 5
            eventPlayer.setMaxHealth(365)
            eventPlayer.setDamageDealt(120)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.setProjectileSpeed(1000)
            createEffect(getPlayers(eventPlayer.getTeam()), Effect.RING, Color.LIME_GREEN, eventPlayer, 16, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[1] = getLastCreatedEntity()
    elif eventPlayer.getCurrentHero() == Hero.REINHARDT:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.playerSpeed[false] += 11
            eventPlayer.setMaxHealth(147)
            eventPlayer.setDamageDealt(165)
            eventPlayer.garden_value = 160
            eventPlayer.setProjectileSpeed(160)
            eventPlayer.Berserker_lives = 1
            Close_enemies_ULT_buff_array.append(eventPlayer)
            L.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.playerSpeed[false] += 50
            eventPlayer.setMaxHealth(118)
            eventPlayer.setDamageDealt(110)
            eventPlayer.setProjectileSpeed(6500)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.D = false
            eventPlayer.Q = false
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.playerSpeed[false] += 11
            eventPlayer.setMaxHealth(263)
            eventPlayer.setDamageDealt(145)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.ABILITY_1)
            async(frankenstein_good_loop, AsyncBehavior.RESTART)
            createEffect(getPlayers(eventPlayer.getTeam()), Effect.RING, Color.YELLOW, eventPlayer, 11, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[2] = getLastCreatedEntity()
            eventPlayer.setProjectileSpeed(200)
        elif eventPlayer.selected_hero_list_number == 3:
            eventPlayer.playerSpeed[false] += 50
            eventPlayer.setMaxHealth(170)
            eventPlayer.setDamageDealt(125)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.setProjectileSpeed(60)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.U = false
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.X = 1
            eventPlayer.A = 1
            Close_enemies_ULT_buff_array.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 4:
            eventPlayer.playerSpeed[false] += 25
            eventPlayer.setMaxHealth(158)
            eventPlayer.setDamageDealt(90)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.setProjectileSpeed(300)
            eventPlayer.setUltCharge(100)
            eventPlayer.startScalingSize(0.75, true)
            H.append(eventPlayer)
            L.append(eventPlayer)
            Close_enemies_ULT_buff_array.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 5:
            eventPlayer.playerSpeed[false] += 10
            eventPlayer.setMaxHealth(170)
            eventPlayer.setDamageDealt(135)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.setProjectileSpeed(200)
            H.append(eventPlayer)
            L.append(eventPlayer)
            Close_enemies_ULT_buff_array.append(eventPlayer)
            eventPlayer.A = 0
            eventPlayer.FoV_and_lineOFsight_player = null
    elif eventPlayer.getCurrentHero() == Hero.ROADHOG:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.playerSpeed[false] += 11
            eventPlayer.setMaxHealth(146)
            eventPlayer.setDamageDealt(185)
            eventPlayer.D = false
            eventPlayer.disallowButton(Button.ABILITY_2)
            H.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.playerSpeed[false] += 30
            eventPlayer.setMaxHealth(145)
            eventPlayer.setDamageDealt(130)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.D = 1
            Close_enemies_ULT_buff_array.append(eventPlayer)
    elif eventPlayer.getCurrentHero() == Hero.SIGMA:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.playerSpeed[false] += 20
            eventPlayer.setMaxHealth(120)
            eventPlayer.setDamageDealt(135)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.setProjectileSpeed(1100)
            L.append(eventPlayer)
            Close_enemies_ULT_buff_array.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.playerSpeed[false] += 55
            eventPlayer.setMaxHealth(150)
            eventPlayer.setDamageDealt(145)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.setProjectileSpeed(300)
            eventPlayer.R = 100
            Close_enemies_ULT_buff_array.append(eventPlayer)
    elif eventPlayer.getCurrentHero() == Hero.ASHE:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.playerSpeed[false] += 30
            eventPlayer.setMaxHealth(185)
            eventPlayer.setDamageDealt(155)
            L.append(eventPlayer)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.ABILITY_2)
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.playerSpeed[false] += 10
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.setDamageDealt(240)
            eventPlayer.setMaxHealth(160)
            Close_enemies_ULT_buff_array.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.playerSpeed[false] += 10
            eventPlayer.setMaxHealth(175)
            eventPlayer.setDamageDealt(135)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ABILITY_2)
        elif eventPlayer.selected_hero_list_number == 3:
            eventPlayer.playerSpeed[false] += 20
            eventPlayer.setMaxHealth(160)
            eventPlayer.setDamageDealt(155)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ABILITY_2)
    elif eventPlayer.getCurrentHero() == Hero.CASSIDY:
        eventPlayer.setMaxHealth(125)
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.playerSpeed[false] += 45
            eventPlayer.setDamageDealt(50)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.addHealthPool(Health.ARMOR, 125, true, true)
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.setDamageDealt(120)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.playerSpeed[false] += 10
            eventPlayer.U = false
            L.append(eventPlayer)
    elif eventPlayer.getCurrentHero() == Hero.DOOMFIST:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.playerSpeed[false] += 55
            eventPlayer.setMaxHealth(250)
            eventPlayer.setDamageDealt(100)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.L = false
            eventPlayer.Hassan_deathmark = []
            Close_enemies_ULT_buff_array.append(eventPlayer)
            H.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.playerSpeed[false] += 35
            eventPlayer.setDamageDealt(115)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.setMaxHealth(230)
            S.append(eventPlayer)
            Close_enemies_ULT_buff_array.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.setMaxHealth(231)
            eventPlayer.setDamageDealt(105)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.X = 1
            eventPlayer.U = false
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.playerSpeed[false] += 55
            S.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 3:
            eventPlayer.setMaxHealth(233)
            eventPlayer.setDamageDealt(110)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.playerSpeed[false] += 45
            H.append(eventPlayer)
    elif eventPlayer.getCurrentHero() == Hero.ECHO:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.setMaxHealth(150)
            eventPlayer.playerSpeed[false] += 50
            eventPlayer.setDamageDealt(90)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.setProjectileSpeed(250)
            eventPlayer.C = 1
            #flight left
            eventPlayer.I = 1
            #chains off
            eventPlayer.F = false
            #chains on
            eventPlayer.X = false
            L.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.playerSpeed[false] += 50
            eventPlayer.setDamageDealt(90)
            eventPlayer.disallowButton(Button.ULTIMATE)
            L.append(eventPlayer)
            H.append(eventPlayer)
    elif eventPlayer.getCurrentHero() == Hero.GENJI:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.playerSpeed[false] += 30
            eventPlayer.setMaxHealth(180)
            eventPlayer.setDamageDealt(165)
            eventPlayer.D = false
            eventPlayer.disallowButton(Button.ABILITY_1)
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.playerSpeed[false] += 20
            eventPlayer.setMaxHealth(165)
            eventPlayer.setDamageDealt(150)
            eventPlayer.disallowButton(Button.ULTIMATE)
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.playerSpeed[false] += 15
            eventPlayer.setMaxHealth(300)
            eventPlayer.setDamageDealt(165)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.setJumpVerticalSpeed(1)
            eventPlayer.disallowButton(Button.JUMP)
            eventPlayer.disallowButton(Button.ABILITY_1)
        elif eventPlayer.selected_hero_list_number == 3:
            eventPlayer.playerSpeed[false] += 30
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.setDamageDealt(155)
            eventPlayer.setMaxHealth(150)
            eventPlayer.setAbilityCooldown(Button.ABILITY_2, 10)
        elif eventPlayer.selected_hero_list_number == 4:
            eventPlayer.playerSpeed[false] += 55
            eventPlayer.setMaxHealth(190)
            eventPlayer.setDamageDealt(110)
            eventPlayer.disallowButton(Button.ULTIMATE)
        elif eventPlayer.selected_hero_list_number == 5:
            eventPlayer.playerSpeed[false] += 45
            eventPlayer.setMaxHealth(170)
            eventPlayer.setDamageDealt(110)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.setJumpVerticalSpeed(100)
            eventPlayer.G = 1
        elif eventPlayer.selected_hero_list_number == 6:
            eventPlayer.playerSpeed[false] += 50
            eventPlayer.setMaxHealth(180)
            eventPlayer.setDamageDealt(110)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            eventPlayer.setJumpVerticalSpeed(100)
        elif eventPlayer.selected_hero_list_number == 7:
            eventPlayer.playerSpeed[false] += 30
            eventPlayer.setMaxHealth(150)
            eventPlayer.setDamageDealt(110)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            Close_enemies_ULT_buff_array.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 8:
            hudHeader(eventPlayer, "{0} {1} {2}".format("Selected Enemy:", heroIcon(eventPlayer.FoV_and_lineOFsight_player.getCurrentHero()), eventPlayer.FoV_and_lineOFsight_player), HudPosition.TOP, false, Color.WHITE, HudReeval.VISIBILITY_AND_STRING, SpecVisibility.DEFAULT)
            eventPlayer.HUD_tutorial_screen[7] = getLastCreatedText()
            eventPlayer.playerSpeed[false] += 20
            eventPlayer.setMaxHealth(160)
            eventPlayer.setDamageDealt(105)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ULTIMATE)
        elif eventPlayer.selected_hero_list_number == 9:
            eventPlayer.playerSpeed[false] += 35
            eventPlayer.setMaxHealth(230)
            eventPlayer.setDamageDealt(110)
            eventPlayer.setProjectileSpeed(250)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            eventPlayer.X = 1
            eventPlayer.A = 1
            eventPlayer.setJumpVerticalSpeed(100)
            L.append(eventPlayer)
            Close_enemies_ULT_buff_array.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 10:
            eventPlayer.playerSpeed[false] += 30
            eventPlayer.setMaxHealth(160)
            eventPlayer.setDamageDealt(100)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.setProjectileSpeed(250)
            S.append(eventPlayer)
            Close_enemies_ULT_buff_array.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 11:
            eventPlayer.playerSpeed[false] += 15
            eventPlayer.setMaxHealth(138)
            eventPlayer.setDamageDealt(115)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            eventPlayer.addHealthPool(Health.ARMOR, 365, true, true)
            eventPlayer.mordred_extra_armor = getLastCreatedHealthPool()
            eventPlayer.K = false
            eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 9999)
        elif eventPlayer.selected_hero_list_number == 12:
            eventPlayer.playerSpeed[false] += 30
            eventPlayer.setMaxHealth(170)
            eventPlayer.setDamageDealt(100)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.setProjectileSpeed(250)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            Close_enemies_ULT_buff_array.append(eventPlayer)
    eventPlayer.HUD_tutorial_screen[6] = getLastCreatedText()
    lbl_0:
    if not eventPlayer.isInSpawnRoom():
        goto lbl_1
    waitUntil(eventPlayer.isInSpawnRoom(), 99999)
    lbl_1:


rule "Become All Heroes 2":
    @Event eachPlayer
    @Condition eventPlayer.selecting_HUD == 2
    @Condition eventPlayer.getCurrentHero() in [Hero.MEI, Hero.PHARAH, Hero.SOLDIER, Hero.SOMBRA, Hero.SYMMETRA, Hero.WIDOWMAKER, Hero.ANA, Hero.BAPTISTE, Hero.BRIGITTE, Hero.LUCIO, Hero.MERCY, Hero.MOIRA] == true
    
    waitUntil(evalOnce(eventPlayer.getCurrentHero()) != eventPlayer.getCurrentHero() or not eventPlayer.isInSpawnRoom(), 99999)
    if eventPlayer.isInSpawnRoom():
        goto lbl_0
    if eventPlayer.getCurrentHero() == Hero.MEI:
        eventPlayer.disallowButton(Button.ULTIMATE)
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.setAbilityCooldown(Button.ABILITY_2, 10)
            eventPlayer.setMoveSpeed(120)
            eventPlayer.setMaxHealth(175)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.setDamageDealt(220)
            eventPlayer.setProjectileSpeed(200)
            eventPlayer.disallowButton(Button.ABILITY_2)
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.setDamageDealt(220)
            eventPlayer.setMaxHealth(240)
            eventPlayer.disallowButton(Button.ABILITY_2)
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.setProjectileSpeed(500)
            eventPlayer.setDamageDealt(275)
            eventPlayer.setMaxHealth(125)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
    elif eventPlayer.getCurrentHero() == Hero.PHARAH:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.playerSpeed[false] += 35
            eventPlayer.setMaxHealth(185)
            eventPlayer.setDamageDealt(90)
            eventPlayer.setProjectileSpeed(500)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.JUMP)
        elif eventPlayer.selected_hero_list_number == 1:
            hudHeader(eventPlayer, "{0} {1}".format(eventPlayer.X, "/3 dashes"), HudPosition.TOP, false, Color.WHITE, HudReeval.VISIBILITY_AND_STRING, SpecVisibility.DEFAULT)
            eventPlayer.HUD_tutorial_screen[7] = getLastCreatedText()
            stopChasingVariable(eventPlayer.X)
            eventPlayer.X = 3
            eventPlayer.playerSpeed[false] += 30
            eventPlayer.setMaxHealth(160)
            eventPlayer.setDamageDealt(135)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.setProjectileSpeed(95)
            eventPlayer.addHealthPool(Health.ARMOR, 75, true, true)
            eventPlayer.Effects[2] = getLastCreatedHealthPool()
            eventPlayer.D = 3
            eventPlayer.disallowButton(Button.ABILITY_2)
            #circle area
            eventPlayer.C = 1
            #initial position
            eventPlayer.W = vect(-444, -9999, 1568)
            eventPlayer.U = false
            eventPlayer.Z = false
            eventPlayer.disallowButton(Button.ABILITY_1)
            Close_enemies_ULT_buff_array.append(eventPlayer)
    elif eventPlayer.getCurrentHero() == Hero.SOLDIER:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.playerSpeed[false] += 30
            eventPlayer.setMaxHealth(190)
            eventPlayer.setDamageDealt(136)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.setProjectileSpeed(1000)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.setJumpVerticalSpeed(130)
            eventPlayer.setGravity(150)
            L.append(eventPlayer)
            S.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.playerSpeed[false] += 35
            eventPlayer.setMaxHealth(175)
            eventPlayer.setDamageDealt(125)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.setProjectileSpeed(500)
            H.append(eventPlayer)
            eventPlayer.D = false
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.playerSpeed[false] += 30
            eventPlayer.setMaxHealth(195)
            eventPlayer.setDamageDealt(125)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.D = 1
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.Q = []
            eventPlayer.setInvisibility(Invis.NONE)
            eventPlayer.setProjectileSpeed(1000)
        elif eventPlayer.selected_hero_list_number == 3:
            eventPlayer.playerSpeed[false] += 30
            eventPlayer.setMaxHealth(160)
            eventPlayer.setDamageDealt(120)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ULTIMATE)
            S.append(eventPlayer)
            waitUntil(not eventPlayer.isInSpawnRoom(), 0.1)
            eventPlayer.D = false
            eventPlayer.J = null
            eventPlayer.leonidas_shield = 2
            eventPlayer.M = 0.6
            eventPlayer.Y = false
        elif eventPlayer.selected_hero_list_number == 4:
            eventPlayer.playerSpeed[false] += 30
            eventPlayer.setMaxHealth(170)
            eventPlayer.setDamageDealt(135)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.setProjectileSpeed(250)
            S.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 5:
            eventPlayer.playerSpeed[false] += 35
            eventPlayer.setMaxHealth(200)
            eventPlayer.setDamageDealt(120)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.ABILITY_1)
            L.append(eventPlayer)
            S.append(eventPlayer)
    elif eventPlayer.getCurrentHero() == Hero.SOMBRA:
        eventPlayer.disallowButton(Button.ULTIMATE)
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.setDamageDealt(125)
            eventPlayer.disallowButton(Button.ABILITY_2)
            H.append(eventPlayer)
        else:
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
    elif eventPlayer.getCurrentHero() == Hero.SYMMETRA:
        eventPlayer.disallowButton(Button.ABILITY_2)
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.playerSpeed[false] += 35
            eventPlayer.setMaxHealth(170)
            eventPlayer.setDamageDealt(110)
            eventPlayer.setProjectileSpeed(500)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.setGravity(75)
            S.append(eventPlayer)
            eventPlayer.C = false
            eventPlayer.gilles_de_rais_damage = 1
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.playerSpeed[false] += 35
            eventPlayer.setMaxHealth(150)
            eventPlayer.setDamageDealt(130)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.U = false
            eventPlayer.H = 1
            eventPlayer.trump_wait_time = 0.25
            eventPlayer.trump_wait_middle = 0.1
            Close_enemies_ULT_buff_array.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.playerSpeed[false] += 45
            eventPlayer.setMaxHealth(170)
            eventPlayer.setDamageDealt(130)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ULTIMATE)
        elif eventPlayer.selected_hero_list_number == 3:
            eventPlayer.playerSpeed[false] += 30
            eventPlayer.setMaxHealth(170)
            eventPlayer.setDamageDealt(115)
            eventPlayer.disallowButton(Button.ULTIMATE)
    elif eventPlayer.getCurrentHero() == Hero.WIDOWMAKER:
        eventPlayer.playerSpeed[false] += 25
        eventPlayer.setMaxHealth(180)
        S.append(eventPlayer)
        if not eventPlayer.selected_hero_list_number:
            eventPlayer.allowButton(Button.PRIMARY_FIRE)
            eventPlayer.setDamageDealt(135)
            eventPlayer.E = false
        else:
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.A = 0.45
    elif eventPlayer.getCurrentHero() == Hero.ANA:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.setProjectileSpeed(350)
            eventPlayer.setMaxHealth(180)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.setDamageDealt(125)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.R = false
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.playerSpeed[false] += 45
            eventPlayer.setMaxHealth(205)
            eventPlayer.setProjectileSpeed(600)
            eventPlayer.setDamageDealt(115)
            eventPlayer.disallowButton(Button.ULTIMATE)
            S.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.playerSpeed[false] += 55
            eventPlayer.setMaxHealth(150)
            eventPlayer.setDamageDealt(115)
            eventPlayer.setJumpVerticalSpeed(150)
            eventPlayer.setGravity(50)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.setProjectileSpeed(600)
            eventPlayer.C = false
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.U = false
            eventPlayer.J = false
            S.append(eventPlayer)
    elif eventPlayer.getCurrentHero() == Hero.BAPTISTE:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.playerSpeed[false] += 35
            eventPlayer.setMaxHealth(235)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.setDamageDealt(255)
            if getNumberOfPlayers(eventPlayer.getTeam()) <= 1:
                goto lbl_1
            eventPlayer.setUltCharge(100)
            lbl_1:
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            H.append(eventPlayer)
            Close_enemies_ULT_buff_array.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 1:
            hudHeader(eventPlayer, "{0} {1}".format("Absorbed:", eventPlayer.H), HudPosition.LEFT, false, Color.WHITE, HudReeval.VISIBILITY_AND_STRING, SpecVisibility.DEFAULT)
            eventPlayer.HUD_tutorial_screen[7] = getLastCreatedText()
            eventPlayer.playerSpeed[false] += 50
            eventPlayer.setMaxHealth(180)
            eventPlayer.setDamageDealt(110)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.setProjectileSpeed(250)
            eventPlayer.H = null
            eventPlayer.U = false
            Close_enemies_ULT_buff_array.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.setMaxHealth(190)
            eventPlayer.playerSpeed[false] = 115
            eventPlayer.setDamageDealt(130)
            eventPlayer.setHealingReceived(150)
    elif eventPlayer.getCurrentHero() == Hero.BRIGITTE:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.playerSpeed[false] += 95
            eventPlayer.setMaxHealth(170)
            eventPlayer.setDamageDealt(145)
            eventPlayer.disallowButton(Button.ULTIMATE)
            L.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.playerSpeed[false] += 5
            eventPlayer.setMaxHealth(200)
            eventPlayer.setDamageDealt(130)
            eventPlayer.disallowButton(Button.ABILITY_1)
            H.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.playerSpeed[false] += 50
            eventPlayer.Q = 180
            eventPlayer.setMaxHealth(eventPlayer.Q)
            eventPlayer.setDamageDealt(125)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.setProjectileSpeed(250)
            eventPlayer.U = false
            L.append(eventPlayer)
            Close_enemies_ULT_buff_array.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 3:
            eventPlayer.playerSpeed[false] += 50
            eventPlayer.setMaxHealth(220)
            eventPlayer.setDamageDealt(125)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.setProjectileSpeed(250)
            eventPlayer.U = false
            H.append(eventPlayer)
            eventPlayer.startScalingBarriers(2, true)
            Close_enemies_ULT_buff_array.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 4:
            eventPlayer.playerSpeed[false] += 30
            eventPlayer.setMaxHealth(195)
            eventPlayer.setDamageDealt(125)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.K = 0
    elif eventPlayer.getCurrentHero() == Hero.LUCIO:
        eventPlayer.playerSpeed[false] += 30
        eventPlayer.setMaxHealth(242)
        eventPlayer.setDamageDealt(120)
        eventPlayer.disallowButton(Button.ABILITY_2)
        eventPlayer.disallowButton(Button.ULTIMATE)
        eventPlayer.disallowButton(Button.ABILITY_1)
    elif eventPlayer.getCurrentHero() == Hero.MERCY:
        eventPlayer.playerSpeed[false] += 35
        eventPlayer.setMaxHealth(205)
        eventPlayer.setDamageDealt(155)
        eventPlayer.disallowButton(Button.ULTIMATE)
        eventPlayer.disallowButton(Button.ABILITY_1)
        eventPlayer.disallowButton(Button.PRIMARY_FIRE)
        eventPlayer.disallowButton(Button.SECONDARY_FIRE)
    elif eventPlayer.getCurrentHero() == Hero.MOIRA:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.playerSpeed[false] += 30
            eventPlayer.setMaxHealth(175)
            eventPlayer.setProjectileSpeed(60)
            eventPlayer.setDamageDealt(60)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            eventPlayer.Medea_rule_breaker = false
            eventPlayer.Medea_rule_breaker2 = false
            eventPlayer.B = false
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.playerSpeed[false] += 55
            eventPlayer.setMaxHealth(130)
            eventPlayer.setDamageDealt(150)
            eventPlayer.setGravity(60)
            eventPlayer.setJumpVerticalSpeed(155)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.ABILITY_2)
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.playerSpeed[false] += 45
            eventPlayer.setMaxHealth(185)
            eventPlayer.setDamageDealt(145)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.Emiya_master = 1
            eventPlayer.U = false
            eventPlayer.setProjectileSpeed(150)
            L.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 3:
            eventPlayer.playerSpeed[false] += 40
            eventPlayer.setMaxHealth(150)
            eventPlayer.setDamageDealt(120)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.P = null
            eventPlayer.A = 1
            eventPlayer.U = false
            eventPlayer.setProjectileSpeed(55)
            eventPlayer.H = 1500
            S.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 4:
            eventPlayer.playerSpeed[false] += 10
            eventPlayer.setMaxHealth(90)
            eventPlayer.setDamageDealt(120)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.setProjectileSpeed(10)
            eventPlayer.addHealthPool(Health.ARMOR, 150, true, true)
            eventPlayer.Effects[2] = getLastCreatedHealthPool()
            eventPlayer.D = 3
            eventPlayer.disallowButton(Button.ABILITY_2)
            #circle area
            eventPlayer.C = 1
            #initial position
            eventPlayer.W = vect(-444, -9999, 1568)
            eventPlayer.U = false
            eventPlayer.Z = false
            L.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 5:
            eventPlayer.playerSpeed[false] += 45
            eventPlayer.setMaxHealth(190)
            eventPlayer.setDamageDealt(125)
            eventPlayer.disallowButton(Button.ULTIMATE)
            H.append(eventPlayer)
            eventPlayer.B = false
    eventPlayer.HUD_tutorial_screen[6] = getLastCreatedText()
    lbl_0:
    if not eventPlayer.isInSpawnRoom():
        goto lbl_2
    waitUntil(eventPlayer.isInSpawnRoom(), 99999)
    lbl_2:


rule "Become All Heroes 3":
    @Event eachPlayer
    @Condition eventPlayer.selecting_HUD == 2
    @Condition eventPlayer.getCurrentHero() in [Hero.ZENYATTA, Hero.REAPER, Hero.TRACER, Hero.DVA, Hero.BASTION, Hero.ZARYA, Hero.WINSTON, Hero.HAMMOND, Hero.SOJOURN, Hero.KIRIKO, Hero.JUNKER_QUEEN, Hero.JUNKRAT, Hero.RAMATTRA, Hero.TORBJORN, Hero.LIFEWEAVER, Hero.ILLARI, Hero.MAUGA, Hero.VENTURE] == true
    
    waitUntil(evalOnce(eventPlayer.getCurrentHero()) != eventPlayer.getCurrentHero() or not eventPlayer.isInSpawnRoom(), 99999)
    if eventPlayer.isInSpawnRoom():
        goto lbl_0
    if eventPlayer.getCurrentHero() == Hero.ZENYATTA:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.playerSpeed[false] += 33
            eventPlayer.setMaxHealth(230)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.setDamageDealt(110)
            eventPlayer.setProjectileSpeed(110)
            L.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.playerSpeed[false] += 40
            eventPlayer.setMaxHealth(210)
            eventPlayer.setDamageDealt(105)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.setProjectileSpeed(350)
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.playerSpeed[false] += 10
            eventPlayer.setMaxHealth(260)
            eventPlayer.setDamageDealt(90)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.setProjectileSpeed(70)
            L.append(eventPlayer)
            S.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 3:
            hudHeader(eventPlayer, "{0} {1} {2}".format("Charge: ", eventPlayer.K, "/60"), HudPosition.TOP, false, Color.WHITE, HudReeval.VISIBILITY_AND_STRING, SpecVisibility.DEFAULT)
            eventPlayer.HUD_tutorial_screen[7] = getLastCreatedText()
            eventPlayer.playerSpeed[false] += 10
            eventPlayer.setMaxHealth(200)
            eventPlayer.setDamageDealt(80)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.setProjectileSpeed(99999)
            eventPlayer.D = 3
            #circle area
            eventPlayer.C = 1
            #initial position
            eventPlayer.W = vect(-444, -9999, 1568)
            eventPlayer.U = false
            eventPlayer.Z = false
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.B = null
            eventPlayer.F = true
            eventPlayer.V = true
            eventPlayer.K = null
            eventPlayer.P = 7
            eventPlayer.A = true
    elif eventPlayer.getCurrentHero() == Hero.TRACER:
        eventPlayer.playerSpeed[false] += 30
        if eventPlayer.selected_hero_list_number == 1:
            eventPlayer.setDamageDealt(170)
            eventPlayer.setMaxHealth(200)
        else:
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.setDamageDealt(145)
            eventPlayer.setMaxHealth(240)
        eventPlayer.U = true
        eventPlayer.B = false
        eventPlayer.disallowButton(Button.ULTIMATE)
    elif eventPlayer.getCurrentHero() == Hero.REAPER:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.playerSpeed[false] += 25
            eventPlayer.setMaxHealth(185)
            eventPlayer.setDamageDealt(40)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.setProjectileSpeed(250)
            eventPlayer.D = 3
            eventPlayer.disallowButton(Button.ABILITY_2)
            #circle area
            eventPlayer.C = 1
            #initial position
            eventPlayer.W = vect(-444, -9999, 1568)
            eventPlayer.U = false
            eventPlayer.Z = false
            eventPlayer.L = false
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.Solomon_pillar_array = []
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.playerSpeed[false] += 40
            eventPlayer.setMaxHealth(230)
            eventPlayer.setDamageDealt(130)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ULTIMATE)
    elif eventPlayer.getCurrentHero() == Hero.DVA:
        eventPlayer.playerSpeed[false] += 35
        eventPlayer.setMaxHealth(185)
        eventPlayer.setDamageDealt(120)
        eventPlayer.setProjectileSpeed(500)
        eventPlayer.disallowButton(Button.ABILITY_1)
        eventPlayer.disallowButton(Button.ULTIMATE)
        eventPlayer.S = false
        eventPlayer.A = false
        eventPlayer.Is_Using_Ultimate = false
    elif eventPlayer.getCurrentHero() == Hero.BASTION:
        eventPlayer.playerSpeed[false] += 30
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.setMaxHealth(160)
            eventPlayer.setDamageDealt(120)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.setProjectileSpeed(125)
            eventPlayer.Is_Using_Ultimate = false
            eventPlayer.D = 100
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.setMaxHealth(220)
            eventPlayer.setDamageDealt(105)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.R = null
            eventPlayer.P = null
        else:
            eventPlayer.setMaxHealth(150)
            eventPlayer.setDamageDealt(128)
            eventPlayer.disallowButton(Button.ULTIMATE)
    elif eventPlayer.getCurrentHero() == Hero.HAMMOND:
        eventPlayer.disallowButton(Button.ULTIMATE)
    elif eventPlayer.getCurrentHero() == Hero.JUNKER_QUEEN:
        eventPlayer.setHealingDealt(500)
    elif eventPlayer.getCurrentHero() == Hero.JUNKRAT:
        eventPlayer.disallowButton(Button.ULTIMATE)
    elif eventPlayer.getCurrentHero() == Hero.KIRIKO:
        if eventPlayer.selected_hero_list_number:
            eventPlayer.disallowButton(Button.ABILITY_1)
            createEffect(eventPlayer, Effect.RING, Color.RED, eventPlayer, 7, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            createEffect(eventPlayer, Effect.RING, Color.TURQUOISE, eventPlayer, 3, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[2] = getLastCreatedEntity()
            eventPlayer.setMaxHealth(100)
            eventPlayer.setDamageDealt(120)
        else:
            eventPlayer.disallowButton(Button.ULTIMATE)
            eventPlayer.setMaxHealth(90)
            eventPlayer.setProjectileSpeed(500)
    elif eventPlayer.getCurrentHero() == Hero.SOJOURN:
        eventPlayer.disallowButton(Button.ULTIMATE)
        if eventPlayer.selected_hero_list_number:
            eventPlayer.disallowButton(Button.ABILITY_2)
    elif eventPlayer.getCurrentHero() == Hero.TORBJORN:
        if eventPlayer.selected_hero_list_number:
            eventPlayer.setProjectileSpeed(1)
            eventPlayer.playerSpeed[false] += 20
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ULTIMATE)
    elif eventPlayer.getCurrentHero() == Hero.WINSTON:
        eventPlayer.O = 191
        createEffect(getAllPlayers(), Effect.RING, Color.RED, eventPlayer, 13, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[2] = getLastCreatedEntity()
        Winston_Slow_Areas.append(eventPlayer)
    elif eventPlayer.getCurrentHero() == Hero.ZARYA:
        eventPlayer.disallowButton(Button.ULTIMATE)
        eventPlayer.setMaxHealth(150)
        if eventPlayer.selected_hero_list_number:
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            eventPlayer.playerSpeed[false] += 20
        else:
            H.append(eventPlayer)
    elif eventPlayer.getCurrentHero() == Hero.RAMATTRA:
        if eventPlayer.selected_hero_list_number == 1:
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.ULTIMATE)
        elif eventPlayer.selected_hero_list_number == 0:
            eventPlayer.setMaxHealth(130)
        else:
            eventPlayer.disallowButton(Button.ABILITY_2)
            eventPlayer.disallowButton(Button.ULTIMATE)
    elif eventPlayer.getCurrentHero() == Hero.ILLARI:
        if eventPlayer.selected_hero_list_number:
            eventPlayer.setDamageDealt(90)
        else:
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.disallowButton(Button.ULTIMATE)
            H.append(eventPlayer)
    elif eventPlayer.getCurrentHero() == Hero.LIFEWEAVER:
        eventPlayer.disallowButton(Button.ABILITY_2)
        if eventPlayer.selected_hero_list_number:
            S.append(eventPlayer)
            eventPlayer.disallowButton(Button.ULTIMATE)
        else:
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.garden_value = 1.15
    elif eventPlayer.getCurrentHero() == Hero.MAUGA and eventPlayer.selected_hero_list_number:
        eventPlayer.setMaxHealth(80)
    eventPlayer.HUD_tutorial_screen[6] = getLastCreatedText()
    lbl_0:
    if not eventPlayer.isInSpawnRoom():
        goto lbl_1
    waitUntil(eventPlayer.isInSpawnRoom(), 99999)
    lbl_1:


rule "Select a Random hero":
    @Event eachPlayer
    @Condition eventPlayer.isCrouching() == true
    @Condition eventPlayer.isInSpawnRoom() == true
    
    wait(2, Wait.ABORT_WHEN_FALSE)
    eventPlayer.startForcingHero(random.choice(getAllHeroes()))
    wait()
    eventPlayer.stopForcingCurrentHero()
    wait(0.125)
    calling_nameplates_restart()
    eventPlayer.selected_hero_list_number = random.randint(0, len(eventPlayer.Selected_Hero) - 1)
    eventPlayer.forceButtonPress(Button.INTERACT)
    wait(1)


rule "start and stop heal over time":
    @Event playerTookDamage
    @Condition eventPlayer != attacker
    
    stopHoT(eventPlayer.heal_over_time)
    wait(6, Wait.RESTART_WHEN_TRUE)
    eventPlayer.startHoT(eventPlayer, 9999, 15)
    eventPlayer.heal_over_time = getLastHoT()
    async(stop_healing_over_time, AsyncBehavior.RESTART)


rule "Set the players that get ultimate faster and disable inspector":
    #All players that have is using ultimate
    Global_ULTButton_1 = [Hero.SOJOURN, Hero.ANA, Hero.LUCIO, Hero.ILLARI, Hero.HANZO, Hero.PHARAH, Hero.BAPTISTE, Hero.KIRIKO, Hero.HAMMOND, Hero.LIFEWEAVER, Hero.ZARYA, Hero.TORBJORN, Hero.TRACER, Hero.DVA, Hero.JUNKRAT, Hero.ORISA, Hero.ASHE, Hero.ZENYATTA, Hero.SOMBRA]
    #All players that have is using ultimate
    Global_ULTButton_2 = [Hero.CASSIDY, Hero.SYMMETRA, Hero.SOLDIER, Hero.GENJI, Hero.MOIRA, Hero.DOOMFIST]
    #All players that have is using ultimate
    Global_ULTButton_3 = [Hero.ECHO, Hero.MERCY, Hero.ROADHOG, Hero.MEI, Hero.SIGMA, Hero.BASTION, Hero.BRIGITTE, Hero.REAPER, Hero.REINHARDT, Hero.RAMATTRA, Hero.MAUGA, Hero.WINSTON, Hero.WIDOWMAKER]
    Winston_Slow_Areas = []


rule "Ultimate faster for some servants":
    @Event playerDealtDamage
    #Large , Hedium, Small
    @Condition (eventPlayer in (L or S or H)) == true
    @Condition eventPlayer != victim
    
    if eventPlayer in L:
        eventPlayer.setUltCharge(eventPlayer.getUltCharge() + eventDamage / 10)
    if eventPlayer in H:
        eventPlayer.setUltCharge(eventPlayer.getUltCharge() + eventDamage / 13)
    if eventPlayer in S:
        eventPlayer.setUltCharge(eventPlayer.getUltCharge() + eventDamage / 15)


rule "dummy bots command for test + Rein auto use hammer (and pharah rockets)":
    @Event eachPlayer
    @Condition eventPlayer.isDummy() == true
    @Condition eventPlayer.hasSpawned() == true
    @Condition entityExists(eventPlayer) == true
    #@Condition (eventPlayer.ozymandias_master or eventPlayer.shakespeare_master or eventPlayer.solomon_master) == false
    @Condition eventPlayer.getCurrentHero() != Hero.HANZO
    @Condition eventPlayer.getCurrentHero() != Hero.SOMBRA
    @Condition eventPlayer.getCurrentHero() != Hero.REAPER
    @Condition eventPlayer.getCurrentHero() != Hero.ZARYA
    @Condition eventPlayer.getCurrentHero() != Hero.DOOMFIST
    @Condition eventPlayer.getCurrentHero() != Hero.MERCY
    
    wait(1)
    eventPlayer.allowButton(Button.PRIMARY_FIRE)
    eventPlayer.startForcingButton(Button.PRIMARY_FIRE)


rule "Team 1 and team 2 UI hp":
    @Event eachPlayer
    @Condition eventPlayer.isInSpawnRoom() == false
    @Condition eventPlayer.isMoving() == true
    @Condition eventPlayer.isDummy() == false
    
    if eventPlayer.getTeam() == Team.1:
        hudHeader(getAllPlayers(), "{0} {1} {2}".format(heroIcon(eventPlayer.getCurrentHero()), eventPlayer, eventPlayer.getHealth()), HudPosition.RIGHT, 2, Color.WHITE, HudReeval.VISIBILITY_AND_STRING, SpecVisibility.DEFAULT)
    elif eventPlayer.getTeam() == Team.2:
        hudHeader(getAllPlayers(), "{0} {1} {2}".format(heroIcon(eventPlayer.getCurrentHero()), eventPlayer, eventPlayer.getHealth()), HudPosition.LEFT, 2, Color.WHITE, HudReeval.VISIBILITY_AND_STRING, SpecVisibility.DEFAULT)
    eventPlayer.HUD_tutorial_screen[5] = getLastCreatedText()
    waitUntil(eventPlayer.isInSpawnRoom(), 99999)
    destroyHudText(eventPlayer.HUD_tutorial_screen[5])


rule "Travel through hero selection list":
    @Event eachPlayer
    @Condition (eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) or eventPlayer.isHoldingButton(Button.SECONDARY_FIRE)) == true
    @Condition eventPlayer.selecting_HUD == 2
    @Condition eventPlayer.Mahito_Transfigured[0] == false
    
    if eventPlayer.isHoldingButton(Button.SECONDARY_FIRE):
        eventPlayer.selected_hero_list_number += true
    elif eventPlayer.isHoldingButton(Button.PRIMARY_FIRE):
        eventPlayer.selected_hero_list_number -= true


rule "bug fix for under 0 list":
    @Event eachPlayer
    @Condition eventPlayer.selected_hero_list_number < null
    @Condition eventPlayer.isInSpawnRoom() == true
    
    eventPlayer.selected_hero_list_number = len(eventPlayer.Selected_Hero) - true


rule "bug fix for above max list":
    @Event eachPlayer
    @Condition eventPlayer.selected_hero_list_number > len(eventPlayer.Selected_Hero) - true
    @Condition eventPlayer.isInSpawnRoom() == true
    
    eventPlayer.selected_hero_list_number = null


rule "Emiya Hanzo caradobolg ab2 || Tesla no bug":
    @Event eachPlayer
    @Hero hanzo
    @Condition eventPlayer.isUsingAbility2() == true
    @Condition eventPlayer.Is_Using_Ultimate == false
    @Condition eventPlayer.isAlive() == true
    
    if not eventPlayer.selected_hero_list_number:
        createEffect(getAllPlayers(), Effect.BAD_AURA, Color.RED, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[3] = getLastCreatedEntity()
        waitUntil(eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) or not eventPlayer.isUsingAbility2() or eventPlayer.isInSpawnRoom(), 99999)
        if not eventPlayer.isUsingAbility2():
            goto lbl_0
        raycast_hit_position1()
        eventPlayer.trump_wait_middle = getPlayersInRadius(eventPlayer.raycast_hit_position, 3.3, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES_AND_ENEMY_BARRIERS)
        eventPlayer.trump_wait_middle.setStatusEffect(eventPlayer, Status.STUNNED, 1.5)
        damage(eventPlayer.trump_wait_middle, eventPlayer, 50)
        playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.RED, eventPlayer.raycast_hit_position, 6)
        playEffect(getAllPlayers(), DynamicEffect.EXPLOSION_SOUND, Color.RED, eventPlayer.raycast_hit_position, 100)
        wait(0.15)
        eventPlayer.forceButtonPress(Button.ABILITY_2)
        lbl_0:
        destroyEffect(eventPlayer.Effects[3])
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 10)
    elif eventPlayer.selected_hero_list_number == 6:
        eventPlayer.disallowButton(Button.PRIMARY_FIRE)
        waitUntil(not eventPlayer.isUsingAbility2(), 99999)
        eventPlayer.allowButton(Button.PRIMARY_FIRE)


rule "defense shield ability 1/3 (setup)":
    @Event eachPlayer
    @Hero hanzo
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_1) == 0
    @Condition eventPlayer.selected_hero_list_number == null
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.X == true
    
    eventPlayer.disallowButton(Button.ABILITY_2)
    destroyHudText(eventPlayer.Effects[true])
    if eventPlayer.H != 0:
        goto lbl_0
    eventPlayer.H = 400
    lbl_0:
    chase(eventPlayer.H, 0, rate=10, ChaseReeval.DESTINATION_AND_RATE)
    createEffect(getAllPlayers(), Effect.WRECKING_BALL_ADAPTIVE_SHIELD_TARGET, Color.TEAM_2, eventPlayer, 2, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.Effects[false] = getLastCreatedEntity()
    wait()
    hudHeader(eventPlayer, "{0}: {1}".format("Shield Life", eventPlayer.H), HudPosition.LEFT, 2, Color.WHITE, HudReeval.VISIBILITY_AND_STRING, SpecVisibility.DEFAULT)
    eventPlayer.Effects[true] = getLastCreatedText()
    eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 9999)
    eventPlayer.T = true
    eventPlayer.X = false
    wait(0.25)
    waitUntil(eventPlayer.isInSpawnRoom() or eventPlayer.isHoldingButton(Button.ABILITY_1) or eventPlayer.H <= 0, 99999)
    stopChasingVariable(eventPlayer.H)
    eventPlayer.clearStatusEffect(Status.UNKILLABLE)
    destroyEffect(eventPlayer.Effects[0])
    destroyHudText(eventPlayer.Effects[true])
    playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.RED, eventPlayer, 100)
    eventPlayer.T = false
    eventPlayer.X = true
    eventPlayer.allowButton(Button.ABILITY_2)
    if eventPlayer.H <= 0:
        goto lbl_1
    eventPlayer.setAbilityCooldown(Button.ABILITY_1, 14)
    lbl_1:
    if eventPlayer.H > 0:
        goto lbl_2
    emyia_clear_shield()
    eventPlayer.X = true
    lbl_2:


rule "defense shield ability 2/3 (negate damage)":
    @Event playerTookDamage
    @Hero hanzo
    @Condition eventPlayer.T == true
    @Condition eventPlayer.selected_hero_list_number == null
    
    eventPlayer.H -= eventDamage
    eventPlayer.setHealth(eventPlayer.getHealth() + eventDamage)
    if eventPlayer.H < 1:
        emyia_clear_shield()
        smallMessage(eventPlayer, "Shield Broken")
        waitUntil(eventPlayer.isDead() or eventPlayer.isInSpawnRoom() or eventPlayer.getAbilityCooldown(Button.ABILITY_1) > 0, 99999)
        eventPlayer.X = true


rule "hanzo unlimited blade works 2/3":
    @Event eachPlayer
    @Hero hanzo
    @Condition eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) == true
    @Condition eventPlayer.selected_hero_list_number == null
    @Condition eventPlayer.Is_Using_Ultimate == true
    @Condition eventPlayer.isAlive() == true
    
    eventPlayer.color = Color.ORANGE
    raycast_hit_player()
    async(create_beam_effect_subroutine, AsyncBehavior.RESTART)
    if entityExists(eventPlayer.raycast_hit_player):
        damage(eventPlayer.raycast_hit_player, eventPlayer, 55)
    else:
        damage(getPlayersInRadius(eventPlayer.raycast_hit_position2, 3, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, 40)
    playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.ORANGE, eventPlayer.raycast_hit_position2, 0.75)
    playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.ORANGE, eventPlayer.raycast_hit_position2, 100)
    wait(0.08)
    destroy_beam_effect_subroutine()
    wait(0.02)
    if RULE_CONDITION:
        goto RULE_START


rule "hanzo unlimited blade works 3/3":
    @Event eachPlayer
    @Condition eventPlayer.Emiya_master.Is_Using_Ultimate == true
    @Condition distance(eventPlayer, eventPlayer.Emiya_master.E) >= 20
    @Condition eventPlayer in eventPlayer.Emiya_master.M == true
    @Condition eventPlayer.Emiya_master.getCurrentHero() == Hero.HANZO
    
    eventPlayer.setStatusEffect(null, Status.ROOTED, 0.2)
    eventPlayer.applyImpulse(directionTowards(eventPlayer, eventPlayer.Emiya_master.E), 33, Relativity.TO_WORLD, Impulse.INCORPORATE_CONTRARY_MOTION)
    wait(0.05)
    if RULE_CONDITION:
        goto RULE_START


rule "gilgamesh key of babylon  ab 2 1/3":
    @Event eachPlayer
    @Hero hanzo
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getUltCharge() >= 1
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) <= 0
    @Condition eventPlayer.hasStatusEffect(Status.FROZEN) == false
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.selected_hero_list_number == 1
    @Condition eventPlayer.Is_Using_Ultimate == false
    
    eventPlayer.setGravity(10)
    eventPlayer.startForcingThrottle(false, false, false, false, false, false)
    raycast_hit_position1()
    raycast_hit_player()
    eventPlayer.L = eventPlayer + worldVector(vect(random.uniform(-5, 5), random.uniform(0.5, 4), 0), eventPlayer, Transform.ROTATION)
    createBeam(getAllPlayers(), Beam.BAD, eventPlayer.L, eventPlayer.raycast_hit_position, Color.YELLOW, EffectReeval.NONE)
    eventPlayer.Effects[len(eventPlayer.Effects) + true] = getLastCreatedEntity()
    createEffect(getAllPlayers(), Effect.SPHERE, Color.YELLOW, eventPlayer.L, 0.85, EffectReeval.NONE)
    eventPlayer.Effects.append(getLastCreatedEntity())
    playEffect(getAllPlayers(), DynamicEffect.DVA_MICRO_MISSILES_EXPLOSION, Color.TEAM_2, eventPlayer.raycast_hit_position, 2)
    playEffect(getAllPlayers(), DynamicEffect.EXPLOSION_SOUND, Color.ORANGE, eventPlayer.raycast_hit_position, 125)
    if entityExists(eventPlayer.raycast_hit_player):
        damage(eventPlayer.raycast_hit_player, eventPlayer, 30)
        damage(getPlayersInRadius(eventPlayer.raycast_hit_player, 3, Team.ALL, LosCheck.SURFACES).exclude([eventPlayer, eventPlayer.raycast_hit_player]), eventPlayer, 14)
    else:
        damage(getPlayersInRadius(eventPlayer.raycast_hit_position, 3, Team.ALL, LosCheck.SURFACES).exclude(eventPlayer), eventPlayer, 14)
    eventPlayer.setUltCharge(eventPlayer.getUltCharge() - 0.7)
    wait(0.02)
    Gilgamesh_cleaning_GOB()
    wait(0.025, Wait.ABORT_WHEN_FALSE)
    if RULE_CONDITION:
        goto RULE_START


rule "'gilgamesh key of babylon  ab 2 2/3":
    @Event eachPlayer
    @Hero hanzo
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == false
    @Condition eventPlayer.selected_hero_list_number == 1
    
    Gilgamesh_cleaning_GOB()
    eventPlayer.stopForcingThrottle()
    eventPlayer.setGravity(100)


rule "gilgamesh key of babylon  ab 2 3/3":
    @Event eachPlayer
    @Hero hanzo
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getUltCharge() <= 0
    @Condition eventPlayer.selected_hero_list_number == 1
    
    eventPlayer.setStatusEffect(eventPlayer, Status.STUNNED, 0.45)
    smallMessage(eventPlayer, "Not enough ultimate charge")
    eventPlayer.setAbilityCooldown(Button.ABILITY_2, 3)
    wait()
    eventPlayer.setUltCharge(eventPlayer.getUltCharge() + 35)
    Gilgamesh_cleaning_GOB()


def Gilgamesh_cleaning_GOB():
    @Name "hanzo gilgamesh cleaning gate of babylon TEST"
    
    for eventPlayer.Gate_of_Babylon_index in range(0, len(eventPlayer.Effects), true):
        destroyEffect(eventPlayer.Effects[eventPlayer.Gate_of_Babylon_index])
    eventPlayer.Effects = []
    return


rule "Roadhog Caesar E faster for a few seconds to run":
    @Event eachPlayer
    @Hero roadhog
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == null
    @Condition eventPlayer.selected_hero_list_number == null
    
    eventPlayer.disallowButton(Button.MELEE)
    eventPlayer.playerSpeed[false] += 50
    eventPlayer.startHoT(eventPlayer, 3, 65)
    waitUntil(eventPlayer.isInSpawnRoom(), 3)
    eventPlayer.playerSpeed[false] -= 50
    eventPlayer.allowButton(Button.MELEE)
    eventPlayer.setAbilityCooldown(Button.ABILITY_2, 9)


rule "Nobunaga shift of what is going on":
    @Event eachPlayer
    @Hero ashe
    @Condition eventPlayer.isUsingAbility1() == true
    @Condition eventPlayer.selected_hero_list_number == null
    
    waitUntil(isAssemblingHeroes(), 0.65)
    eventPlayer.applyImpulse(eventPlayer.getFacingDirection(), 35, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
    eventPlayer.setGravity(false)
    eventPlayer.setAbilityCooldown(Button.ABILITY_1, 11)
    waitUntil(isAssemblingHeroes(), 2.3)
    eventPlayer.setGravity(100)


rule "All Ashe ab 2 Nobunaga, Caster Gill, Xuanzang, William Tell":
    @Event eachPlayer
    @Hero ashe
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0
    @Condition eventPlayer.isInSpawnRoom() == false
    
    if eventPlayer.selected_hero_list_number == 0:
        FoV_and_LoS_player_select()
        for eventPlayer.for_loop_2 in range(5):
            createHomingProjectile(Projectile.PHARAH_ROCKET, eventPlayer, null, null, Relativity.TO_WORLD, ModifyHealth.DAMAGE, getOppositeTeam(eventPlayer.getTeam()), 55, 0.7, 3, DynamicEffect.ECHO_STICKY_BOMB_EXPLOSION, DynamicEffect.EXPLOSION_SOUND, 0.035, 28, 15, 6, eventPlayer.FoV_and_lineOFsight_player, 1)
            wait(0.25)
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 15)
        waitUntil(not eventPlayer.isUsingAbility2(), 99999)
    elif eventPlayer.selected_hero_list_number == 1:
        eventPlayer.J = true
        eventPlayer.playerSpeed[false] += 35
        eventPlayer.setDamageReceived(20)
        createEffect(getAllPlayers(), Effect.ANA_NANO_BOOSTED, Color.WHITE, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[true] = getLastCreatedEntity()
        wait(4)
        destroyEffect(eventPlayer.Effects[true])
        eventPlayer.playerSpeed[false] -= 35
        eventPlayer.setDamageReceived(70)
        eventPlayer.J = false
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 8)
    elif eventPlayer.selected_hero_list_number == 2:
        for eventPlayer.for_loop in range(0, 3, true):
            FoV_and_LoS_player_select()
            createProjectile(Projectile.BASTION_TACTICAL_GRENADE, eventPlayer, null, null, Relativity.TO_WORLD, ModifyHealth.DAMAGE, getOppositeTeam(eventPlayer.getTeam()), 90, 0.5, 2, DynamicEffect.ECHO_STICKY_BOMB_EXPLOSION, DynamicEffect.JUNKRAT_FRAG_LAUNCHER_EXPLOSION_SOUND, 0.001, 75, 4, 16, 0, 0)
            if eventPlayer.isDead() or eventPlayer.isInSpawnRoom():
                goto lbl_0
            wait(0.65)
        lbl_0:
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 13)
    elif eventPlayer.selected_hero_list_number == 3:
        eventPlayer.C = Color.WHITE
        eventPlayer.P = nearestWalkablePosition(eventPlayer)
        createEffect(getAllPlayers(), Effect.RING, Color.ORANGE, eventPlayer.P, 4, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[true] = getLastCreatedEntity()
        createIcon(getAllPlayers(), eventPlayer.P + vect(false, 1.25, false), Icon.EXCLAMATION_MARK, IconReeval.VISIBILITY_POSITION_AND_COLOR, eventPlayer.C, false)
        eventPlayer.Effects[2] = getLastCreatedEntity()
        wait(1.5)
        eventPlayer.C = Color.RED
        waitUntil(eventPlayer.isHoldingButton(Button.ABILITY_2) or getPlayersInRadius(eventPlayer.P, 4, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES) > 0, 7)
        eventPlayer.W = getPlayersInRadius(eventPlayer.P, 4, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES)
        eventPlayer.W.setStatusEffect(eventPlayer, Status.STUNNED, 2)
        damage(eventPlayer.W, eventPlayer, 155)
        destroyEffect(eventPlayer.Effects[true])
        destroyIcon(eventPlayer.Effects[2])
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 6)


rule "Doom Hassan of the great hand ultimate (mark and kill)":
    @Event playerDealtDamage
    @Hero doomfist
    @Condition eventAbility == Button.SECONDARY_FIRE
    
    if eventPlayer.selected_hero_list_number == null and eventPlayer.Hassan_Hand_ULT == true:
        eventPlayer.Hassan_deathmark = victim
        createIcon(getAllPlayers(), victim, Icon.SKULL, IconReeval.VISIBILITY_AND_POSITION, Color.RED, true)
        eventPlayer.Effects[3] = getLastCreatedEntity()
        wait()
        eventPlayer.L = true
        waitUntil(eventPlayer.isHoldingButton(Button.ULTIMATE) and eventPlayer.getUltCharge() == 100 or (eventPlayer.isDead() or eventPlayer.Hassan_deathmark.isDead() or not entityExists(eventPlayer.Hassan_deathmark) or eventPlayer.isInSpawnRoom() or not eventPlayer.Is_Using_Ultimate), 99999)
        if not entityExists(eventPlayer.Hassan_deathmark):
            goto lbl_0
        waitUntil(not eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN) and not eventPlayer.hasStatusEffect(Status.ASLEEP) and not eventPlayer.hasStatusEffect(Status.FROZEN) and not eventPlayer.hasStatusEffect(Status.STUNNED) and not eventPlayer.hasStatusEffect(Status.HACKED), 99999)
        lbl_0:
        if not eventPlayer.Is_Using_Ultimate:
            goto lbl_1
        eventPlayer.Hassan_deathmark.clearStatusEffect(Status.UNKILLABLE)
        eventPlayer.Hassan_deathmark.clearStatusEffect(Status.INVINCIBLE)
        eventPlayer.Hassan_deathmark.clearStatusEffect(Status.PHASED_OUT)
        kill(eventPlayer.Hassan_deathmark, eventPlayer)
        lbl_1:
        eventPlayer.Is_Using_Ultimate = false
        eventPlayer.setUltCharge(0)
        eventPlayer.Hassan_deathmark = null
        eventPlayer.L = false
        eventPlayer.Hassan_Hand_ULT = false


rule "Hassan of the great hand in the shadows ab1":
    @Event eachPlayer
    @Hero doomfist
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_1) == null
    @Condition eventPlayer.selected_hero_list_number == null
    @Condition eventPlayer.isInSpawnRoom() == false
    
    destroy_nameONplayer()
    smallMessage(eventPlayer, "Invisibile")
    eventPlayer.setGravity(75)
    eventPlayer.setStatusEffect(eventPlayer, Status.HACKED, 4.016)
    eventPlayer.setInvisibility(Invis.ENEMIES)
    eventPlayer.playerSpeed[false] += 65
    waitUntil(eventPlayer.isInSpawnRoom(), 4)
    smallMessage(eventPlayer, "Visibile")
    eventPlayer.setInvisibility(Invis.NONE)
    eventPlayer.playerSpeed[false] -= 65
    eventPlayer.setAbilityCooldown(Button.ABILITY_1, 11)
    eventPlayer.setGravity(100)
    create_nameONplayer()


rule "Hassan of the great hand backstabing parsive":
    @Event playerDealtDamage
    @Hero doomfist
    @Condition eventAbility == Button.MELEE
    @Condition eventPlayer.isInViewAngle(victim, 70) == true
    @Condition victim.isInViewAngle(eventPlayer, 120) == false
    @Condition eventPlayer.selected_hero_list_number == null
    @Condition eventPlayer.selecting_HUD == false
    
    damage(victim, eventPlayer, 30)
    victim.startDoT(eventPlayer, 3, 20)
    smallMessage(victim, "Backstabbed")


rule "Jean D'Arc ultimate 2/2":
    @Event playerTookDamage
    @Hero mercy
    @Condition eventPlayer.Is_Using_Ultimate == true
    
    eventPlayer.D += eventDamage
    heal(eventPlayer, eventPlayer, eventDamage * 1.6)
    wait()


rule "Jean D'Arc ab 1":
    @Event eachPlayer
    @Hero mercy
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_1) == 0
    @Condition eventPlayer.isInSpawnRoom() == false
    
    FoV_and_LoS_player_select()
    if not eventPlayer.FoV_and_lineOFsight_player or eventPlayer.FoV_and_lineOFsight_player.getTeam() != eventPlayer.getTeam():
        goto lbl_0
    eventPlayer.B = true
    eventPlayer.FoV_and_lineOFsight_player.mercy_attached_master = eventPlayer
    eventPlayer.attachTo(eventPlayer.FoV_and_lineOFsight_player, vect(0, 2, 0))
    eventPlayer.allowButton(Button.PRIMARY_FIRE)
    eventPlayer.setDamageReceived(50)
    eventPlayer.FoV_and_lineOFsight_player.setDamageReceived(50)
    eventPlayer.setDamageDealt(145)
    wait(0.25)
    waitUntil(distance(eventPlayer, eventPlayer.FoV_and_lineOFsight_player) > 3 or eventPlayer.FoV_and_lineOFsight_player.isDead() or eventPlayer.isHoldingButton(Button.ABILITY_1) or not entityExists(eventPlayer.FoV_and_lineOFsight_player) or eventPlayer.isInSpawnRoom(), 99999)
    eventPlayer.setDamageReceived(70)
    eventPlayer.FoV_and_lineOFsight_player.setDamageReceived(70)
    eventPlayer.FoV_and_lineOFsight_player.mercy_attached_master = null
    eventPlayer.detach()
    eventPlayer.setDamageDealt(155)
    eventPlayer.B = false
    lbl_0:
    eventPlayer.disallowButton(Button.PRIMARY_FIRE)
    eventPlayer.setAbilityCooldown(Button.ABILITY_1, 12)


rule "Jean D'Arc ab 2":
    @Event eachPlayer
    @Hero mercy
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0
    @Condition eventPlayer.B == false
    
    playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION_SOUND, Color.RED, eventPlayer, 90)
    playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.YELLOW, eventPlayer + vect(false, 1.5, false), 2)
    raycast_hit_position1()
    eventPlayer.setStatusEffect(null, Status.ROOTED, true)
    eventPlayer.teleport(eventPlayer.raycast_hit_position)
    eventPlayer.setAbilityCooldown(Button.ABILITY_2, 10)
    wait(10)


rule "Jean D'Arc melee steal ult":
    @Event playerDealtDamage
    @Hero mercy
    @Condition eventAbility == Button.MELEE
    @Condition eventPlayer.selected_hero_list_number == null
    @Condition eventPlayer.selecting_HUD == false
    
    victim.setUltCharge(victim.getUltCharge() - 3)
    eventPlayer.setUltCharge(eventPlayer.getUltCharge() + 3)


rule "Jean D'Arc fast melee":
    @Event eachPlayer
    @Hero mercy
    @Condition eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) == true
    @Condition eventPlayer.selected_hero_list_number == null
    @Condition eventPlayer.B == false
    
    eventPlayer.setAbilityCooldown(Button.MELEE, false)
    eventPlayer.forceButtonPress(Button.MELEE)
    wait(0.52)
    eventPlayer.cancelPrimaryAction()
    if RULE_CONDITION:
        goto RULE_START


rule "Golem movement 3 (all golems)":
    @Event playerTookDamage
    @Hero reinhardt
    @Condition eventPlayer.isDummy() == true
    
    eventPlayer.startForcingButton(Button.PRIMARY_FIRE)
    eventPlayer.stopFacing()
    eventPlayer.stopThrottleInDirection()
    eventPlayer.startThrottleInDirection(directionTowards(eventPlayer, attacker), 1, Relativity.TO_WORLD, Throttle.REPLACE_EXISTING, ThrottleReeval.DIRECTION_AND_MAGNITUDE)
    eventPlayer.startFacing(directionTowards(eventPlayer, attacker), 1000, Relativity.TO_WORLD, FacingReeval.DIRECTION_AND_TURN_RATE)
    waitUntil(eventPlayer.solomon_master.isHoldingButton(Button.ABILITY_1), 1)


rule "Avicebron ab2 teleport help golem":
    @Event eachPlayer
    @Hero reinhardt
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0
    @Condition eventPlayer.selected_hero_list_number == 4
    @Condition eventPlayer.isDummy() == false
    
    eventPlayer.G.stopThrottleInDirection()
    Farthest_solomon_array_minion()
    eventPlayer.G.stopThrottleInDirection()
    eventPlayer.G.teleport(eventPlayer)
    wait(5)
    smallMessage(eventPlayer, "Golem teleport ready")


rule "Avicebron ab1 (make golem move to mouse)":
    @Event eachPlayer
    @Hero reinhardt
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.selected_hero_list_number == 4
    @Condition eventPlayer.isInSpawnRoom() == false
    
    eventPlayer.G.startForcingButton(Button.PRIMARY_FIRE)
    eventPlayer.G.stopFacing()
    eventPlayer.G.stopThrottleInDirection()
    if entityExists(eventPlayer.G):
        goto lbl_0
    Farthest_solomon_array_minion()
    lbl_0:
    raycast_hit_position1()
    eventPlayer.G.startFacing(eventPlayer.getFacingDirection(), 1000, Relativity.TO_PLAYER, FacingReeval.DIRECTION_AND_TURN_RATE)
    eventPlayer.G.startThrottleInDirection(directionTowards(eventPlayer.G, eventPlayer.raycast_hit_position), 1, Relativity.TO_WORLD, Throttle.REPLACE_EXISTING, ThrottleReeval.DIRECTION_AND_MAGNITUDE)
    createEffect(getAllPlayers(), Effect.RING, Color.SKY_BLUE, eventPlayer.raycast_hit_position, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.Effects[true] = getLastCreatedEntity()
    createIcon(getAllPlayers(), eventPlayer.raycast_hit_position + vect(false, 0.125, false), Icon.ARROW_DOWN, IconReeval.VISIBILITY_AND_POSITION, Color.WHITE, false)
    eventPlayer.Effects[2] = getLastCreatedEntity()
    wait(0.25)
    destroyEffect(eventPlayer.Effects[true])
    destroyIcon(eventPlayer.Effects[2])


rule "Avicebron deletion on hero changed || ALL that has solomon master bot's will delete the dummy on leave":
    @Event eachPlayer
    @Condition eventPlayer.hasSpawned() == true
    @Condition eventPlayer.isDummy() == true
    @Condition entityExists(eventPlayer) == true
    @Condition entityExists(eventPlayer.solomon_master) == true
    
    if eventPlayer.solomon_master.getCurrentHero() in [Hero.SOMBRA, Hero.MEI]:
        goto lbl_0
    waitUntil(eventPlayer.solomon_master.isInSpawnRoom() or not entityExists(eventPlayer.solomon_master) or eventPlayer.isInSpawnRoom() or eventPlayer.isDead() or eventPlayer.solomon_master.isDead() or eventPlayer.solomon_master.Mahito_Transfigured[3], 99999)
    lbl_0:
    if not eventPlayer.solomon_master.getCurrentHero() in [Hero.SOMBRA, Hero.MEI]:
        goto lbl_1
    waitUntil(eventPlayer.isInSpawnRoom() or eventPlayer.solomon_master.isInSpawnRoom() or not entityExists(eventPlayer.solomon_master), 99999)
    lbl_1:
    eventPlayer.solomon_master.Solomon_pillar_array.remove(eventPlayer)
    destroyDummy(eventPlayer.getTeam(), eventPlayer.getSlot())
    wait()


rule "Albert Einstein time is relative  || Hassan of the mountain ab1":
    @Event eachPlayer
    @Hero sigma
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_1) == 0
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.isInSpawnRoom() == false
    
    if eventPlayer.selected_hero_list_number == null:
        eventPlayer.playerSpeed[false] += 1100
        eventPlayer.setDamageDealt(400)
        eventPlayer.setDamageReceived(10)
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.YELLOW, eventPlayer, 100)
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION_SOUND, Color.YELLOW, eventPlayer, 10000)
        setSlowMotion(25)
        waitUntil(eventPlayer.isInSpawnRoom(), 1.1)
        setSlowMotion(100)
        eventPlayer.setDamageReceived(70)
        eventPlayer.setDamageDealt(145)
        eventPlayer.playerSpeed[false] -= 1100
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 12)
    elif eventPlayer.selected_hero_list_number == 1:
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 10)
        eventPlayer.V = true
        eventPlayer.playerSpeed[false] += 250
        eventPlayer.setDamageDealt(600)
        createEffect(getAllPlayers(), Effect.ANA_NANO_BOOSTED, Color.TEAM_2, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[2] = getLastCreatedEntity()
        progressBarHud(eventPlayer, eventPlayer.R, "Speed Resource", HudPosition.LEFT, 0, Color.SKY_BLUE, Color.WHITE, ProgressHudReeval.VISIBILITY_VALUES_AND_COLOR, SpecVisibility.DEFAULT)
        eventPlayer.Effects[3] = getLastCreatedText()
        wait(0.5)
        waitUntil(eventPlayer.R <= 0 or eventPlayer.isInSpawnRoom() or eventPlayer.isHoldingButton(Button.ABILITY_1), 6)
        eventPlayer.playerSpeed[false] -= 250
        eventPlayer.setDamageDealt(100)
        eventPlayer.V = false
        destroyEffect(eventPlayer.Effects[2])
        destroyProgressBarHud(eventPlayer.Effects[3])
        playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.WHITE, eventPlayer, 200)
        eventPlayer.R = 100


rule "Albert Einstein hyper projectile 1/2 (coordown)":
    @Event eachPlayer
    @Hero sigma
    @Condition eventPlayer.isUsingAbility2() == true
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.selected_hero_list_number == null
    @Condition eventPlayer.selecting_HUD == false
    
    eventPlayer.setProjectileSpeed(1200)
    waitUntil(not eventPlayer.isUsingAbility2(), 99999)
    eventPlayer.setAbilityCooldown(Button.ABILITY_2, 7)


rule "Sigma hassan rule for making person 1 MaxHp":
    @Event playerTookDamage
    @Condition eventAbility == Button.ULTIMATE
    @Condition victim.isOnGround() == true
    @Condition attacker.getCurrentHero() == Hero.SIGMA
    
    wait(0.05, Wait.ABORT_WHEN_FALSE)
    victim.setStatusEffect(null, Status.UNKILLABLE, 1)
    attacker.A.append(victim)
    victim.setMaxHealth(1)


rule "All Mei Ab1 (marie pull and surtr smash)":
    @Event eachPlayer
    @Hero mei
    @Condition (eventPlayer.isHoldingButton(Button.ABILITY_1) and eventPlayer.getAbilityCooldown(Button.ABILITY_1) == 0 or eventPlayer.isUsingAbility1()) == true
    
    if eventPlayer.selected_hero_list_number == null:
        FoV_and_LoS_player_select()
        smallMessage(getAllPlayers(), "{0} is charmed".format(eventPlayer.FoV_and_lineOFsight_player))
        eventPlayer.FoV_and_lineOFsight_player.setFacing(directionTowards(eventPlayer.FoV_and_lineOFsight_player, eventPlayer), Relativity.TO_WORLD)
        eventPlayer.FoV_and_lineOFsight_player.startThrottleInDirection(directionTowards(eventPlayer.FoV_and_lineOFsight_player, eventPlayer), 1, Relativity.TO_WORLD, Throttle.REPLACE_EXISTING, ThrottleReeval.DIRECTION_AND_MAGNITUDE)
        wait(1.25)
        waitUntil(eventPlayer.isDead() or eventPlayer.FoV_and_lineOFsight_player.isInViewAngle(eventPlayer, 8), 5)
        eventPlayer.FoV_and_lineOFsight_player.stopThrottleInDirection()
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 8)
    elif eventPlayer.selected_hero_list_number == 1:
        eventPlayer.startHoT(null, 3, 60)
        waitUntil(not eventPlayer.isUsingAbility1(), 10)
    elif eventPlayer.selected_hero_list_number == 2:
        if eventPlayer.Is_Using_Ultimate:
            goto lbl_0
        eventPlayer.setGravity(0)
        eventPlayer.applyImpulse(Vector.UP, 30, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
        wait(0.6)
        eventPlayer.setGravity(7000)
        waitUntil(eventPlayer.isOnGround(), 99999)
        if not eventPlayer.isUsingAbility1():
            goto lbl_1
        damage(getPlayersInRadius(eventPlayer, 5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, 200)
        playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.SKY_BLUE, eventPlayer, 5)
        lbl_1:
        eventPlayer.setGravity(100)
        lbl_0:


rule "Marie Antoinette ice slide":
    @Event eachPlayer
    @Hero mei
    @Condition eventPlayer.isMoving() == true
    @Condition eventPlayer.selected_hero_list_number == null
    @Condition eventPlayer.selecting_HUD == false
    
    if eventPlayer.isFiringPrimaryFire() and eventPlayer.isHoldingButton(Button.CROUCH):
        eventPlayer.setGravity(false)
        eventPlayer.applyImpulse(eventPlayer.getFacingDirection(), 2, Relativity.TO_WORLD, Impulse.INCORPORATE_CONTRARY_MOTION)
    else:
        eventPlayer.setGravity(100)
    wait(0.05)
    if RULE_CONDITION:
        goto RULE_START


rule "Xuanzang Sanzang faster melee":
    @Event eachPlayer
    @Hero ashe
    @Condition eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) == true
    @Condition (eventPlayer.hasStatusEffect(Status.FROZEN) or eventPlayer.hasStatusEffect(Status.ROOTED) or eventPlayer.hasStatusEffect(Status.STUNNED) or eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN)) == false
    @Condition eventPlayer.selected_hero_list_number == 1
    @Condition eventPlayer.selecting_HUD == false
    
    if not eventPlayer.Is_Using_Ultimate:
        eventPlayer.forceButtonPress(Button.MELEE)
        wait(0.6)
        eventPlayer.cancelPrimaryAction()
        eventPlayer.setAbilityCooldown(Button.MELEE, false)
        if RULE_CONDITION:
            goto RULE_START
    else:
        eventPlayer.forceButtonPress(Button.MELEE)
        eventPlayer.setAbilityCooldown(Button.MELEE, false)
        wait(0.08)
        eventPlayer.cancelPrimaryAction()
        if RULE_CONDITION:
            goto RULE_START


rule "Xuanzang Sanzang ab 1 (pull people)":
    @Event eachPlayer
    @Hero ashe
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_1) == 0
    @Condition eventPlayer.selected_hero_list_number == 1
    @Condition eventPlayer.selecting_HUD == false
    @Condition eventPlayer.isAlive() == true
    
    eventPlayer.N = eventPlayer.getPosition() + vect(false, 8, false)
    eventPlayer.M = getPlayersInRadius(eventPlayer.N, 20, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)
    smallMessage(eventPlayer.M, "{0} {1} towards me".format(heroIcon(Hero.ASHE), eventPlayer))
    eventPlayer.M.setStatusEffect(eventPlayer, Status.ROOTED, 1)
    for eventPlayer.for_loop in range(0, len(eventPlayer.M), true):
        eventPlayer.M[eventPlayer.for_loop].applyImpulse(directionTowards(eventPlayer.M[eventPlayer.for_loop], eventPlayer.getEyePosition()), 20, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
    wait(0.3)
    eventPlayer.setAbilityCooldown(Button.ABILITY_1, 13)


def xuanzang_ULT_loop():
    @Name "Xuanzang Sanzang ultimate loop (subroutine)"
    
    eventPlayer.Z = getPlayersInRadius(eventPlayer.chase_Variable_at_rate, 6, eventPlayer.getTeam(), LosCheck.OFF)
    eventPlayer.G = getPlayersInRadius(eventPlayer.chase_Variable_at_rate, 6, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)
    eventPlayer.Z.is_player_anchored = 0
    eventPlayer.G.Is_Using_Ultimate = false
    eventPlayer.Z.detach()
    eventPlayer.Z.stopForcingPosition()
    eventPlayer.G.clearStatusEffect(Status.UNKILLABLE)
    eventPlayer.G.clearStatusEffect(Status.INVINCIBLE)
    eventPlayer.G.clearStatusEffect(Status.PHASED_OUT)
    eventPlayer.Z.setStatusEffect(null, Status.FROZEN, 9999)
    eventPlayer.Z.clearStatusEffect(Status.FROZEN)
    eventPlayer.Z.startHoT(eventPlayer, 2, 85)
    eventPlayer.Z.setStatusEffect(null, Status.INVINCIBLE, 1.5)
    eventPlayer.G.cancelPrimaryAction()
    wait(0.1)
    if not (eventPlayer.isInSpawnRoom() or eventPlayer.Is_Using_Ultimate or eventPlayer.chase_Variable_at_rate == eventPlayer.raycast_hit_position):
        goto RULE_START


rule "Gilles ab2 create effects (L) || Sherlock Holmes LifeSteal || Gordon AA ability":
    @Event eachPlayer
    @Hero symmetra
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0
    
    if eventPlayer.selected_hero_list_number == 3:
        FoV_and_LoS_player_select()
        if not entityExists(eventPlayer.FoV_and_lineOFsight_player):
            goto lbl_0
        eventPlayer.FoV_and_lineOFsight_player.startDoT(null, 3, 60)
        eventPlayer.startHoT(eventPlayer, 3, 40)
        eventPlayer.FoV_and_lineOFsight_player.setAimSpeed(1000)
        createEffect(getAllPlayers(), Effect.CASSIDY_FLASHBANG_STUNNED, Color.WHITE, eventPlayer.FoV_and_lineOFsight_player.getEyePosition(), 2, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[1] = getLastCreatedEntity()
        wait(1.25)
        eventPlayer.FoV_and_lineOFsight_player.setAimSpeed(100)
        lbl_0:
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 12)
        destroyEffect(eventPlayer.Effects[1])
    elif eventPlayer.selected_hero_list_number == null:
        eventPlayer.C = true
        async(gilles_de_rais_tentacle_loop, AsyncBehavior.RESTART)
        for eventPlayer.for_loop in range(0, 4, true):
            raycast_hit_position2()
            eventPlayer.T[eventPlayer.for_loop] = eventPlayer.raycast_hit_position2
            createEffect(getAllPlayers(), Effect.RING, Color.PURPLE, eventPlayer.T[eventPlayer.for_loop], 7, EffectReeval.NONE)
            eventPlayer.Effects[eventPlayer.for_loop] = getLastCreatedEntity()
            createIcon(getAllPlayers(), eventPlayer.T[eventPlayer.for_loop], Icon.WARNING, IconReeval.NONE, Color.WHITE, false)
            eventPlayer.Effects[8 - eventPlayer.for_loop] = getLastCreatedEntity()
            wait(0.6)
        eventPlayer.delay_tagger = true
        eventPlayer.gilles_de_rais_damage = 45
        waitUntil(eventPlayer.isInSpawnRoom() or not eventPlayer.C or eventPlayer.isDead(), 9999)
        smallMessage(eventPlayer, "Tentacles disabled")
        eventPlayer.delay_tagger = false
        eventPlayer.L = []
        eventPlayer.C = false
        for eventPlayer.for_loop in range(0, 9, true):
            destroyIcon(eventPlayer.Effects[eventPlayer.for_loop])
            destroyEffect(eventPlayer.Effects[eventPlayer.for_loop])
        eventPlayer.T = null
        eventPlayer.gilles_de_rais_damage = 1
    elif eventPlayer.selected_hero_list_number == 2 and eventPlayer.isOnGround():
        eventPlayer.X = eventPlayer.getPosition()
        createEffect(getAllPlayers(), Effect.LIGHT_SHAFT, Color.BLUE, eventPlayer.X, 20, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[11] = getLastCreatedEntity()
        createInWorldText(getAllPlayers(), "[NO JUMPING AREA]", eventPlayer.X + vect(0, 1.5, 0), 3, Clip.NONE, WorldTextReeval.VISIBILITY_POSITION_AND_STRING, Color.SKY_BLUE, SpecVisibility.DEFAULT)
        eventPlayer.Effects[12] = getLastCreatedText()
        async(Symmetra_AA_mine, AsyncBehavior.RESTART)
        waitUntil(eventPlayer.isDead() or eventPlayer.isInSpawnRoom(), 10)
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 10)
        destroyEffect(eventPlayer.Effects[11])
        destroyInWorldText(eventPlayer.Effects[12])
        eventPlayer.X = null


def gilles_de_rais_tentacle_loop():
    @Name "Ab2 Gilles Tentacles (T,C)"
    
    for eventPlayer.for_loop_2 in range(4):
        damage(getPlayersInRadius(eventPlayer.T[eventPlayer.for_loop_2], 7, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), null, eventPlayer.gilles_de_rais_damage)
    wait(0.55)
    if eventPlayer.C:
        goto RULE_START


rule "Moctezuma ab1 melee":
    @Event eachPlayer
    @Hero roadhog
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_1) == 0
    @Condition eventPlayer.selected_hero_list_number == 1
    @Condition eventPlayer.selecting_HUD == false
    
    eventPlayer.setAbilityCooldown(Button.ABILITY_1, 6)
    eventPlayer.moctezuma_ab1_active = true
    eventPlayer.moctezuma_attack = true
    eventPlayer.setStatusEffect(null, Status.FROZEN, 0.016)
    wait(0.1)
    eventPlayer.forceButtonPress(Button.MELEE)
    wait(0.5)
    eventPlayer.moctezuma_attack = false
    wait(3)
    eventPlayer.moctezuma_ab1_active = false


rule "Charlles ab2 1/2":
    @Event eachPlayer
    @Hero orisa
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0
    @Condition (eventPlayer.hasStatusEffect(Status.FROZEN) or eventPlayer.hasStatusEffect(Status.STUNNED) or eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN)) == false
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.selected_hero_list_number == null
    @Condition eventPlayer.selecting_HUD == false
    
    eventPlayer.setAbilityCooldown(Button.ABILITY_2, 12)
    eventPlayer.L = eventPlayer.getPosition()
    eventPlayer.B = true
    createEffect(getAllPlayers(), Effect.SPHERE, Color.ORANGE, eventPlayer.L, 7, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.Effects[true] = getLastCreatedEntity()
    async(charles_de_gaulle_ab2_loop, AsyncBehavior.RESTART)
    wait(5)
    eventPlayer.L += vect(false, 999, false)
    eventPlayer.B = false
    destroyEffect(eventPlayer.Effects[true])


def charles_de_gaulle_ab2_loop():
    @Name "Charlles ab2  2/2 (if outsider)"
    
    eventPlayer.V = getPlayersInRadius(eventPlayer.L, 7, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)
    eventPlayer.V.setStatusEffect(null, Status.ROOTED, 0.2)
    for eventPlayer.for_loop in range(0, len(eventPlayer.V), true):
        eventPlayer.V[eventPlayer.for_loop].applyImpulse(directionTowards(eventPlayer.L.getPosition(), eventPlayer.V[eventPlayer.for_loop]) * vect(true, false, true), 10, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
        eventPlayer.V[eventPlayer.for_loop].applyImpulse(directionTowards(eventPlayer.L.getPosition(), eventPlayer.V[eventPlayer.for_loop]) * vect(true, false, true), 10, Relativity.TO_WORLD, Impulse.INCORPORATE_CONTRARY_MOTION)
    wait()
    if eventPlayer.B:
        goto RULE_START


rule "Charlles  sec.fire":
    @Event eachPlayer
    @Hero orisa
    @Condition eventPlayer.isHoldingButton(Button.SECONDARY_FIRE) == true
    @Condition (eventPlayer.hasStatusEffect(Status.FROZEN) or eventPlayer.hasStatusEffect(Status.STUNNED) or eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN)) == false
    @Condition eventPlayer.getAbilityCooldown(Button.SECONDARY_FIRE) == null
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.selected_hero_list_number == null
    @Condition eventPlayer.selecting_HUD == false
    
    eventPlayer.color = Color.WHITE
    eventPlayer.setAbilityCooldown(Button.SECONDARY_FIRE, 11)
    eventPlayer.M = true
    eventPlayer.N = eventPlayer.getPosition()
    createEffect(getAllPlayers(), Effect.RING, Color.GREEN, eventPlayer.N, 5, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.Effects[3] = getLastCreatedEntity()
    createIcon(getAllPlayers(), eventPlayer.N, Icon.WARNING, IconReeval.VISIBILITY_POSITION_AND_COLOR, eventPlayer.color, false)
    eventPlayer.Effects[4] = getLastCreatedEntity()
    wait(1.25)
    eventPlayer.color = Color.RED
    waitUntil(getPlayersInRadius(eventPlayer.N, 6, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES) >= 1, 6)
    eventPlayer.M = getPlayersInRadius(eventPlayer.N, 6, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES)
    eventPlayer.M.applyImpulse((directionTowards(eventPlayer.M.last(), eventPlayer.N - vect(false, 2.5, false))) * -1, 25, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
    damage(eventPlayer.M, eventPlayer, 280)
    playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.GREEN, eventPlayer.N, 1)
    playEffect(getAllPlayers(), DynamicEffect.EXPLOSION_SOUND, Color.GREEN, eventPlayer.N, 100)
    eventPlayer.M.setStatusEffect(eventPlayer, Status.KNOCKED_DOWN, 1.25)
    destroyEffect(eventPlayer.Effects[3])
    destroyIcon(eventPlayer.Effects[4])
    eventPlayer.M = false
    eventPlayer.N = vect(123, -222, false)


rule "(Kinkku) Symmetra ult wall":
    @Event eachPlayer
    @Hero symmetra
    @Condition eventPlayer.getCurrentHero() == Hero.SYMMETRA
    @Condition eventPlayer.isUsingUltimate() == true
    @Condition eventPlayer.U == false
    @Condition eventPlayer.selected_hero_list_number == 1
    
    eventPlayer.D = [player for player in getAllPlayers() if ((eventPlayer.R + eventPlayer.S).x - eventPlayer.R.x) * (player.getPosition().z - eventPlayer.R.z) - ((player.getPosition().x - eventPlayer.R.x) * ((eventPlayer.R + eventPlayer.S).z - eventPlayer.R.z)) < 2.5 and ((eventPlayer.R + eventPlayer.S).x - eventPlayer.R.x) * (player.getPosition().z - eventPlayer.R.z) - ((player.getPosition().x - eventPlayer.R.getPosition().x) * ((eventPlayer.R + eventPlayer.S).z - eventPlayer.R.z)) > 0]
    eventPlayer.E = [player for player in getAllPlayers() if ((eventPlayer.R + eventPlayer.S).x - eventPlayer.R.x) * (player.getPosition().z - eventPlayer.R.z) - ((player.getPosition().x - eventPlayer.R.x) * ((eventPlayer.R + eventPlayer.S).z - eventPlayer.R.z)) < 0 and ((eventPlayer.R + eventPlayer.S).x - eventPlayer.R.x) * (player.getPosition().z - eventPlayer.R.z) - ((player.getPosition().x - eventPlayer.R.x) * ((eventPlayer.R + eventPlayer.S).z - eventPlayer.R.z)) > -2.5]
    eventPlayer.E.setStatusEffect(null, Status.ROOTED, 0.6)
    eventPlayer.D.setStatusEffect(null, Status.ROOTED, 0.6)
    eventPlayer.D.applyImpulse(vect(eventPlayer.S.x * -1, false, eventPlayer.S.x), 25, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
    eventPlayer.E.applyImpulse(vect(eventPlayer.S.z, false, eventPlayer.S.x * -1), 25, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
    wait(0.025)
    if RULE_CONDITION:
        goto RULE_START


rule "(Kinkku) Symmetra ult second":
    @Event eachPlayer
    @Hero symmetra
    @Condition eventPlayer.isHoldingButton(Button.ULTIMATE) == true
    @Condition eventPlayer.getUltCharge() == 100
    @Condition eventPlayer.U == false
    @Condition eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) == false
    @Condition eventPlayer.selected_hero_list_number == 1
    @Condition eventPlayer.getCurrentHero() == Hero.SYMMETRA
    
    eventPlayer.setStatusEffect(null, Status.ROOTED, 1.5)
    eventPlayer.disallowButton(Button.PRIMARY_FIRE)
    eventPlayer.allowButton(Button.ULTIMATE)
    eventPlayer.forceButtonPress(Button.ULTIMATE)
    #was 0.018
    wait(0.018)
    eventPlayer.disallowButton(Button.ULTIMATE)
    #was 0.08
    wait(0.08)
    eventPlayer.allowButton(Button.ULTIMATE)
    eventPlayer.forceButtonPress(Button.ULTIMATE)
    #was 0.018
    wait(0.018)
    eventPlayer.disallowButton(Button.ULTIMATE)
    #was 0.08
    wait(0.08)
    eventPlayer.allowButton(Button.PRIMARY_FIRE)
    eventPlayer.forceButtonPress(Button.PRIMARY_FIRE)


rule "D Trump damage beam":
    @Event eachPlayer
    @Hero symmetra
    @Condition eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) == true
    @Condition (eventPlayer.hasStatusEffect(Status.FROZEN) or eventPlayer.hasStatusEffect(Status.STUNNED) or eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN)) == false
    @Condition eventPlayer.U == true
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.selected_hero_list_number == 1
    @Condition eventPlayer.selecting_HUD == false
    
    eventPlayer.Donald_chaser1 = eventPlayer.raycast_hit_position.getPosition()
    chase(eventPlayer.Donald_chaser1, eventPlayer.I, duration=eventPlayer.trump_wait_middle, ChaseReeval.DESTINATION_AND_DURATION)
    waitUntil(eventPlayer.Donald_chaser1 == eventPlayer.I or isAssemblingHeroes() or getPlayersInRadius(eventPlayer.Donald_chaser1, 2.65, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES_AND_ENEMY_BARRIERS) >= 1, 99999)
    createBeam(getAllPlayers(), Beam.GOOD, eventPlayer.raycast_hit_position, eventPlayer.Donald_chaser1, Color.RED, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.Effects[true] = getLastCreatedEntity()
    damage(getPlayersInRadius(eventPlayer.Donald_chaser1, 2.65, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES_AND_ENEMY_BARRIERS), eventPlayer, 33)
    playEffect(getAllPlayers(), DynamicEffect.GOOD_EXPLOSION, Color.WHITE, eventPlayer.Donald_chaser1, 1)
    playEffect(getAllPlayers(), DynamicEffect.EXPLOSION_SOUND, Color.WHITE, eventPlayer.Donald_chaser1, 70)
    stopChasingVariable(eventPlayer.Donald_chaser1)
    wait(0.05)
    destroyEffect(eventPlayer.Effects[true])
    wait(eventPlayer.trump_wait_time)
    if RULE_CONDITION:
        goto RULE_START


rule "D trump stun camera damage":
    @Event eachPlayer
    @Hero symmetra
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition (eventPlayer.hasStatusEffect(Status.FROZEN) or eventPlayer.hasStatusEffect(Status.STUNNED) or eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN)) == false
    @Condition eventPlayer.U == true
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.selected_hero_list_number == 1
    @Condition eventPlayer.selecting_HUD == false
    
    eventPlayer.setAbilityCooldown(Button.ABILITY_2, 3.15)
    eventPlayer.Donald_chaser2 = eventPlayer.raycast_hit_position.getPosition()
    chase(eventPlayer.Donald_chaser2, eventPlayer.I, duration=0.05, ChaseReeval.DESTINATION_AND_DURATION)
    waitUntil(eventPlayer.Donald_chaser2 == eventPlayer.I or isAssemblingHeroes() or getPlayersInRadius(eventPlayer.Donald_chaser2, 5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES_AND_ENEMY_BARRIERS) >= 1, 99999)
    createBeam(getAllPlayers(), Beam.GOOD, eventPlayer.raycast_hit_position, eventPlayer.Donald_chaser2, Color.TURQUOISE, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.Effects[2] = getLastCreatedEntity()
    playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.ORANGE, eventPlayer.Donald_chaser2, 2.5)
    damage(getPlayersInRadius(eventPlayer.Donald_chaser2, 5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES_AND_ENEMY_BARRIERS), eventPlayer, 110)
    getPlayersInRadius(eventPlayer.Donald_chaser2, 5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF).setStatusEffect(null, Status.KNOCKED_DOWN, true)
    getPlayersInRadius(eventPlayer.Donald_chaser2, 5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES).applyImpulse(Vector.UP + Vector.BACKWARD, 20, Relativity.TO_PLAYER, Impulse.CANCEL_CONTRARY_MOTION)
    playEffect(getAllPlayers(), DynamicEffect.EXPLOSION_SOUND, Color.WHITE, eventPlayer.Donald_chaser2, 70)
    stopChasingVariable(eventPlayer.Donald_chaser2)
    wait(0.05)
    destroyEffect(eventPlayer.Effects[2])
    wait(4)
    smallMessage(eventPlayer, "Stun beam ready")


rule "D Trump facing direction camera loop":
    @Event eachPlayer
    @Hero symmetra
    @Condition eventPlayer.U == true
    @Condition eventPlayer.selected_hero_list_number == 1
    @Condition eventPlayer.selecting_HUD == false
    
    eventPlayer.I = raycast(eventPlayer.raycast_hit_position, eventPlayer.raycast_hit_position + eventPlayer.getFacingDirection() * 150, getPlayers(getOppositeTeam(eventPlayer.getTeam())), eventPlayer, true).getHitPosition()
    wait()
    if RULE_CONDITION:
        goto RULE_START


rule "D Trump ab1 cam activation || Gordon Freeman Sym No Clip activate":
    @Event eachPlayer
    @Hero symmetra
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.isInSpawnRoom() == false
    
    if eventPlayer.selected_hero_list_number == 1:
        waitUntil(eventPlayer.isHoldingButton(Button.ABILITY_1) or eventPlayer.isInSpawnRoom(), 99999)
        if eventPlayer.isInSpawnRoom():
            goto lbl_0
        eventPlayer.moira_dummy = eventPlayer.getFacingDirection()
        raycast_hit_position1()
        eventPlayer.startCamera(eventPlayer.raycast_hit_position, eventPlayer.raycast_hit_position + eventPlayer.getFacingDirection() * 50, 50)
        eventPlayer.setFacing(eventPlayer.getFacingDirection() * -1, Relativity.TO_WORLD)
        createIcon(getAllPlayers().exclude(eventPlayer), eventPlayer.raycast_hit_position, Icon.EYE, IconReeval.VISIBILITY_AND_POSITION, Color.SKY_BLUE, true)
        eventPlayer.Effects[6] = getLastCreatedEntity()
        createBeam(getAllPlayers().exclude(eventPlayer), Beam.BAD, eventPlayer.raycast_hit_position, eventPlayer, Color.SKY_BLUE, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[7] = getLastCreatedEntity()
        create_dummy_of_EventPlayer()
        eventPlayer.Solomon_pillar_array = getLastCreatedEntity()
        smallMessage(eventPlayer, "Active")
        eventPlayer.U = true
        eventPlayer.setStatusEffect(null, Status.ROOTED, 9999)
        eventPlayer.setAimSpeed(200)
        createEffect(getAllPlayers(), Effect.SPHERE, Color.ORANGE, eventPlayer.raycast_hit_position, 0.45, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[3] = getLastCreatedEntity()
        wait(0.265)
        eventPlayer.Solomon_pillar_array.setHealth(eventPlayer.Solomon_pillar_array.getMaxHealth() * eventPlayer.H)
        eventPlayer.Solomon_pillar_array.startForcingPosition(eventPlayer.raycast_hit_position, true)
        waitUntil(eventPlayer.isHoldingButton(Button.ABILITY_1) or not entityExists(eventPlayer.Solomon_pillar_array) or eventPlayer.isInSpawnRoom() or eventPlayer.isDead(), 99999)
        lbl_0:
        destroyEffect(eventPlayer.Effects[3])
        destroyIcon(eventPlayer.Effects[6])
        destroyEffect(eventPlayer.Effects[7])
        eventPlayer.setAimSpeed(100)
        eventPlayer.clearStatusEffect(Status.ROOTED)
        smallMessage(eventPlayer, "Not active")
        eventPlayer.U = false
        eventPlayer.stopCamera()
        eventPlayer.setFacing(eventPlayer.moira_dummy, Relativity.TO_WORLD)
        if not entityExists(eventPlayer.Solomon_pillar_array):
            waitUntil(eventPlayer.isInSpawnRoom(), 15)
            smallMessage(eventPlayer, "Camera ready")
            eventPlayer.H = 1
        else:
            eventPlayer.H = eventPlayer.Solomon_pillar_array.getNormalizedHealth()
        kill(eventPlayer.Solomon_pillar_array, null)
        wait(0.15)
        if eventPlayer.isAlive() and not eventPlayer.isInSpawnRoom():
            goto RULE_START
    elif eventPlayer.selected_hero_list_number == 2:
        eventPlayer.setMoveSpeed(330)
        eventPlayer.disableEnvironmentCollision(true)
        eventPlayer.disablePlayerCollision()
        eventPlayer.N = true
        async(float_player_above_level, AsyncBehavior.RESTART)
        wait(0.3)
        waitUntil(eventPlayer.isHoldingButton(Button.ABILITY_1) or eventPlayer.isDead() or eventPlayer.isInSpawnRoom(), 4)
        eventPlayer.setAbilityCharge(Button.ABILITY_1, false)
        eventPlayer.N = false
        eventPlayer.enableEnvironmentCollision()
        eventPlayer.enablePlayerCollision()
        eventPlayer.setMoveSpeed(145)
        wait(10)
        smallMessage(eventPlayer, "No-clip ready")


rule "The Old Man of the Mountain ultimate Hassan Sigma":
    @Event playerDealtDamage
    @Hero sigma
    @Condition eventAbility == Button.ULTIMATE
    @Condition eventPlayer.selected_hero_list_number == 1
    @Condition eventPlayer.selecting_HUD == false
    
    waitUntil(eventPlayer.isInSpawnRoom() or not entityExists(eventPlayer), 8)
    eventPlayer.A.setMaxHealth(180)
    eventPlayer.A = []


rule "The Old Man of the Mountain ultimate":
    @Event eachPlayer
    @Hero sigma
    @Condition eventPlayer.isUsingUltimate() == true
    @Condition eventPlayer.selected_hero_list_number == 1
    @Condition eventPlayer.selecting_HUD == false
    
    waitUntil(eventPlayer.isInSpawnRoom() or not entityExists(eventPlayer), 6)
    eventPlayer.setUltCharge(false)


rule "old man of mountain ab2 coordown":
    @Event eachPlayer
    @Hero sigma
    @Condition eventPlayer.isUsingAbility2() == true
    @Condition eventPlayer.selected_hero_list_number == 1
    @Condition eventPlayer.selecting_HUD == false
    
    wait(2)
    eventPlayer.setAbilityCooldown(Button.ABILITY_2, 4)


rule "Ashe Caster Gilgamesh ab1 1/2":
    @Event eachPlayer
    @Hero ashe
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_1) == 0
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.selected_hero_list_number == 2
    @Condition eventPlayer.selecting_HUD == false
    
    raycast_hit_position1()
    createEffect(getAllPlayers(), Effect.RING, Color.YELLOW, eventPlayer.raycast_hit_position, 12, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.Effects[true] = getLastCreatedEntity()
    eventPlayer.U = true
    async(caster_gilgamesh_ab1, AsyncBehavior.RESTART)
    waitUntil(eventPlayer.isInSpawnRoom(), 4)
    eventPlayer.U = false
    eventPlayer.setAbilityCooldown(Button.ABILITY_1, 16)
    destroyEffect(eventPlayer.Effects[true])


def caster_gilgamesh_ab1():
    @Name "Ashe Caster Gilgamesh ab1 2/2"
    
    eventPlayer.D = eventPlayer.raycast_hit_position + vect(random.randint(-6, 6), false, random.randint(-6, 6))
    eventPlayer.P = eventPlayer.raycast_hit_position + vect(false, 10, false)
    wait(0.05, Wait.ABORT_WHEN_FALSE)
    createBeam(getAllPlayers(), Beam.BAD, eventPlayer.raycast_hit_position + vect(false, 10, false), eventPlayer.D, Color.YELLOW, EffectReeval.NONE)
    eventPlayer.Effects[2] = getLastCreatedEntity()
    damage(getPlayersInRadius(eventPlayer.D, 3, Team.ALL, LosCheck.OFF).exclude(eventPlayer), eventPlayer, 100)
    playEffect(getAllPlayers(), DynamicEffect.GOOD_EXPLOSION, Color.YELLOW, eventPlayer.D, 3)
    playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.YELLOW, eventPlayer.D, 40)
    wait(0.08)
    destroyEffect(eventPlayer.Effects[2])
    wait(0.25)
    if eventPlayer.U:
        goto RULE_START


rule "Enkidu float (fly) Echo":
    @Event eachPlayer
    @Hero echo
    #chains variable
    @Condition eventPlayer.isHoldingButton(Button.SECONDARY_FIRE) == true
    @Condition eventPlayer.getAbilityCooldown(Button.SECONDARY_FIRE) == null
    @Condition (eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN) or eventPlayer.hasStatusEffect(Status.ASLEEP) or eventPlayer.hasStatusEffect(Status.FROZEN) or eventPlayer.hasStatusEffect(Status.ROOTED) or eventPlayer.hasStatusEffect(Status.STUNNED)) == false
    @Condition eventPlayer.selected_hero_list_number == null
    
    eventPlayer.setAbilityCooldown(Button.SECONDARY_FIRE, 6)
    eventPlayer.enkidu_float = true
    eventPlayer.applyImpulse(eventPlayer.getFacingDirection(), 30, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)


rule "Enkidu ab1 (forward chain) || Archangel Michael other thing":
    @Event eachPlayer
    @Hero echo
    @Condition (eventPlayer.isUsingAbility1() or eventPlayer.isHoldingButton(Button.ABILITY_1) and not eventPlayer.getAbilityCooldown(Button.ABILITY_1)) == true
    @Condition eventPlayer.isAlive() == true
    @Condition (eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN) or eventPlayer.hasStatusEffect(Status.FROZEN)) == false
    
    if eventPlayer.selected_hero_list_number == 0:
        eventPlayer.E = eventPlayer.getPosition()
        eventPlayer.D = raycast(eventPlayer.getEyePosition(), eventPlayer.getEyePosition() + eventPlayer.getFacingDirection() * 55, getAllPlayers(), eventPlayer, true).getHitPosition()
        chase(eventPlayer.E, eventPlayer.D, rate=200, ChaseReeval.DESTINATION_AND_RATE)
        createBeam(getAllPlayers(), Beam.OMNIC_SLICER, eventPlayer.E, eventPlayer.E, Color.AQUA, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[4] = getLastCreatedEntity()
        createBeam(getAllPlayers(), Beam.BRIGITTE_FLAIL_CHAIN, eventPlayer, eventPlayer.E, Color.YELLOW, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[5] = getLastCreatedEntity()
        #chains on
        async(enkidu_ab1_loop, AsyncBehavior.RESTART)
        waitUntil(eventPlayer.E.getPosition() == eventPlayer.D, 99999)
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 8.5)
        destroyEffect(eventPlayer.Effects[4])
        destroyEffect(eventPlayer.Effects[5])
        stopChasingVariable(eventPlayer.E)
        eventPlayer.E -= vect(false, 500, false)
    elif eventPlayer.selected_hero_list_number == 1:
        createEffect(getAllPlayers(), Effect.GOOD_AURA, Color.YELLOW, eventPlayer, 1, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[1] = getLastCreatedEntity()
        eventPlayer.disableEnvironmentCollision(true)
        while eventPlayer.isUsingAbility1():
            eventPlayer.B = [player for player in getPlayers(getOppositeTeam(eventPlayer.getTeam())) if isInLoS(player, eventPlayer, BarrierLos.BLOCKED_BY_ENEMY_BARRIERS) and player.isInViewAngle(eventPlayer, 50)]
            damage(eventPlayer.B, eventPlayer, 11)
            wait(0.1)
        eventPlayer.enableEnvironmentCollision()
        destroyEffect(eventPlayer.Effects[1])


def enkidu_ab1_loop():
    @Name "Enkidu ab1 (damage)"
    
    waitUntil(getPlayersInRadius(eventPlayer.E, 3, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES) >= 1, 99999)
    damage(getPlayersInRadius(eventPlayer.E, 3, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, 115)
    wait(0.1)
    if eventPlayer.E != eventPlayer.D:
        goto RULE_START


rule "Enkidu ab2 (chain barrage)":
    @Event eachPlayer
    @Hero echo
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.selected_hero_list_number == null
    @Condition (eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN) or eventPlayer.hasStatusEffect(Status.FROZEN)) == false
    
    for eventPlayer.for_loop_2 in range(13):
        eventPlayer.G = eventPlayer.getPosition() + vect(0, 2, 0)
        eventPlayer.M = eventPlayer.G + worldVector(vect(random.uniform(-2, 2), random.uniform(-1.5, 1), 0), eventPlayer, Transform.ROTATION)
        createProjectile(Projectile.PHARAH_ROCKET, eventPlayer, eventPlayer.M, eventPlayer.getFacingDirection(), Relativity.TO_WORLD, ModifyHealth.DAMAGE, Team.ALL, 33, 0.6, 2, DynamicEffect.PHARAH_ROCKET_LAUNCHER_EXPLOSION, DynamicEffect.PHARAH_ROCKET_LAUNCHER_EXPLOSION_SOUND, 0, 12, 13, 0, 0, 0)
        wait(0.08)
        if eventPlayer.isDead():
            return
    eventPlayer.setAbilityCooldown(Button.ABILITY_2, 11)


rule "Saber Alter Genji excalibur ultimate 1/2":
    @Event eachPlayer
    @Hero genji
    @Condition eventPlayer.isUsingUltimate() == true
    @Condition eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) == true
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.selected_hero_list_number == null
    
    eventPlayer.Is_Using_Ultimate = true
    raycast_hit_position2()
    eventPlayer.Medusa_trap = eventPlayer.getPosition()
    createEffect(getAllPlayers(), Effect.SPHERE, Color.RED, updateEveryTick(eventPlayer.Medusa_trap), 4, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.Effects[5] = getLastCreatedEntity()
    chase(eventPlayer.Medusa_trap, eventPlayer.raycast_hit_position2, rate=25, ChaseReeval.DESTINATION_AND_RATE)
    waitUntil(eventPlayer.Medusa_trap == eventPlayer.raycast_hit_position2 or eventPlayer.isInSpawnRoom() or not eventPlayer.isUsingUltimate(), 8)
    destroyEffect(eventPlayer.Effects[5])
    stopChasingVariable(eventPlayer.Medusa_trap)
    playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.PURPLE, eventPlayer.raycast_hit_position2, 300)
    createEffect(getAllPlayers(), Effect.LIGHT_SHAFT, Color.PURPLE, eventPlayer.raycast_hit_position2, 10, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.Effects[3] = getLastCreatedEntity()
    createBeam(getAllPlayers(), Beam.MOIRA_COALESCENCE, eventPlayer.raycast_hit_position2 - vect(false, 14, false), eventPlayer.raycast_hit_position2 + vect(false, 100, false), Color.TEAM_2, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.Effects[4] = getLastCreatedEntity()
    wait(0.1)
    async(excalibur_morgan, AsyncBehavior.RESTART)
    waitUntil(eventPlayer.isInSpawnRoom() or not eventPlayer.isUsingUltimate(), 3)
    eventPlayer.setUltCharge(false)
    eventPlayer.Is_Using_Ultimate = false
    destroyEffect(eventPlayer.Effects[3])
    destroyEffect(eventPlayer.Effects[4])


def excalibur_morgan():
    @Name "Saber Alter Genji excalibur ultimate 2/2"
    
    eventPlayer.Q = [player for player in getLivingPlayers(Team.ALL) if distance(player.getPosition() * vect(1, 0, 1), eventPlayer.raycast_hit_position2 * vect(1, 0, 1)) <= 10]
    playEffect(getAllPlayers(), DynamicEffect.EXPLOSION_SOUND, Color.PURPLE, eventPlayer.raycast_hit_position2, 65)
    damage(eventPlayer.Q, eventPlayer, 23)
    wait(0.1)
    if eventPlayer.Is_Using_Ultimate:
        goto RULE_START


rule "saber genji allow primary fire":
    @Event eachPlayer
    @Hero genji
    @Condition eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) == true
    @Condition eventPlayer.selecting_HUD == false
    @Condition eventPlayer.selected_hero_list_number == null
    
    if eventPlayer.isUsingUltimate():
        eventPlayer.allowButton(Button.PRIMARY_FIRE)
    elif not eventPlayer.isUsingUltimate():
        eventPlayer.disallowButton(Button.PRIMARY_FIRE)


rule "saber genji ab2 wind gust || sasaki damage":
    @Event eachPlayer
    @Hero genji
    @Condition eventPlayer.isUsingAbility2() == true
    @Condition eventPlayer.selecting_HUD == false
    
    if eventPlayer.selected_hero_list_number == null:
        eventPlayer.setStatusEffect(null, Status.INVINCIBLE, true)
        eventPlayer.saber_wind_gust = eventPlayer.getPosition()
        eventPlayer.G = raycast(eventPlayer.getEyePosition(), eventPlayer.getEyePosition() + eventPlayer.getFacingDirection() * 35, null, eventPlayer, false).getHitPosition()
        chase(eventPlayer.saber_wind_gust, eventPlayer.G, rate=40, ChaseReeval.DESTINATION_AND_RATE)
        async(saber_alter_wind_gust, AsyncBehavior.RESTART)
        waitUntil(not eventPlayer.isUsingAbility2() or eventPlayer.saber_wind_gust == eventPlayer.G, 99999)
        stopChasingVariable(eventPlayer.saber_wind_gust)
        playEffect(getAllPlayers(), DynamicEffect.BAD_PICKUP_EFFECT, Color.SKY_BLUE, eventPlayer.saber_wind_gust, 6)
        playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.WHITE, eventPlayer.saber_wind_gust, 150)
        damage(getPlayersInRadius(eventPlayer.saber_wind_gust, 5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, 55)
        getPlayersInRadius(eventPlayer.saber_wind_gust, 5, Team.ALL, LosCheck.OFF).applyImpulse(Vector.UP, 17, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
        eventPlayer.saber_wind_gust = eventPlayer.getPosition() + vect(false, 600, false)
        eventPlayer.stopForcingPosition()
        wait(3)
    elif eventPlayer.selected_hero_list_number == 6:
        eventPlayer.setStatusEffect(eventPlayer, Status.UNKILLABLE, 6)
        waitUntil(not eventPlayer.isUsingAbility2(), 99999)
        eventPlayer.clearStatusEffect(Status.UNKILLABLE)
    elif eventPlayer.selected_hero_list_number == 2:
        damage([player for player in getPlayersInRadius(eventPlayer, 4, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES_AND_ENEMY_BARRIERS) if eventPlayer.isInViewAngle(player, 60) and isInLoS(eventPlayer, player, BarrierLos.BLOCKED_BY_ENEMY_BARRIERS)], eventPlayer, 15)
        wait(0.33)
        if RULE_CONDITION:
            goto RULE_START


def hassan_100_loop():
    @Name "Hassan 100 ult 2/3 (subroutine)"
    
    if not isInLoS(eventPlayer, eventPlayer.FoV_and_lineOFsight_player, BarrierLos.PASS_THROUGH_BARRIERS):
        goto lbl_0
    eventPlayer.FoV_and_lineOFsight_player.setStatusEffect(eventPlayer, Status.ROOTED, 3.6)
    for eventPlayer.for_loop in range(0, 4, true):
        createDummy(Hero.GENJI, eventPlayer.getTeam(), -1, eventPlayer.FoV_and_lineOFsight_player + vect(false, 3, false), Vector.DOWN)
        getLastCreatedEntity().solomon_master = eventPlayer
        eventPlayer.Solomon_pillar_array.append(getLastCreatedEntity())
        getLastCreatedEntity().setDamageDealt(295)
        wait(0.15)
        getLastCreatedEntity().forceButtonPress(Button.ABILITY_1)
        wait(0.6)
        lbl_0:
        destroyDummy(eventPlayer.getTeam(), getLastCreatedEntity().getSlot())
    waitUntil(not eventPlayer.Is_Using_Ultimate, 99999)
    return


rule "Hassan 100 ult 3/3":
    @Event eachPlayer
    @Hero genji
    @Condition eventPlayer.isDummy() == true
    @Condition eventPlayer.hasSpawned() == true
    
    eventPlayer.setFacing(Vector.DOWN, Relativity.TO_WORLD)


def Bedivere_ult():
    @Name "Bedivere (refresh dash subroutine)"
    
    eventPlayer.setAbilityCooldown(Button.ABILITY_1, 0)
    wait(0.111)
    if eventPlayer.isUsingUltimate():
        goto RULE_START


def sieg_ab2():
    @Name "Siegfried  ab2 subroutine"
    
    raycast_hit_position2()
    damage(getPlayersInRadius(eventPlayer.raycast_hit_position2, 2, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, 15)
    playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.SKY_BLUE, eventPlayer.raycast_hit_position2, 0.5)
    wait(0.1)
    if eventPlayer.B:
        goto RULE_START


def mordred_ultimate_damage_loop():
    @Name "mordred lighting beam NP 2/2"
    
    damage(getPlayersInRadius(eventPlayer.Blood_arthur_1, 5, Team.ALL, LosCheck.OFF).exclude(eventPlayer), eventPlayer, 100)
    damage(getPlayersInRadius(eventPlayer.Blood_arthur_2, 5, Team.ALL, LosCheck.OFF).exclude(eventPlayer), eventPlayer, 100)
    damage(getPlayersInRadius(eventPlayer.Blood_arthur_3, 5, Team.ALL, LosCheck.OFF).exclude(eventPlayer), eventPlayer, 100)
    damage(getPlayersInRadius(eventPlayer.Blood_arthur_4, 5, Team.ALL, LosCheck.OFF).exclude(eventPlayer), eventPlayer, 100)
    damage(getPlayersInRadius(eventPlayer.Blood_arthur_5, 5, Team.ALL, LosCheck.OFF).exclude(eventPlayer), eventPlayer, 100)
    wait(0.08)
    if eventPlayer.Is_Using_Ultimate:
        goto RULE_START


rule "Lanling escape the look":
    @Event eachPlayer
    @Condition eventPlayer in eventPlayer.Lanling_master.Lanling_array == true
    @Condition distance(eventPlayer, eventPlayer.Lanling_master) >= 7
    
    eventPlayer.stopFacing()


rule "Genji ab1":
    @Event eachPlayer
    @Hero genji
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.isInSpawnRoom() == false
    
    if eventPlayer.selected_hero_list_number == null:
        if not (eventPlayer.hasStatusEffect(Status.FROZEN) or eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN) or eventPlayer.hasStatusEffect(Status.STUNNED)):
            eventPlayer.applyImpulse(worldVector(eventPlayer.getThrottle(), eventPlayer, Transform.ROTATION) + vect(0, 0.25, 0), 31, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
            wait(3)
    elif eventPlayer.selected_hero_list_number == 2 and eventPlayer.getAbilityCooldown(Button.ABILITY_1) == 0:
        eventPlayer.D = ([player for player in getPlayersInRadius(eventPlayer, 8, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF) if player.isAlive() and entityExists(player)])[0]
        if not entityExists(eventPlayer.D):
            goto lbl_0
        eventPlayer.attachTo(eventPlayer.D, vect(0, 0.85, 0))
        eventPlayer.setFacing(directionTowards(eventPlayer, eventPlayer.D), Relativity.TO_WORLD)
        wait(0.05)
        eventPlayer.stopFacing()
        eventPlayer.detach()
        lbl_0:
        eventPlayer.allowButton(Button.ABILITY_1)
        eventPlayer.forceButtonPress(Button.ABILITY_1)
        eventPlayer.disallowButton(Button.ABILITY_1)
        wait(2)
    elif not eventPlayer.isUsingUltimate() and eventPlayer.selected_hero_list_number == 3 and eventPlayer.getAbilityCooldown(Button.ABILITY_1) == null and eventPlayer.isAlive() and eventPlayer.hokusai_check_teleport == false:
        eventPlayer.Q = raycast(eventPlayer.getEyePosition(), eventPlayer.getEyePosition() + eventPlayer.getFacingDirection() * 20, getAllPlayers(), eventPlayer, true).getHitPosition()
        playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.BLUE, eventPlayer.Q, 100)
        playEffect(getAllPlayers(), DynamicEffect.GOOD_PICKUP_EFFECT, Color.BLUE, eventPlayer.getPosition(), 1)
        playEffect(getAllPlayers(), DynamicEffect.GOOD_PICKUP_EFFECT, Color.BLUE, eventPlayer.Q, 1)
        wait(0.4)
        __skipIf__(eventPlayer.hokusai_check_teleport == true, true)
        eventPlayer.teleport(eventPlayer.Q + vect(0, 0.5, 0))
        wait(5)
        smallMessage(eventPlayer, "Teleport dash ready")
    elif eventPlayer.selected_hero_list_number == 8 and eventPlayer.Nobunaga_curse == false:
        eventPlayer.disallowButton(Button.JUMP)
        eventPlayer.setStatusEffect(null, Status.ROOTED, 0.4)
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.RED, eventPlayer + vect(false, true, false), 3)
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION_SOUND, Color.RED, eventPlayer, 80)
        wait(0.45)
        eventPlayer.allowButton(Button.ABILITY_1)
        eventPlayer.forceButtonPress(Button.ABILITY_1)
        wait(0.7)
        eventPlayer.disallowButton(Button.ABILITY_1)
        eventPlayer.allowButton(Button.JUMP)
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 7)
    elif eventPlayer.selected_hero_list_number == 10 and eventPlayer.isUsingAbility1():
        waitUntil(not eventPlayer.isUsingAbility1(), 99999)
        eventPlayer.setDamageReceived(35)
        eventPlayer.playerSpeed[false] += 95
        waitUntil(eventPlayer.isDead() or eventPlayer.isInSpawnRoom(), 1.5)
        eventPlayer.playerSpeed[false] -= 95
        eventPlayer.setDamageReceived(70)


rule "Genji ab2":
    @Event eachPlayer
    @Hero genji
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.isInSpawnRoom() == false
    
    if eventPlayer.selected_hero_list_number == 1 and eventPlayer.isUsingAbility2():
        destroy_nameONplayer()
        eventPlayer.applyImpulse(Vector.UP, 4.6, Relativity.TO_PLAYER, Impulse.CANCEL_CONTRARY_MOTION)
        eventPlayer.applyImpulse(Vector.BACKWARD, 560, Relativity.TO_PLAYER, Impulse.CANCEL_CONTRARY_MOTION)
        eventPlayer.setInvisibility(Invis.ENEMIES)
        waitUntil(isAssemblingHeroes(), 3)
        eventPlayer.setInvisibility(Invis.NONE)
        create_nameONplayer()
    elif eventPlayer.getAbilityCooldown(Button.ABILITY_2) == null and eventPlayer.selected_hero_list_number == 3 and (not eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN) or not eventPlayer.hasStatusEffect(Status.FROZEN) or not eventPlayer.hasStatusEffect(Status.HACKED) or not eventPlayer.hasStatusEffect(Status.ASLEEP) or not eventPlayer.hasStatusEffect(Status.STUNNED)):
        playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.BLUE, eventPlayer, 100)
        playEffect(getAllPlayers(), DynamicEffect.GOOD_PICKUP_EFFECT, Color.BLUE, eventPlayer.getPosition(), 1)
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 6.4)
        eventPlayer.hokusai_check_teleport = true
        eventPlayer.attachTo([i for i in eventPlayer.getPlayerClosestToReticle(getOppositeTeam(eventPlayer.getTeam())) if entityExists(i) and not i.isInSpawnRoom()], vect(false, 1.5, -2))
        wait(0.15)
        eventPlayer.detach()
        eventPlayer.setFacing(directionTowards(eventPlayer, [i for i in getClosestPlayer(eventPlayer, getOppositeTeam(eventPlayer.getTeam())) if entityExists(i)]), Relativity.TO_WORLD)
        waitUntil(eventPlayer.isInSpawnRoom(), 2.25)
        eventPlayer.hokusai_check_teleport = false
    elif eventPlayer.selected_hero_list_number == 5:
        if eventPlayer.G == 1:
            playEffect(getAllPlayers(), DynamicEffect.GOOD_PICKUP_EFFECT, Color.RED, eventPlayer, 1)
            smallMessage(eventPlayer, "Fire style")
            eventPlayer.G = 2
        elif eventPlayer.G == 2:
            playEffect(getAllPlayers(), DynamicEffect.GOOD_PICKUP_EFFECT, Color.SKY_BLUE, eventPlayer, 1)
            smallMessage(eventPlayer, "Ice style")
            eventPlayer.G = 1
    elif eventPlayer.isUsingAbility2() and eventPlayer.selected_hero_list_number == 7:
        eventPlayer.I = raycast(eventPlayer.getEyePosition(), eventPlayer.getEyePosition() + eventPlayer.getFacingDirection() * 150, getAllPlayers(), eventPlayer, true).getHitPosition()
        playEffect(getAllPlayers(), DynamicEffect.GOOD_EXPLOSION, Color.WHITE, eventPlayer.I, 3)
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.LIME_GREEN, eventPlayer.I, 3)
        playEffect(getAllPlayers(), DynamicEffect.GOOD_EXPLOSION, Color.GRAY, eventPlayer.I, 3)
        eventPlayer.Medusa_trap = [player for player in getPlayersInRadius(eventPlayer.I, 3, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES_AND_ENEMY_BARRIERS) if player.isMoving()]
        damage(eventPlayer.Medusa_trap, eventPlayer, 90)
        eventPlayer.Medusa_trap.setStatusEffect(eventPlayer, Status.STUNNED, 1.45)
    elif eventPlayer.getAbilityCooldown(Button.ABILITY_2) == null and eventPlayer.selected_hero_list_number == 8:
        FoV_and_LoS_player_select()
        if not entityExists(eventPlayer.FoV_and_lineOFsight_player):
            goto lbl_0
        startDamageModification(eventPlayer, eventPlayer.FoV_and_lineOFsight_player, 0, DamageReeval.RECEIVERS_DAMAGERS_AND_DMGPERCENT)
        eventPlayer.Q = getLastDamageModification()
        createEffect(eventPlayer.FoV_and_lineOFsight_player, Effect.BAPTISTE_IMMORTALITY_FIELD_PROTECTED, Color.BLUE, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[4] = getLastCreatedEntity()
        eventPlayer.stopAllDoT()
        eventPlayer.FoV_and_lineOFsight_player.startForcingOutlineFor(eventPlayer, true, Color.RED, OutlineVisibility.ALWAYS)
        waitUntil(eventPlayer.isDead() or eventPlayer.isInSpawnRoom(), 3)
        stopDamageModification(eventPlayer.Q)
        destroyEffect(eventPlayer.Effects[4])
        eventPlayer.FoV_and_lineOFsight_player.stopForcingOutlineFor(eventPlayer)
        eventPlayer.FoV_and_lineOFsight_player = null
        lbl_0:
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 7)
    elif eventPlayer.selected_hero_list_number == 9 and eventPlayer.isUsingAbility2():
        eventPlayer.Z = eventPlayer.getPosition()
        createEffect(getAllPlayers(), Effect.SPHERE, Color.RED, eventPlayer.Z, eventPlayer.C, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[true] = getLastCreatedEntity()
        chase(eventPlayer.C, 14, duration=0.45, ChaseReeval.DESTINATION_AND_DURATION)
        async(Muramasa_ab2_loop, AsyncBehavior.RESTART)
        waitUntil(not eventPlayer.isUsingAbility2(), 99999)
        stopChasingVariable(eventPlayer.C)
        eventPlayer.C = null
        destroyEffect(eventPlayer.Effects[true])
    elif eventPlayer.getAbilityCooldown(Button.ABILITY_2) == null and eventPlayer.selected_hero_list_number == 10:
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 7.5)
        createBeam(getAllPlayers(), Beam.BAD, updateEveryTick(eventPlayer.getPosition()), updateEveryTick(raycast(eventPlayer.getEyePosition(), eventPlayer.getEyePosition() + eventPlayer.getFacingDirection() * 100, getAllPlayers(), eventPlayer, true).getHitPosition()), Color.BLUE, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[8] = getLastCreatedEntity()
        eventPlayer.B = true
        async(sieg_ab2, AsyncBehavior.RESTART)
        wait(2)
        eventPlayer.B = false
        destroyEffect(eventPlayer.Effects[8])
    elif eventPlayer.getAbilityCooldown(Button.ABILITY_2) == null and eventPlayer.selected_hero_list_number == 11:
        if eventPlayer.K == false:
            remove_mordred_armor()
        elif eventPlayer.K == true:
            if eventPlayer.isInAir():
                eventPlayer.applyImpulse(Vector.DOWN, 600, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
                waitUntil(eventPlayer.isOnGround(), 99999)
                getPlayersInRadius(eventPlayer, 4, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF).setStatusEffect(null, Status.ROOTED, 1.2)
                damage(getPlayersInRadius(eventPlayer, 4, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, 65)
                playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.RED, eventPlayer, 4)
            else:
                getPlayersInRadius(eventPlayer, 6, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF).setStatusEffect(null, Status.ROOTED, 1.2)
                damage(getPlayersInRadius(eventPlayer, 6, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, 55)
                playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.ORANGE, eventPlayer, 6)
                getPlayersInRadius(eventPlayer, 7, Team.ALL, LosCheck.OFF).applyImpulse(Vector.UP, 10, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
            eventPlayer.setAbilityCooldown(Button.ABILITY_2, 9)
    elif eventPlayer.isUsingAbility2() and eventPlayer.selected_hero_list_number == 2:
        eventPlayer.setStatusEffect(eventPlayer, Status.PHASED_OUT, 6)
        waitUntil(not eventPlayer.isUsingAbility2(), 99999)
        eventPlayer.clearStatusEffect(Status.PHASED_OUT)
    elif eventPlayer.isUsingAbility2() and eventPlayer.selected_hero_list_number == 6:
        eventPlayer.is_damage_reversing = true
        waitUntil(not eventPlayer.isUsingAbility2(), 99999)
        eventPlayer.is_damage_reversing = false
    elif eventPlayer.isUsingAbility2() and eventPlayer.selected_hero_list_number == 12:
        FoV_and_LoS_player_select()
        if not eventPlayer.FoV_and_lineOFsight_player:
            goto lbl_1
        eventPlayer.startHoT(eventPlayer, 3, 80)
        eventPlayer.FoV_and_lineOFsight_player.startFacing(directionTowards(eventPlayer.FoV_and_lineOFsight_player, eventPlayer), 1140, Relativity.TO_WORLD, FacingReeval.DIRECTION_AND_TURN_RATE)
        lbl_1:
        waitUntil(not eventPlayer.isUsingAbility2(), 7)
        eventPlayer.FoV_and_lineOFsight_player.stopFacing()
        wait(0.25)
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 13)


rule "Genji Faster melee":
    @Event eachPlayer
    @Hero genji
    @Condition eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) == true
    @Condition eventPlayer.isUsingUltimate() == false
    
    if eventPlayer.selected_hero_list_number == 0:
        eventPlayer.setAbilityCooldown(Button.MELEE, false)
        eventPlayer.forceButtonPress(Button.MELEE)
        wait(0.5)
    elif eventPlayer.selected_hero_list_number == 1 and eventPlayer.Is_Using_Ultimate:
        eventPlayer.forceButtonPress(Button.MELEE)
        eventPlayer.setAbilityCooldown(Button.MELEE, false)
        wait(0.12)
        eventPlayer.cancelPrimaryAction()
    if RULE_CONDITION:
        goto RULE_START


def can_use_blade_subroutine():
    @Name "Genji all ultimate setup (can use blade)"
    
    if eventPlayer.selected_hero_list_number == 8 or eventPlayer.selected_hero_list_number == 10 or eventPlayer.selected_hero_list_number == 11 or eventPlayer.selected_hero_list_number == 9:
        wait(0.15)
        eventPlayer.allowButton(Button.ULTIMATE)
        eventPlayer.setUltCharge(100)
        wait(0.045)
        eventPlayer.startForcingButton(Button.ULTIMATE)
        eventPlayer.allowButton(Button.PRIMARY_FIRE)
        waitUntil(eventPlayer.isUsingUltimate() or eventPlayer.isDead() or eventPlayer.isInSpawnRoom(), 99999)
        waitUntil(not eventPlayer.isUsingUltimate(), 99999)
        eventPlayer.setUltCharge(0)
        eventPlayer.stopForcingButton(Button.ULTIMATE)
        if eventPlayer.selected_hero_list_number != 11:
            goto lbl_0
        eventPlayer.disallowButton(Button.PRIMARY_FIRE)
        lbl_0:
    return


rule "All Lucio ab1":
    @Event eachPlayer
    @Hero lucio
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.isInSpawnRoom() == false
    
    playEffect(getAllPlayers(), DynamicEffect.GOOD_PICKUP_EFFECT, Color.GREEN, eventPlayer, 1)
    playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.GREEN, eventPlayer, 100)
    eventPlayer.S = getPlayersInRadius(eventPlayer, 11, eventPlayer.getTeam(), LosCheck.OFF)
    eventPlayer.S.playerSpeed[false] += 50
    waitUntil(eventPlayer.isDead() or eventPlayer.isInSpawnRoom(), 4)
    eventPlayer.S.playerSpeed[false] -= 50
    playEffect(getAllPlayers(), DynamicEffect.BAD_PICKUP_EFFECT, Color.RED, eventPlayer.S, 1)
    playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.RED, eventPlayer.S, 100)
    wait(10)
    smallMessage(eventPlayer, "You can use speed boost now")


rule "Amadeus Mozart Lucio ab 2 heal boost":
    @Event eachPlayer
    @Hero lucio
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.selecting_HUD == false
    
    getPlayersInRadius(eventPlayer, 8, eventPlayer.getTeam(), LosCheck.OFF).startHoT(eventPlayer, 4.5, 80)
    playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.YELLOW, eventPlayer + vect(false, true, false), 8)
    playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION_SOUND, Color.YELLOW, eventPlayer, 100)
    wait(1)
    eventPlayer.setAbilityCooldown(Button.ABILITY_2, 15)


rule "Bastion Bounty Hunter take damage":
    @Event playerTookDamage
    @Hero bastion
    @Condition eventPlayer.Is_Using_Ultimate == true
    @Condition eventPlayer.selected_hero_list_number == 2
    @Condition eventPlayer != attacker
    
    damage(attacker, eventPlayer, 50)
    heal(eventPlayer, null, eventDamage)


rule "All soldiers Ab1":
    @Event eachPlayer
    @Hero soldier
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.isInSpawnRoom() == false
    
    if eventPlayer.selected_hero_list_number == null:
        eventPlayer.setGravity(false)
        eventPlayer.applyImpulse(eventPlayer.getFacingDirection(), 30, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
        wait(0.3)
        eventPlayer.setGravity(100)
        wait(3.5)
    elif eventPlayer.selected_hero_list_number == 1:
        __skipIf__(true, eventPlayer.Is_Using_Ultimate)
        eventPlayer.setGravity(999)
        eventPlayer.startForcingThrottle(true, false, false, false, false, false)
        eventPlayer.playerSpeed[false] += 200
        playEffect(getAllPlayers(), DynamicEffect.GOOD_PICKUP_EFFECT, Color.GREEN, eventPlayer, 1)
        playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.GREEN, eventPlayer, 80)
        eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 2)
        eventPlayer.D = true
        wait(0.25)
        waitUntil(eventPlayer.isHoldingButton(Button.ABILITY_1) or eventPlayer.isDead() or len([player for player in getPlayersInRadius(eventPlayer, 2, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES) if player.isAlive()]) >= 1, 4)
        eventPlayer.A = getPlayersInRadius(eventPlayer, 2, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)
        damage(eventPlayer.A, eventPlayer, 65)
        eventPlayer.setGravity(100)
        eventPlayer.stopForcingThrottle()
        eventPlayer.playerSpeed[false] -= 200
        wait()
        eventPlayer.D = false
        eventPlayer.A = []
        waitUntil(isAssemblingHeroes(), 11)
        smallMessage(eventPlayer, "\"Shift\" ready")
    elif eventPlayer.selected_hero_list_number == 2:
        if eventPlayer.D == 1:
            playEffect(getAllPlayers(), DynamicEffect.GOOD_PICKUP_EFFECT, Color.YELLOW, eventPlayer, 1)
            eventPlayer.D = 2
            smallMessage(eventPlayer, "Poison mode")
        elif eventPlayer.D == 2:
            playEffect(getAllPlayers(), DynamicEffect.GOOD_PICKUP_EFFECT, Color.RED, eventPlayer, 1)
            eventPlayer.D = 1
            smallMessage(eventPlayer, "Penetration mode")
    elif eventPlayer.selected_hero_list_number == 3:
        eventPlayer.setStatusEffect(null, Status.STUNNED, 0.016)
        eventPlayer.startForcingThrottle(true, false, false, false, false, false)
        eventPlayer.setAimSpeed(0)
        eventPlayer.setMoveSpeed(600)
        eventPlayer.W = true
        async(leonidas_dash, AsyncBehavior.RESTART)
        wait(0.45)
        if eventPlayer.leonidas_shield == 1:
            eventPlayer.setMoveSpeed(70)
        else:
            eventPlayer.setMoveSpeed(145)
        eventPlayer.W = false
        eventPlayer.stopForcingThrottle()
        eventPlayer.setAimSpeed(100)
        eventPlayer.disallowButton(Button.ABILITY_1)
        waitUntil(isAssemblingHeroes(), 10)
        smallMessage(eventPlayer, "{0} {1}".format("You can use ab1", null))
    elif eventPlayer.selected_hero_list_number == 4:
        eventPlayer.setGravity(5)
        eventPlayer.applyImpulse(Vector.UP, 5, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
        wait(0.25)
        waitUntil(eventPlayer.isHoldingButton(Button.ABILITY_1) or isAssemblingHeroes(), 2.5)
        eventPlayer.setGravity(100)
        wait(6)
    elif eventPlayer.selected_hero_list_number == 5:
        eventPlayer.Solomon_pillar_array.stopFacing()
        FoV_and_LoS_player_select()
        __skipIf__(eventPlayer.getAbilityCooldown(Button.SECONDARY_FIRE), 1)
        eventPlayer.setAbilityCooldown(Button.SECONDARY_FIRE, 10)
        if entityExists(eventPlayer.Solomon_pillar_array) and entityExists(eventPlayer.FoV_and_lineOFsight_player):
            eventPlayer.Solomon_pillar_array.startFacing(directionTowards(eventPlayer.Solomon_pillar_array, eventPlayer.FoV_and_lineOFsight_player), 10000, Relativity.TO_WORLD, FacingReeval.DIRECTION_AND_TURN_RATE)
            wait(0.25)
            waitUntil(eventPlayer.isHoldingButton(Button.ABILITY_1) or eventPlayer.getAbilityCooldown(Button.SECONDARY_FIRE) or not entityExists(eventPlayer.Solomon_pillar_array) or eventPlayer.isInSpawnRoom(), 10)
        else:
            smallMessage(eventPlayer, "No enemies or Turret created")


rule "All soldiers Ab2":
    @Event eachPlayer
    @Hero soldier
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0
    @Condition eventPlayer.isInSpawnRoom() == false
    
    if eventPlayer.selected_hero_list_number == null and not eventPlayer.Is_Using_Ultimate:
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 11)
        eventPlayer.stopForcingThrottle()
        eventPlayer.detach()
        eventPlayer.stopForcingPosition()
        eventPlayer.clearStatusEffect(Status.FROZEN)
        eventPlayer.clearStatusEffect(Status.KNOCKED_DOWN)
        eventPlayer.clearStatusEffect(Status.STUNNED)
        eventPlayer.clearStatusEffect(Status.ROOTED)
        eventPlayer.setStatusEffect(eventPlayer, Status.INVINCIBLE, 2)
        playEffect(getAllPlayers(), DynamicEffect.GOOD_PICKUP_EFFECT, Color.WHITE, eventPlayer, 2)
        playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.WHITE, eventPlayer, 70)
        heal(eventPlayer, eventPlayer, 200)
        eventPlayer.is_player_anchored = null
    elif eventPlayer.selected_hero_list_number == 1:
        eventPlayer.allowButton(Button.SECONDARY_FIRE)
        eventPlayer.setProjectileSpeed(10000)
        for eventPlayer.for_loop_2 in range(2):
            eventPlayer.setAbilityCooldown(Button.SECONDARY_FIRE, 0)
            eventPlayer.forceButtonPress(Button.SECONDARY_FIRE)
            wait(0.65)
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 16)
        eventPlayer.disallowButton(Button.SECONDARY_FIRE)
        eventPlayer.setProjectileSpeed(100)
    elif eventPlayer.selected_hero_list_number == 2:
        eventPlayer.B = getPlayersInRadius(eventPlayer, 7, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)
        eventPlayer.B.clearStatusEffect(Status.INVINCIBLE)
        eventPlayer.B.clearStatusEffect(Status.UNKILLABLE)
        eventPlayer.B.clearStatusEffect(Status.PHASED_OUT)
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.RED, eventPlayer + vect(false, 2, false), 6)
        createProjectile(Projectile.SIGMA_HYPERSPHERE, eventPlayer, null, null, Relativity.TO_WORLD, ModifyHealth.DAMAGE, getOppositeTeam(eventPlayer.getTeam()), 30, 1, 7, DynamicEffect.BAD_EXPLOSION, DynamicEffect.EXPLOSION_SOUND, 0, 0.1, 0.1, 30, 0, 100)
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 14)
    elif eventPlayer.selected_hero_list_number == 3 and not eventPlayer.getAbilityCooldown(Button.ABILITY_2):
        eventPlayer.leonidas_shield = 1
        eventPlayer.Y = true
        eventPlayer.disallowButton(Button.PRIMARY_FIRE)
        smallMessage(eventPlayer, "Shield up")
        eventPlayer.setDamageReceived(15)
        eventPlayer.setGravity(900)
        eventPlayer.setMoveSpeed(70)
        createEffect(getAllPlayers(), Effect.WRECKING_BALL_ADAPTIVE_SHIELD_TARGET, Color.TEAM_2, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[4] = getLastCreatedEntity()
        wait(0.5)
        waitUntil(eventPlayer.isHoldingButton(Button.ABILITY_2) or eventPlayer.isDead() or eventPlayer.isInSpawnRoom() or eventPlayer.hasStatusEffect(Status.ASLEEP) or eventPlayer.hasStatusEffect(Status.FROZEN) or eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN) or eventPlayer.hasStatusEffect(Status.STUNNED), 99999)
        eventPlayer.leonidas_shield = 2
        destroyEffect(eventPlayer.Effects[4])
        eventPlayer.allowButton(Button.PRIMARY_FIRE)
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 6.5)
        eventPlayer.setMoveSpeed(145)
        eventPlayer.setGravity(100)
        eventPlayer.setDamageReceived(70)
        smallMessage(eventPlayer, "Shield down")
        eventPlayer.Y = false
        wait(0.5)
    elif eventPlayer.selected_hero_list_number == 4:
        eventPlayer.disallowButton(Button.PRIMARY_FIRE)
        eventPlayer.color = Color.RED
        async(create_beam_effect_subroutine, AsyncBehavior.RESTART)
        eventPlayer.H = true
        async(karna_laser_loop, AsyncBehavior.RESTART)
        waitUntil(eventPlayer.isDead() or eventPlayer.isInSpawnRoom(), 2)
        eventPlayer.allowButton(Button.PRIMARY_FIRE)
        eventPlayer.H = false
        destroy_beam_effect_subroutine()
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 12)
    elif eventPlayer.selected_hero_list_number == 5:
        create_dummy_of_EventPlayer()
        eventPlayer.Solomon_pillar_array.setDamageReceived(60)
        #S is the soldier L is the dummy if active
        eventPlayer.Solomon_pillar_array.L = true
        eventPlayer.E = true
        createInWorldText(getAllPlayers(), "{0} Trap Turret".format(iconString(Icon.WARNING)), eventPlayer.Solomon_pillar_array + vect(0, 2.1, 0), 1, Clip.SURFACES, WorldTextReeval.VISIBILITY_POSITION_AND_STRING, Color.WHITE, SpecVisibility.DEFAULT)
        eventPlayer.Effects[3] = getLastCreatedText()
        createEffect(getAllPlayers(), Effect.RING, Color.RED, eventPlayer.Solomon_pillar_array, 3.5, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[4] = getLastCreatedEntity()
        wait(0.8)
        waitUntil(getPlayersInRadius(eventPlayer.Solomon_pillar_array, 3.5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF) >= 1, 6)
        eventPlayer.D = getPlayersInRadius(eventPlayer.Solomon_pillar_array, 3.5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)[0]
        eventPlayer.D.attachTo(eventPlayer.Solomon_pillar_array, vect(false, 0, false))
        waitUntil(not entityExists(eventPlayer.Solomon_pillar_array) or eventPlayer.Solomon_pillar_array.isDead(), 11)
        eventPlayer.D.detach()
        eventPlayer.E = false
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 15)
        destroyInWorldText(eventPlayer.Effects[3])
        destroyEffect(eventPlayer.Effects[4])
        kill(eventPlayer.Solomon_pillar_array, null)


rule "All soldier Leonidas faster melee":
    @Event eachPlayer
    @Hero soldier
    @Condition eventPlayer.isHoldingButton(Button.SECONDARY_FIRE) == true
    @Condition (eventPlayer.hasStatusEffect(Status.FROZEN) or eventPlayer.hasStatusEffect(Status.STUNNED) or eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN)) == false
    @Condition eventPlayer.isInSpawnRoom() == false
    @Condition eventPlayer.W == false
    
    if not eventPlayer.Y and eventPlayer.selected_hero_list_number == 3:
        eventPlayer.forceButtonPress(Button.MELEE)
        #it was variable M before
        wait(eventPlayer.getHealth() / 600)
        eventPlayer.cancelPrimaryAction()
        eventPlayer.setAbilityCooldown(Button.MELEE, 0)
        if RULE_CONDITION:
            goto RULE_START


rule "Soldier all sec.fire fired Chu spear does 1/5 damage only":
    @Event eachPlayer
    @Hero soldier
    @Condition eventPlayer.isFiringSecondaryFire() == true
    @Condition eventPlayer.selecting_HUD == false
    
    if not eventPlayer.selected_hero_list_number and eventPlayer.isFiringSecondaryFire() and not eventPlayer.Is_Using_Ultimate:
        startDamageModification(getPlayers(getOppositeTeam(eventPlayer.getTeam())), eventPlayer, 1, DamageReeval.RECEIVERS_DAMAGERS_AND_DMGPERCENT)
        eventPlayer.Effects[7] = getLastDamageModification()
        wait(0.35)
        stopDamageModification(eventPlayer.Effects[7])
        wait(2)
        eventPlayer.allowButton(Button.SECONDARY_FIRE)


def karna_laser_loop():
    @Name "Karna ab2 2/2 (subroutine)"
    
    damage(getPlayersInRadius(eventPlayer.raycast_hit_position2, 2, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES), eventPlayer, 13)
    playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.RED, eventPlayer.raycast_hit_position2, 0.15)
    wait(0.08)
    if eventPlayer.H and not eventPlayer.isInSpawnRoom():
        goto RULE_START


rule "Chu || achilles sec.fire (remove effect)":
    @Event eachPlayer
    @Hero soldier
    @Condition eventPlayer.isFiringSecondaryFire() == true
    @Condition eventPlayer.selecting_HUD == false
    
    if eventPlayer.selected_hero_list_number == 0:
        eventPlayer.setDamageDealt(5)
        destroyEffect(eventPlayer.Effects[3])
        wait(0.36)
        eventPlayer.setDamageDealt(136)
    elif eventPlayer.selected_hero_list_number == 2:
        wait(1)
        eventPlayer.setAbilityCooldown(Button.SECONDARY_FIRE, 8)


rule "shakespeare ultimate (if him died)":
    @Event eachPlayer
    @Hero soldier
    @Condition eventPlayer.hasSpawned() == true
    @Condition eventPlayer.isDummy() == true
    
    waitUntil(not eventPlayer.isInSpawnRoom(), 99999)
    waitUntil(not (eventPlayer.isAlive() or entityExists(eventPlayer)), 99999)
    eventPlayer.shakespeare_master.E = false
    eventPlayer.shakespeare_master.L = false
    eventPlayer.shakespeare_master.D.stopForcingPosition()
    destroyDummy(eventPlayer.getTeam(), eventPlayer.getSlot())


rule "All shift barrage || Moira Ab1":
    @Event eachPlayer
    @Hero moira
    @Condition (eventPlayer.isHoldingButton(Button.ABILITY_1) or eventPlayer.isHoldingButton(Button.ABILITY_2)) == true
    @Condition eventPlayer.selecting_HUD == false
    
    if eventPlayer.isHoldingButton(Button.ABILITY_1) and eventPlayer.selected_hero_list_number == null and eventPlayer.getAbilityCooldown(Button.ABILITY_1) == null and (not eventPlayer.isUsingUltimate() or eventPlayer.Medea_rule_breaker2 == false):
        eventPlayer.Medea_rule_breaker = true
        eventPlayer.V = eventPlayer.getAbilityCooldown(Button.ABILITY_2)
        eventPlayer.allowButton(Button.ABILITY_2)
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 15)
        for eventPlayer.for_loop in range(0, 4, true):
            eventPlayer.setAbilityCooldown(Button.ABILITY_2, 0)
            eventPlayer.forceButtonPress(Button.ABILITY_2)
            wait(0.102)
            eventPlayer.forceButtonPress(Button.SECONDARY_FIRE)
            wait(0.097)
            eventPlayer.cancelPrimaryAction()
        eventPlayer.disallowButton(Button.ABILITY_2)
        eventPlayer.Medea_rule_breaker = false
        eventPlayer.allowButton(Button.PRIMARY_FIRE)
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, eventPlayer.V)
    elif eventPlayer.isUsingAbility1() and eventPlayer.selected_hero_list_number == 1:
        eventPlayer.applyImpulse(eventPlayer.getFacingDirection(), 100, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
        eventPlayer.playerSpeed[false] += 100
        waitUntil(not eventPlayer.isUsingAbility1(), 5)
        eventPlayer.playerSpeed[false] -= 100
    elif eventPlayer.isHoldingButton(Button.ABILITY_1) and eventPlayer.getAbilityCooldown(Button.ABILITY_1) == null and eventPlayer.selected_hero_list_number == 2:
        eventPlayer.is_damage_reversing = true
        eventPlayer.setStatusEffect(null, Status.ROOTED, 0.6)
        waitUntil(not eventPlayer.isMoving(), 3)
        createInWorldText(getAllPlayers(), "[{0}] SEE YOU".format(iconString(Icon.EYE)), eventPlayer.getEyePosition() + vect(0, 0.3, 0), 2, Clip.SURFACES, WorldTextReeval.VISIBILITY_POSITION_AND_STRING, Color.WHITE, SpecVisibility.DEFAULT)
        eventPlayer.Effects[2] = getLastCreatedText()
        async(felix_faust_ab1_loop, AsyncBehavior.RESTART)
        waitUntil(eventPlayer.isInSpawnRoom() or eventPlayer.isDead() or eventPlayer.isMoving(), 99999)
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 7)
        eventPlayer.is_damage_reversing = false
        destroyInWorldText(eventPlayer.Effects[2])
    elif eventPlayer.isUsingAbility1() and eventPlayer.selected_hero_list_number == 4:
        eventPlayer.J = [i for i in eventPlayer.getPlayerClosestToReticle(Team.ALL) if isInLoS(eventPlayer, i, BarrierLos.PASS_THROUGH_BARRIERS)]
        if entityExists(eventPlayer.J) and (distance(eventPlayer, eventPlayer.J) <= 60 or eventPlayer.J.getAltitude() >= 5):
            eventPlayer.I = eventPlayer.getPosition()
            eventPlayer.is_player_anchored = 0
            eventPlayer.J.is_falling[0] = true
            eventPlayer.J.is_falling[1] = eventPlayer.J.getPosition()
            eventPlayer.teleport(eventPlayer.J.getPosition())
            eventPlayer.J.teleport(eventPlayer.I)
            smallMessage(eventPlayer.J, "Position Swapped")
            if eventPlayer.I.y < eventPlayer.J.getPosition().y:
                goto lbl_0
            Falling_floor_array.append(eventPlayer.J)
            lbl_0:
        elif eventPlayer.J == null:
            smallMessage(eventPlayer, "No available player")
    elif eventPlayer.selected_hero_list_number == 5 and eventPlayer.isUsingAbility1():
        raycast_hit_position2()
        createBeam(getAllPlayers(), Beam.OMNIC_SLICER, eventPlayer.getEyePosition(), eventPlayer.raycast_hit_position2, Color.SKY_BLUE, EffectReeval.NONE)
        eventPlayer.Effects[4] = getLastCreatedEntity()
        playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.SKY_BLUE, eventPlayer.raycast_hit_position2, 6)
        damage(getPlayersInRadius(eventPlayer.raycast_hit_position2, 4, Team.ALL, LosCheck.SURFACES_AND_ENEMY_BARRIERS), eventPlayer, 70 * (1 + eventPlayer.getUltCharge() / 260))
        wait(0.15)
        destroyEffect(eventPlayer.Effects[4])
        wait(true)
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 4)


rule "Asclepius  (healing)":
    @Event playerDealtHealing
    @Hero moira
    @Condition eventAbility == Button.ABILITY_2
    @Condition eventPlayer.selected_hero_list_number == 3
    
    healee.startHoT(eventPlayer, 3, 25)


rule "All moira  jump ability || Ashe Xanzang Dash":
    @Event eachPlayer
    @Condition eventPlayer.isJumping() == true
    @Condition eventPlayer.isHoldingButton(Button.JUMP) == true
    @Condition eventPlayer.isHoldingButton(Button.CROUCH) == true
    @Condition (eventPlayer.hasStatusEffect(Status.FROZEN) or eventPlayer.hasStatusEffect(Status.STUNNED) or eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN)) == false
    @Condition (eventPlayer.getCurrentHero() == Hero.MOIRA and not eventPlayer.selected_hero_list_number or eventPlayer.getCurrentHero() == Hero.ASHE and eventPlayer.selected_hero_list_number == 1) == true
    
    eventPlayer.applyImpulse(eventPlayer.getFacingDirection(), 35 if eventPlayer.selected_hero_list_number else 45, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
    if not eventPlayer.selected_hero_list_number:
        eventPlayer.setAbilityCooldown(Button.JUMP, true)
        eventPlayer.setGravity(false)
        wait(0.48)
        eventPlayer.setGravity(135)
        wait(0.5)
        eventPlayer.setGravity(70)
    else:
    wait(6)


rule "All moira ab2":
    @Event eachPlayer
    @Hero moira
    @Condition (eventPlayer.isUsingAbility2() or eventPlayer.isHoldingButton(Button.ABILITY_2)) == true
    @Condition eventPlayer.isUsingUltimate() == false
    @Condition eventPlayer.isInSpawnRoom() == false
    
    if eventPlayer.selected_hero_list_number == null and eventPlayer.isHoldingButton(Button.ABILITY_2) and eventPlayer.getAbilityCooldown(Button.ABILITY_2) == null and eventPlayer.Medea_rule_breaker == false:
        eventPlayer.vamp_absorb = 50
        eventPlayer.Medea_rule_breaker2 = true
        eventPlayer.B = true
        eventPlayer.is_damage_reversing = true
        wait(0.25)
        waitUntil(eventPlayer.isDead() or eventPlayer.isHoldingButton(Button.ABILITY_2) or eventPlayer.isInSpawnRoom(), 6)
        eventPlayer.B = false
        eventPlayer.Medea_rule_breaker2 = false
        eventPlayer.is_damage_reversing = false
        createProjectile(Projectile.ORB, eventPlayer, null, null, Relativity.TO_WORLD, ModifyHealth.DAMAGE, getOppositeTeam(eventPlayer.getTeam()), eventPlayer.vamp_absorb * 2.1, 0.85, 3, DynamicEffect.BAD_EXPLOSION, DynamicEffect.EXPLOSION_SOUND, 0.13, 125, 10, 0, 13, 0)
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 10)
    elif eventPlayer.selected_hero_list_number == 1 and eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0:
        eventPlayer.vamp_absorb = true
        eventPlayer.is_damage_reversing = true
        wait(3)
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 9)
        eventPlayer.vamp_absorb = false
        eventPlayer.is_damage_reversing = false
    elif eventPlayer.selected_hero_list_number == 2 and eventPlayer.getAbilityCooldown(Button.ABILITY_2) == null:
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 13)
        async(Felix_ballin, AsyncBehavior.NOOP)
    elif eventPlayer.selected_hero_list_number == 3:
        eventPlayer.allowButton(Button.SECONDARY_FIRE)
        wait(0.15)
        eventPlayer.forceButtonPress(Button.SECONDARY_FIRE)
        waitUntil(not eventPlayer.isUsingAbility2(), 99999)
        eventPlayer.disallowButton(Button.SECONDARY_FIRE)
        waitUntil(eventPlayer.isUsingAbility2(), 99999)
    elif eventPlayer.selected_hero_list_number == 4 and eventPlayer.getAbilityCooldown(Button.ABILITY_2) == null:
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.LIME_GREEN, eventPlayer + vect(false, 2, false), 6)
        eventPlayer.X = eventPlayer.getPosition()
        wait(0.45)
        eventPlayer.M = true
        createEffect(getAllPlayers(), Effect.SPHERE, Color.LIME_GREEN, eventPlayer.X, 4, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[2] = getLastCreatedEntity()
        async(salome_ab2_damage_loop, AsyncBehavior.RESTART)
        async(salome_setup_ab2, AsyncBehavior.RESTART)
        wait(3)
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 13)
        eventPlayer.M = false
        destroyEffect(eventPlayer.Effects[2])
        eventPlayer.clearStatusEffect(Status.INVINCIBLE)
        eventPlayer.X = null
    elif not eventPlayer.getAbilityCooldown(Button.ABILITY_2) and eventPlayer.selected_hero_list_number == 5 and eventPlayer.isAlive():
        eventPlayer.Moving_ball_array = []
        eventPlayer.Moving_ball_array.stopForcingPosition()
        eventPlayer.Moving_ball_trigger = false
        eventPlayer.B = true
        stopChasingVariable(eventPlayer.Moving_ball)
        eventPlayer.Moving_ball = eventPlayer.getPosition()
        #choose area
        raycast_hit_position1()
        eventPlayer.setStatusEffect(null, Status.STUNNED, 0.1)
        createDummy(eventPlayer.getCurrentHero(), eventPlayer.getTeam(), -1, eventPlayer, Vector.UP)
        eventPlayer.moira_dummy = getLastCreatedEntity()
        eventPlayer.moira_dummy.startForcingPosition(eventPlayer.Moving_ball, true)
        eventPlayer.moira_dummy.setStatusEffect(eventPlayer, Status.PHASED_OUT, 9999)
        eventPlayer.moira_dummy.setInvisibility(Invis.ALL)
        chase(eventPlayer.Moving_ball, eventPlayer.raycast_hit_position, rate=eventPlayer.Chase_speed_para, ChaseReeval.DESTINATION_AND_RATE)
        wait()
        createEffect(getAllPlayers(), Effect.SPHERE, Color.LIME_GREEN, updateEveryTick(eventPlayer.Moving_ball), 4.6, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[3] = getLastCreatedEntity()
        eventPlayer.was_damaged = false
        eventPlayer.Chase_speed_para = 50
        chase(eventPlayer.Chase_speed_para, 15, rate=40, ChaseReeval.DESTINATION_AND_RATE)
        async(moving_ball_ab2_loop, AsyncBehavior.RESTART)
        waitUntil(eventPlayer.isInSpawnRoom() or eventPlayer.isOnGround() or eventPlayer.Moving_ball == eventPlayer.raycast_hit_position, 3)
        waitUntil(eventPlayer.isInSpawnRoom() or eventPlayer.isMoving() or eventPlayer.isDead() or eventPlayer.was_damaged or eventPlayer.Moving_ball == eventPlayer.raycast_hit_position, 3)
        stopChasingVariable(eventPlayer.Moving_ball)
        if distance(eventPlayer.Moving_ball, eventPlayer.raycast_hit_position) > 0.5:
            goto lbl_0
        damage(getPlayersInRadius(eventPlayer.Moving_ball, 4.6, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, 120)
        lbl_0:
        eventPlayer.B = false
        eventPlayer.Moving_ball_array.detach()
        destroyDummy(eventPlayer.getTeam(), eventPlayer.moira_dummy.getSlot())
        destroyEffect(eventPlayer.Effects[3])
        stopChasingVariable(eventPlayer.Chase_speed_para)
        eventPlayer.Moving_ball_array.setStatusEffect(eventPlayer, Status.STUNNED, 0.6)
        eventPlayer.Moving_ball_trigger = true
        eventPlayer.was_damaged = false
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 11)
        eventPlayer.Moving_ball_array.is_falling[0] = true
        eventPlayer.Moving_ball_array.is_falling[1] = eventPlayer.getPosition()
        if eventPlayer.getPosition().y > eventPlayer.Moving_ball_array[0].y:
            goto lbl_1
        Falling_floor_array.append(eventPlayer.Moving_ball_array)
        lbl_1:
        wait(0.35)
        eventPlayer.Moving_ball_array = []


def moving_ball_ab2_loop():
    @Name "Moira paracelus van hahanheim ab 2 loop (subroutine) (attach players)"
    
    eventPlayer.Moving_ball_array = getPlayersInRadius(eventPlayer.moira_dummy, 4.6, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES)
    eventPlayer.Moving_ball_array.attachTo(eventPlayer.moira_dummy, null)
    wait(0.09)
    if eventPlayer.B:
        goto RULE_START


def salome_ab2_damage_loop():
    @Name "Salome ab2 (damage subroutine)"
    
    damage(getPlayersInRadius(eventPlayer.X, 4, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, 50)
    getPlayersInRadius(eventPlayer.X, 4, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF).clearStatusEffect(Status.INVINCIBLE)
    wait(0.25)
    if eventPlayer.M:
        goto RULE_START


def salome_setup_ab2():
    @Name "Salome ab2 (protect subroutine)"
    
    if distance(eventPlayer, eventPlayer.X) <= 4:
        eventPlayer.setStatusEffect(null, Status.INVINCIBLE, 9999)
    elif distance(eventPlayer, eventPlayer.X) > 4:
        eventPlayer.clearStatusEffect(Status.INVINCIBLE)
    wait(0.1)
    if eventPlayer.M:
        goto RULE_START


rule "simo haya and semiramis Anas ab2":
    @Event eachPlayer
    @Hero ana
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == false
    @Condition eventPlayer.isInSpawnRoom() == false
    
    if eventPlayer.selected_hero_list_number == 0:
        eventPlayer.Z = true
        smallMessage(eventPlayer, "Snow protection field activated")
        eventPlayer.setInvisibility(Invis.ALL)
        destroy_nameONplayer()
        eventPlayer.Snow_protection_area = eventPlayer.getPosition()
        createEffect(getAllPlayers(), Effect.SPHERE, Color.WHITE, eventPlayer.Snow_protection_area, 8.5, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[true] = getLastCreatedEntity()
        createEffect(getAllPlayers(), Effect.CLOUD, Color.SKY_BLUE, eventPlayer.Snow_protection_area, 8.5, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[2] = getLastCreatedEntity()
        async(simo_haya_invisibility_loop, AsyncBehavior.RESTART)
        async(Snow_storm, AsyncBehavior.RESTART)
        waitUntil(eventPlayer.isInSpawnRoom(), 8)
        eventPlayer.Z = false
        destroyEffect(eventPlayer.Effects[true])
        destroyEffect(eventPlayer.Effects[2])
        wait(1.25)
        create_nameONplayer()
        eventPlayer.setInvisibility(Invis.NONE)
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 20)
    elif eventPlayer.selected_hero_list_number == 2:
        eventPlayer.setDamageReceived(25)
        waitUntil(eventPlayer.isInSpawnRoom() or eventPlayer.isDead(), 3)
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 10)
        eventPlayer.setDamageReceived(70)


def simo_haya_invisibility_loop():
    @Name "Ana sniper protection field invisibility (subroutine)"
    
    while eventPlayer.Z:
        waitUntil(distance(eventPlayer, eventPlayer.Snow_protection_area) > 8.5 or not eventPlayer.Z, 99999)
        eventPlayer.setInvisibility(Invis.NONE)
        wait(0.025)
        waitUntil(distance(eventPlayer, eventPlayer.Snow_protection_area) <= 8.5 or not eventPlayer.Z, 99999)
        eventPlayer.setInvisibility(Invis.ALL)
        wait(0.025)


def Snow_storm():
    @Name "Ana simo haya sniper storm (subrutine)"
    
    while eventPlayer.Z:
        eventPlayer.N = getPlayersInRadius(eventPlayer.Snow_protection_area, 8.5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)
        damage(eventPlayer.N, null, 2.5)
        if len(eventPlayer.N) >= 1:
            for eventPlayer.X in range(len(eventPlayer.N)):
                eventPlayer.N[eventPlayer.X].setUltCharge(eventPlayer.N[eventPlayer.X].getUltCharge() - 2)
                wait(0.025)
            eventPlayer.setUltCharge(eventPlayer.getUltCharge() + len(eventPlayer.N) * 1.5)
        wait(0.5)


def baptiste_ult_subroutine():
    @Name "Jinsus Krist ultimate 2.5/3 (set protected same as player)"
    
    waitUntil(not eventPlayer.Holy_heal or eventPlayer.Jehsus_protected_player.getNormalizedHealth() < eventPlayer.getNormalizedHealth(), 99999)
    wait(0.05)
    #32.730
    damage(eventPlayer.Jehsus_protected_player, null, 6 if eventPlayer.Jehsus_protected_player.getHealthOfType(Health.ARMOR) >= 100 else 0)
    eventPlayer.Holy_heal[1] = eventPlayer.getNormalizedHealth() - ((eventPlayer.getNormalizedHealth() - eventPlayer.Jehsus_protected_player.getNormalizedHealth()) / 1.3)
    eventPlayer.Jehsus_protected_player.setHealth(eventPlayer.Holy_heal[1] * eventPlayer.Jehsus_protected_player.getMaxHealth())
    eventPlayer.setHealth(eventPlayer.Holy_heal[1] * eventPlayer.getMaxHealth())
    waitUntil(eventPlayer.getNormalizedHealth() == eventPlayer.Jehsus_protected_player.getNormalizedHealth(), 1.1)
    if eventPlayer.Holy_heal:
        goto RULE_START


rule "Jinsus Krist ultimate 3/3 - icon":
    @Event eachPlayer
    @Condition entityExists(eventPlayer.jehsus_master) == true
    @Condition eventPlayer.Holy_heal == true
    
    createIcon(getAllPlayers(), eventPlayer, Icon.HEART, IconReeval.VISIBILITY_AND_POSITION, Color.YELLOW, false)
    eventPlayer.Jehsus_icon[true] = getLastCreatedEntity()
    playEffect(getAllPlayers(), DynamicEffect.GOOD_PICKUP_EFFECT, Color.YELLOW, eventPlayer, 1)
    playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.YELLOW, eventPlayer, 100)
    eventPlayer.Holy_heal[1] = eventPlayer.getNormalizedHealth()


rule "Jinsus cancel the effect":
    @Event eachPlayer
    @Hero baptiste
    @Condition entityExists(eventPlayer.Jehsus_protected_player) == true
    @Condition eventPlayer.Holy_heal == true
    
    waitUntil(eventPlayer.isInSpawnRoom() or eventPlayer.isDead() or eventPlayer.Jehsus_protected_player.isDead() or not entityExists(eventPlayer) or not entityExists(eventPlayer.Jehsus_protected_player) or eventPlayer.getNormalizedHealth() <= 0.05, 99999)
    eventPlayer.Holy_heal = false
    eventPlayer.Jehsus_protected_player.Holy_heal = false
    destroyIcon(eventPlayer.Jehsus_protected_player.Jehsus_icon[true])
    eventPlayer.Jehsus_protected_player.jehsus_master = null
    eventPlayer.Jehsus_protected_player = null


rule "All baptiste Ab1":
    @Event eachPlayer
    @Hero baptiste
    @Condition eventPlayer.isUsingAbility1() == true
    @Condition eventPlayer.selecting_HUD == false
    
    if eventPlayer.selected_hero_list_number != 1:
        (eventPlayer if eventPlayer.selected_hero_list_number else getPlayersInRadius(eventPlayer, 6, Team.ALL, LosCheck.OFF)).startHoT(eventPlayer, 4, 100 if eventPlayer.selected_hero_list_number else 350)
        wait(0.1)
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 13)
    else:
        eventPlayer.setStatusEffect(null, Status.UNKILLABLE, true)
        getPlayersInRadius(eventPlayer, 9, Team.ALL, LosCheck.SURFACES_AND_ENEMY_BARRIERS).exclude(eventPlayer).startDoT(eventPlayer, 3, 30)
        createEffect(getAllPlayers(), Effect.SPHERE, Color.ORANGE, updateEveryTick(eventPlayer), 9, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[2] = getLastCreatedEntity()
        wait(0.1)
        destroyEffect(eventPlayer.Effects[2])
        wait(0.45)
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 6)


rule "All baptiste Ab2":
    @Event eachPlayer
    @Hero baptiste
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == null
    @Condition (eventPlayer.hasStatusEffect(Status.FROZEN) or eventPlayer.hasStatusEffect(Status.STUNNED) or eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN)) == false
    @Condition eventPlayer.selecting_HUD == false
    
    if eventPlayer.selected_hero_list_number == 0:
        eventPlayer.addHealthPool(Health.ARMOR, 300, false, true)
        eventPlayer.Effects[2] = getLastCreatedHealthPool()
        playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.ORANGE, eventPlayer, 100)
        playEffect(getAllPlayers(), DynamicEffect.GOOD_PICKUP_EFFECT, Color.YELLOW, eventPlayer, 1)
        wait(3)
        removeHealthPool(eventPlayer.Effects[2])
        playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.RED, eventPlayer, 100)
        playEffect(getAllPlayers(), DynamicEffect.BAD_PICKUP_EFFECT, Color.RED, eventPlayer, 1)
        wait(8)
        smallMessage(eventPlayer, "{0} Armor Ready".format(heroIcon(Hero.BAPTISTE)))
    elif eventPlayer.H >= 1 and eventPlayer.selected_hero_list_number == 1:
        damage(getPlayersInRadius(eventPlayer, 9, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES), eventPlayer, eventPlayer.H / 5)
        heal(getPlayersInRadius(eventPlayer, 9, eventPlayer.getTeam(), LosCheck.OFF), eventPlayer, eventPlayer.H * 3)
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.RED, eventPlayer + vect(false, 2, false), 9)
        playEffect(getAllPlayers(), DynamicEffect.EXPLOSION_SOUND, Color.RED, eventPlayer, 100)
        eventPlayer.H = null
        createEffect(getAllPlayers(), Effect.SPHERE, Color.RED, updateEveryTick(eventPlayer), 9, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[true] = getLastCreatedEntity()
        wait(0.1)
        destroyEffect(eventPlayer.Effects[true])
        wait(7)
        smallMessage(eventPlayer, "Starlin Healing Ready")
    elif eventPlayer.selected_hero_list_number == 2:
        eventPlayer.P = eventPlayer.getPosition()
        createEffect(getAllPlayers(), Effect.RING, Color.RED, eventPlayer.P, 4, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[2] = getLastCreatedEntity()
        waitUntil(eventPlayer.J, 1.5)
        createEffect(getAllPlayers(), Effect.SPHERE, Color.BLACK, eventPlayer.P, 4, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[true] = getLastCreatedEntity()
        for eventPlayer.for_loop in range(40):
            if eventPlayer.J:
                break
            eventPlayer.W = getPlayersInRadius(eventPlayer.P, 4, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)
            wait(0.1)
            eventPlayer.W.Is_Crippled = true
            eventPlayer.W.setStatusEffect(null, Status.ROOTED, 1)
        destroyEffect(eventPlayer.Effects[true])
        destroyEffect(eventPlayer.Effects[2])
        wait(11)
        smallMessage(eventPlayer, "Paralysis Sphere Ready")


rule "All Brigitte right click":
    @Event eachPlayer
    @Hero brigitte
    @Condition eventPlayer.isFiringSecondaryFire() == true
    @Condition eventPlayer.selecting_HUD == false
    @Condition eventPlayer.isInSpawnRoom() == false
    
    if eventPlayer.selected_hero_list_number == null:
        eventPlayer.setAbilityCooldown(Button.PRIMARY_FIRE, 5)
        createEffect(getAllPlayers(), Effect.GOOD_AURA, Color.TURQUOISE, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[5] = getLastCreatedEntity()
        waitUntil(not eventPlayer.isFiringSecondaryFire(), 99999)
        eventPlayer.H = [player for player in getPlayersInRadius(eventPlayer, 10, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES) if eventPlayer.isInViewAngle(player, 60) and player.isInViewAngle(eventPlayer, 45)]
        eventPlayer.H.setDamageReceived(25)
        eventPlayer.setDamageReceived(35)
        eventPlayer.H.setStatusEffect(eventPlayer, Status.FROZEN, 3.5)
        eventPlayer.setStatusEffect(null, Status.FROZEN, 3.5)
        destroyEffect(eventPlayer.Effects[5])
        eventPlayer.setAbilityCooldown(Button.SECONDARY_FIRE, 9)
        wait(4)
        eventPlayer.H.setDamageReceived(70)
        eventPlayer.setDamageReceived(70)
    elif not eventPlayer.Is_Using_Ultimate and eventPlayer.selected_hero_list_number == 3:
        eventPlayer.setAbilityCooldown(Button.PRIMARY_FIRE, 9999)
        [player for player in eventPlayer.getPlayersInViewAngle(eventPlayer.getTeam(), 80) if isInLoS(eventPlayer, player, BarrierLos.PASS_THROUGH_BARRIERS)].concat(eventPlayer).addHealthPool(Health.NORMAL, 300, false, true)
        eventPlayer.Effects[true] = getLastCreatedHealthPool()
        waitUntil(not eventPlayer.isFiringSecondaryFire() or eventPlayer.isInSpawnRoom(), 99999)
        wait(2)
        eventPlayer.setAbilityCooldown(Button.SECONDARY_FIRE, 11)
        removeHealthPool(eventPlayer.Effects[true])
        eventPlayer.allowButton(Button.PRIMARY_FIRE)
        wait(0.1)
        eventPlayer.setAbilityCooldown(Button.PRIMARY_FIRE, false)
    elif not eventPlayer.Is_Using_Ultimate and eventPlayer.selected_hero_list_number == 1:
        eventPlayer.setDamageReceived(35)
        waitUntil(not eventPlayer.isFiringSecondaryFire(), 99999)
        eventPlayer.setDamageReceived(70)


rule "All Brigitte Ab1":
    @Event eachPlayer
    @Hero brigitte
    @Condition (eventPlayer.isUsingAbility1() or eventPlayer.isHoldingButton(Button.ABILITY_1) and eventPlayer.getAbilityCooldown(Button.ABILITY_1) == null) == true
    @Condition eventPlayer.selecting_HUD == false
    
    if eventPlayer.isUsingAbility1() and eventPlayer.selected_hero_list_number == null:
        wait(0.25, Wait.ABORT_WHEN_FALSE)
        eventPlayer.Medusa_trap = raycast(eventPlayer.getEyePosition(), eventPlayer.getEyePosition() + eventPlayer.getFacingDirection() * 15, getAllPlayers(), eventPlayer, true).getHitPosition()
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.RED, eventPlayer.Medusa_trap, 5)
        playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.RED, eventPlayer.Medusa_trap, 4)
        wait()
        getPlayersInRadius(eventPlayer.Medusa_trap, 5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF).setStatusEffect(null, Status.BURNING, 4)
        getPlayersInRadius(eventPlayer.Medusa_trap, 5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF).startDoT(null, 4, 25)
        wait()
        for eventPlayer.for_loop in range(0, len(getPlayersInRadius(eventPlayer.Medusa_trap, 2.5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)), true):
            getPlayersInRadius(eventPlayer.Medusa_trap, 5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)[eventPlayer.for_loop].setAbilityCooldown(Button.ABILITY_1, getPlayersInRadius(eventPlayer.Medusa_trap, 5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)[eventPlayer.for_loop].getAbilityCooldown(Button.ABILITY_1) + 5.5)
            wait()
            getPlayersInRadius(eventPlayer.Medusa_trap, 5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)[eventPlayer.for_loop].setAbilityCooldown(Button.ABILITY_2, getPlayersInRadius(eventPlayer.Medusa_trap, 5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)[eventPlayer.for_loop].getAbilityCooldown(Button.ABILITY_2) + 5.5)
            wait()
        wait(true)
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 7)
        wait(3)
        eventPlayer.Medusa_trap -= vect(false, 100, false)
    elif not eventPlayer.isUsingUltimate() and eventPlayer.selected_hero_list_number == 1:
        eventPlayer.G = getPlayersInRadius(eventPlayer, 7, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES)
        playEffect(getAllPlayers(), DynamicEffect.BAD_PICKUP_EFFECT, Color.ORANGE, eventPlayer, 4)
        damage(eventPlayer.G, eventPlayer, 110)
        eventPlayer.G.setStatusEffect(null, Status.ROOTED, 1.15)
        for eventPlayer.for_loop_2 in range(0, len(eventPlayer.G), true):
            eventPlayer.G[eventPlayer.for_loop_2].applyImpulse(directionTowards(eventPlayer - vect(false, 0.45, false), eventPlayer.G[eventPlayer.for_loop_2]), 40, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
            wait(0.09)
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 10)
    elif eventPlayer.selected_hero_list_number == 2:
        if eventPlayer.isHoldingButton(Button.JUMP):
            eventPlayer.setGravity(false)
            wait(0.2)
            eventPlayer.applyImpulse(eventPlayer.getFacingDirection(), 200, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
            wait(0.6)
            eventPlayer.setGravity(100)


rule "Mash Kyrielight ab 2 (heal a target) OR Medusa remove anti-healing":
    @Event playerDealtHealing
    @Hero brigitte
    @Condition eventAbility == Button.ABILITY_2
    
    if eventPlayer.selected_hero_list_number:
        eventPlayer.G = getPlayersInRadius(healee, 3.5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES_AND_ENEMY_BARRIERS)
        playEffect(getAllPlayers(), DynamicEffect.BAD_PICKUP_EFFECT, Color.ORANGE, healee, 4)
        damage(eventPlayer.G, eventPlayer, 40)
        for eventPlayer.for_loop_2 in range(0, len(eventPlayer.G), true):
            eventPlayer.G[eventPlayer.for_loop_2].applyImpulse(directionTowards(healee - vect(false, 1.85, false), eventPlayer.G[eventPlayer.for_loop_2]), 20, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
            wait(0.08)
        wait(0.35)
    else:
        async(Remove_healee_debuffs, AsyncBehavior.RESTART)


rule "All Brigitte Ab2":
    @Event eachPlayer
    @Hero brigitte
    @Condition (eventPlayer.isHoldingButton(Button.ABILITY_2) or eventPlayer.isHoldingButton(Button.SECONDARY_FIRE) and eventPlayer.selected_hero_list_number == 2) == true
    @Condition eventPlayer.isInSpawnRoom() == false
    
    if eventPlayer.selected_hero_list_number == 2 and not eventPlayer.getAbilityCooldown(Button.SECONDARY_FIRE):
        createEffect(getAllPlayers(), Effect.MERCY_DAMAGE_BOOSTED, Color.ORANGE, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[2] = getLastCreatedEntity()
        if eventPlayer.getMaxHealth() <= 200:
            goto lbl_0
        eventPlayer.Q -= 20
        eventPlayer.setMaxHealth(eventPlayer.Q)
        lbl_0:
        eventPlayer.startHoT(eventPlayer, 2, 125)
        eventPlayer.setDamageDealt(170)
        wait(0.25)
        waitUntil(eventPlayer.isHoldingButton(Button.SECONDARY_FIRE) or eventPlayer.isInSpawnRoom(), 4)
        eventPlayer.setAbilityCooldown(Button.SECONDARY_FIRE, 7)
        eventPlayer.setDamageDealt(125)
        destroyEffect(eventPlayer.Effects[2])
    elif eventPlayer.selected_hero_list_number == 3 and not eventPlayer.Is_Using_Ultimate and eventPlayer.getAbilityCharge(Button.ABILITY_2) == 3:
        eventPlayer.saint_lucy_person.clearStatusEffect(Status.UNKILLABLE)
        eventPlayer.saint_lucy_person = ([player for player in eventPlayer.getPlayersInViewAngle(eventPlayer.getTeam(), 80) if player.isAlive() and entityExists(player) and isInLoS(eventPlayer, player, BarrierLos.PASS_THROUGH_BARRIERS)])[0]
        eventPlayer.setAbilityCharge(Button.ABILITY_2, 0)
        async(SaintLucy_ab2_loop, AsyncBehavior.RESTART)


def SaintLucy_ab2_loop():
    @Name "Saint Lucy Brigg ab2 loop"
    
    destroyEffect(eventPlayer.Effects[11])
    if not entityExists(eventPlayer.saint_lucy_person):
        goto lbl_0
    async(saint_lucy_subroutine, AsyncBehavior.RESTART)
    smallMessage([eventPlayer, eventPlayer.saint_lucy_person], "{0} Immorality Link Created".format(heroIcon(Hero.BRIGITTE)))
    eventPlayer.saint_lucy_person.setStatusEffect(null, Status.UNKILLABLE, 9999)
    createBeam(getAllPlayers(), Beam.MERCY_HEAL, updateEveryTick(eventPlayer), updateEveryTick(eventPlayer.saint_lucy_person), Color.TEAM_1, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.Effects[11] = getLastCreatedEntity()
    waitUntil(eventPlayer.isInSpawnRoom() or not eventPlayer.saint_lucy_person.hasStatusEffect(Status.UNKILLABLE) or eventPlayer.isDead() or eventPlayer.Is_Using_Ultimate or not entityExists(eventPlayer.saint_lucy_person) or not isInLoS(eventPlayer.getEyePosition(), eventPlayer.saint_lucy_person.getEyePosition(), BarrierLos.PASS_THROUGH_BARRIERS), 99999)
    destroyEffect(eventPlayer.Effects[11])
    wait(0.15)
    eventPlayer.saint_lucy_person.clearStatusEffect(Status.UNKILLABLE)
    smallMessage([eventPlayer, eventPlayer.saint_lucy_person], "{0} Link broken".format(heroIcon(Hero.BRIGITTE)))
    wait(4)
    waitUntil(eventPlayer.isInSpawnRoom() or not entityExists(eventPlayer.saint_lucy_person) or isInLoS(eventPlayer, eventPlayer.saint_lucy_person, BarrierLos.PASS_THROUGH_BARRIERS), 99999)
    lbl_0:
    if eventPlayer.isAlive() and not eventPlayer.isInSpawnRoom() and not eventPlayer.Is_Using_Ultimate and eventPlayer.saint_lucy_person.isAlive() and entityExists(eventPlayer.saint_lucy_person):
        goto RULE_START


def saint_lucy_subroutine():
    @Name "Saint Lucy Subroutine give ULT"
    
    if eventPlayer.saint_lucy_person.getUltCharge() > 45:
        goto lbl_0
    eventPlayer.setUltCharge(eventPlayer.getUltCharge() + 2)
    eventPlayer.saint_lucy_person.setUltCharge(eventPlayer.saint_lucy_person.getUltCharge() + 3)
    lbl_0:
    wait(0.7)
    if eventPlayer.isAlive() and not eventPlayer.isInSpawnRoom() and eventPlayer.saint_lucy_person.isAlive() and entityExists(eventPlayer.saint_lucy_person):
        goto RULE_START


rule "All Rein Ab1":
    @Event eachPlayer
    @Hero reinhardt
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.isInSpawnRoom() == false
    
    if eventPlayer.selected_hero_list_number == null and eventPlayer.getAbilityCooldown(Button.ABILITY_1) == null:
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 9)
        createEffect(getAllPlayers(), Effect.BAD_AURA, Color.RED, eventPlayer, 3, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[true] = getLastCreatedEntity()
        eventPlayer.setDamageReceived(60)
        eventPlayer.setDamageDealt(185)
        eventPlayer.playerSpeed[false] += 70
        eventPlayer.setGravity(65)
        waitUntil(eventPlayer.isInSpawnRoom(), 4)
        eventPlayer.setDamageDealt(165)
        eventPlayer.playerSpeed[false] -= 70
        eventPlayer.setGravity(100)
        destroyEffect(eventPlayer.Effects[true])
        eventPlayer.setDamageReceived(70)
    elif eventPlayer.D == false and eventPlayer.getAbilityCooldown(Button.ABILITY_1) == null and eventPlayer.selected_hero_list_number == 1:
        createEffect(getAllPlayers(), Effect.SPARKLES, Color.ORANGE, eventPlayer, 14, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[3] = getLastCreatedEntity()
        createEffect(getAllPlayers(), Effect.RING, Color.ORANGE, updateEveryTick(eventPlayer.getPosition()), 14, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[2] = getLastCreatedEntity()
        eventPlayer.Q = true
        eventPlayer.playerSpeed[false] -= 20
        eventPlayer.startHoT(eventPlayer, 1.6, 140)
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 12)
        async(iskandar_cancel_animations_loop, AsyncBehavior.RESTART)
        waitUntil(eventPlayer.isDead() or eventPlayer.isInSpawnRoom(), 3.5)
        eventPlayer.Q = false
        eventPlayer.playerSpeed[false] += 20
        destroyEffect(eventPlayer.Effects[3])
        destroyEffect(eventPlayer.Effects[2])
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION_SOUND, Color.WHITE, eventPlayer, 25)
    elif eventPlayer.selected_hero_list_number == 2 and eventPlayer.getAbilityCooldown(Button.ABILITY_1) == null:
        damage(getPlayersInRadius(eventPlayer, 11, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES), eventPlayer, eventPlayer.getUltCharge() * 2)
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.YELLOW, eventPlayer, 12)
        wait(0.25)
        eventPlayer.setUltCharge(0)
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 5)
    elif eventPlayer.selected_hero_list_number == 3:
        if eventPlayer.X == 1:
            eventPlayer.setMoveSpeed(225)
            eventPlayer.setDamageReceived(175)
            eventPlayer.setDamageDealt(25)
            eventPlayer.startScalingSize(0.5, true)
            eventPlayer.X = 2
            eventPlayer.setProjectileSpeed(600)
        elif eventPlayer.X == 2:
            eventPlayer.setProjectileSpeed(120)
            eventPlayer.setMoveSpeed(110)
            eventPlayer.setDamageReceived(40)
            eventPlayer.setDamageDealt(225)
            eventPlayer.stopScalingSize()
            eventPlayer.X = 1
            waitUntil(eventPlayer.isInSpawnRoom(), 6)
            smallMessage(eventPlayer, "You can change size now")
    elif eventPlayer.selected_hero_list_number == 5 and eventPlayer.getAbilityCooldown(Button.ABILITY_1) == null:
        FoV_and_LoS_player_select()
        eventPlayer.C = eventPlayer.FoV_and_lineOFsight_player.getSlot() + 5
        if not entityExists(eventPlayer.FoV_and_lineOFsight_player):
            goto lbl_0
        #my variable at the slot ( whatever it is , 0 , 1 , 2 ) =  attacker
        eventPlayer.A[eventPlayer.FoV_and_lineOFsight_player.getSlot()] = eventPlayer.FoV_and_lineOFsight_player
        #my variable at the slot ( whatever it is , 0 , 1 , 2 ) =  attacker
        eventPlayer.A[eventPlayer.C] += 0.15
        smallMessage(getAllPlayers(), "{0} Adapted {2}% to {1}".format(heroIcon(Hero.REINHARDT), eventPlayer.FoV_and_lineOFsight_player, eventPlayer.A[eventPlayer.C] * 100))
        lbl_0:
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 11)


def iskandar_cancel_animations_loop():
    @Name "Iskandar ab1 (subroutine)"
    
    getPlayersInRadius(eventPlayer, 14, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF).cancelPrimaryAction()
    wait(0.05)
    if eventPlayer.Q and not eventPlayer.isInSpawnRoom():
        goto RULE_START


rule "heracles revive parsive":
    @Event playerDied
    @Hero reinhardt
    @Condition eventPlayer.isDummy() == false
    @Condition eventPlayer.selected_hero_list_number == null
    @Condition eventPlayer.selecting_HUD == false
    
    if eventPlayer.Berserker_lives >= 1:
        eventPlayer.setStatusEffect(null, Status.BURNING, 3)
        smallMessage(getAllPlayers(), "RESSURECTING BERSERKER")
        smallMessage(getAllPlayers(), "{0} {1}".format("Berserker lives left", eventPlayer.Berserker_lives))
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.PURPLE, eventPlayer, 9)
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION_SOUND, Color.AQUA, eventPlayer, 100)
        wait(1.5)
        eventPlayer.Berserker_lives -= true
        eventPlayer.resurrect()
    elif eventPlayer.Berserker_lives == null:
        smallMessage(getAllPlayers(), "Berserker defeated")


def frankenstein_good_loop():
    @Name "Frankenstein Good ULT on teammates stuff (subroutine)"
    
    eventPlayer.O = getPlayersInRadius(eventPlayer, 11, eventPlayer.getTeam(), LosCheck.OFF)
    for eventPlayer.for_loop in range(0, len(eventPlayer.O), true):
        eventPlayer.O[eventPlayer.for_loop].setUltCharge(eventPlayer.O[eventPlayer.for_loop].getUltCharge() + 1.5)
    wait(0.5)
    if not eventPlayer.isInSpawnRoom() and entityExists(eventPlayer):
        goto RULE_START


rule "Iskandar jump":
    @Event eachPlayer
    @Hero reinhardt
    @Condition eventPlayer.isJumping() == true
    @Condition eventPlayer.getAltitude() <= 4
    @Condition (eventPlayer.hasStatusEffect(Status.FROZEN) or eventPlayer.hasStatusEffect(Status.STUNNED) or eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN)) == false
    @Condition eventPlayer.selected_hero_list_number == 1
    @Condition eventPlayer.selecting_HUD == false
    @Condition eventPlayer.Q != true
    
    eventPlayer.setGravity(20)
    eventPlayer.applyImpulse(Vector.UP, 5, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
    wait(0.2)
    eventPlayer.applyImpulse(eventPlayer.getFacingDirection(), 35, Relativity.TO_WORLD, Impulse.INCORPORATE_CONTRARY_MOTION)
    eventPlayer.setGravity(100)
    wait(5)


rule "All hanzo faster arrows":
    @Event eachPlayer
    @Hero hanzo
    @Condition eventPlayer.isUsingAbility2() == true
    @Condition eventPlayer.selecting_HUD == false
    
    eventPlayer.setProjectileSpeed(1000)
    waitUntil(not eventPlayer.isUsingAbility2(), 99999)
    eventPlayer.setProjectileSpeed(175)
    wait(0.1)
    __skipIf__(not eventPlayer.selected_hero_list_number in [2, 5], true)
    eventPlayer.setAbilityCooldown(Button.ABILITY_2, 7)


rule "All Hanzo Ab1":
    @Event eachPlayer
    @Hero hanzo
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_1) == 0
    @Condition eventPlayer.selecting_HUD == false
    
    if eventPlayer.selected_hero_list_number == 2:
        if isInLoS(eventPlayer, eventPlayer.O, BarrierLos.PASS_THROUGH_BARRIERS):
            eventPlayer.P[0] = eventPlayer
            eventPlayer.P[1] = eventPlayer + vect(random.randint(-3, 4), 3, random.randint(true, 6))
            eventPlayer.P[2] = eventPlayer.P[true] + vect(random.randint(true, 5), random.randint(-1, 2), random.randint(3, 6))
            eventPlayer.P[3] = eventPlayer.P[2] + vect(random.randint(-3, 7), random.randint(-3, true), random.randint(3, 6))
            eventPlayer.P[4] = eventPlayer.O
            for eventPlayer.for_loop in range(4):
                createBeam(getAllPlayers(), Beam.BAD, eventPlayer.P[eventPlayer.for_loop], eventPlayer.P[1 + eventPlayer.for_loop], Color.YELLOW, EffectReeval.NONE)
                eventPlayer.Effects[eventPlayer.for_loop + 5] = getLastCreatedEntity()
                playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.YELLOW, eventPlayer, 100)
                wait(0.15)
            playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.YELLOW, eventPlayer.O, 1)
            damage(eventPlayer.O, eventPlayer, 80)
            eventPlayer.O = []
            wait(0.45)
            destroyEffect(eventPlayer.Effects[5])
            destroyEffect(eventPlayer.Effects[6])
            destroyEffect(eventPlayer.Effects[7])
            destroyEffect(eventPlayer.Effects[8])
            wait(0.25)
        else:
            eventPlayer.O = []
            smallMessage(eventPlayer, "Target is behind a wall")
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 7)
    elif eventPlayer.selected_hero_list_number == 3:
        destroyIcon(eventPlayer.Effects[2])
        FoV_and_LoS_player_select()
        createIcon(getPlayers(eventPlayer.getTeam()), eventPlayer.FoV_and_lineOFsight_player, Icon.WARNING, IconReeval.VISIBILITY_AND_POSITION, Color.GREEN, false)
        eventPlayer.Effects[2] = getLastCreatedEntity()
        smallMessage(eventPlayer.FoV_and_lineOFsight_player, "You are being tracked by Atalante")
        eventPlayer.FoV_and_lineOFsight_player.startForcingOutlineFor(getPlayers(eventPlayer.getTeam()), true, Color.LIME_GREEN, OutlineVisibility.ALWAYS)
        waitUntil(not eventPlayer.FoV_and_lineOFsight_player, 0.6)
        waitUntil(not eventPlayer.FoV_and_lineOFsight_player or eventPlayer.FoV_and_lineOFsight_player.isDead() or eventPlayer.isDead() or eventPlayer.isHoldingButton(Button.ABILITY_1) or eventPlayer.isInSpawnRoom() or not isInLoS(eventPlayer, eventPlayer.FoV_and_lineOFsight_player, BarrierLos.PASS_THROUGH_BARRIERS), 9999)
        eventPlayer.FoV_and_lineOFsight_player.stopForcingOutlineFor(getAllPlayers())
        destroyIcon(eventPlayer.Effects[2])
        eventPlayer.Effects[2] = 5
        wait()
        eventPlayer.FoV_and_lineOFsight_player = null
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 5)
    elif eventPlayer.selected_hero_list_number == 4:
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 5)
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.WHITE, eventPlayer + vect(false, 1.5, false), 7)
        playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.WHITE, eventPlayer, 70)
        ([player for player in eventPlayer.getPlayersInViewAngle(getOppositeTeam(eventPlayer.getTeam()), 65) if distance(eventPlayer, player) <= 7]).applyImpulse(eventPlayer.getFacingDirection(), 55, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
    elif eventPlayer.selected_hero_list_number == 5:
        for eventPlayer.for_loop in range(0, 8, true):
            eventPlayer.setAbilityCooldown(Button.MELEE, false)
            eventPlayer.forceButtonPress(Button.MELEE)
            wait()
            eventPlayer.cancelPrimaryAction()
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 5)
    elif eventPlayer.selected_hero_list_number == 6:
        eventPlayer.X = eventPlayer.getPosition() + vect(false, 1.5, false)
        eventPlayer.J = 0
        chase(eventPlayer.J, 7, duration=2, ChaseReeval.DESTINATION_AND_DURATION)
        createEffect(getAllPlayers(), Effect.ORB, Color.SKY_BLUE, eventPlayer.X, true, EffectReeval.NONE)
        eventPlayer.Effects[5] = getLastCreatedEntity()
        createEffect(getAllPlayers(), Effect.RING, Color.RED, eventPlayer.X, eventPlayer.J, EffectReeval.POSITION_AND_RADIUS)
        eventPlayer.Effects[8] = getLastCreatedEntity()
        createIcon(getAllPlayers(), eventPlayer.X, Icon.WARNING, IconReeval.VISIBILITY_AND_POSITION, Color.WHITE, false)
        eventPlayer.Effects[7] = getLastCreatedEntity()
        eventPlayer.H = true
        async(tesla_ab1_loop, AsyncBehavior.RESTART)
        waitUntil(eventPlayer.isDead() or eventPlayer.isInSpawnRoom(), 10)
        stopChasingVariable(eventPlayer.J)
        destroyIcon(eventPlayer.Effects[7])
        destroyEffect(eventPlayer.Effects[5])
        destroyEffect(eventPlayer.Effects[8])
        eventPlayer.H = false
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 11)


rule "All Hanzo Ab2":
    @Event eachPlayer
    @Hero hanzo
    @Condition (eventPlayer.isUsingAbility2() or eventPlayer.isHoldingButton(Button.ABILITY_2)) == true
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.selecting_HUD == false
    
    if eventPlayer.selected_hero_list_number == 3 and eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0:
        if entityExists(eventPlayer.FoV_and_lineOFsight_player):
            if eventPlayer.FoV_and_lineOFsight_player.getAltitude() < 3:
                smallMessage(eventPlayer.FoV_and_lineOFsight_player, "{0} Stunned you!!!".format(heroIcon(Hero.HANZO)))
                eventPlayer.FoV_and_lineOFsight_player.applyImpulse(eventPlayer.FoV_and_lineOFsight_player.getVelocity(), eventPlayer.FoV_and_lineOFsight_player.getSpeed() * -0.5, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
                eventPlayer.FoV_and_lineOFsight_player.playerSpeed[false] -= 40
                eventPlayer.FoV_and_lineOFsight_player.setStatusEffect(eventPlayer, Status.HACKED, 4)
                waitUntil(eventPlayer.Effects[2] == 5, 4)
                eventPlayer.FoV_and_lineOFsight_player.playerSpeed[false] += 40
            else:
                eventPlayer.FoV_and_lineOFsight_player.setStatusEffect(eventPlayer, Status.ROOTED, 2.5)
                eventPlayer.FoV_and_lineOFsight_player.applyImpulse(Vector.DOWN, 10000, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 11)
    elif eventPlayer.getAbilityCooldown(Button.ABILITY_2) == null and eventPlayer.selected_hero_list_number == 4:
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 3)
        raycast_hit_position2()
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.SKY_BLUE, eventPlayer.raycast_hit_position2, 4)
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION_SOUND, Color.WHITE, eventPlayer.raycast_hit_position2, 60)
        wait(0.6)
        createEffect(getAllPlayers(), Effect.LIGHT_SHAFT, Color.SKY_BLUE, eventPlayer.raycast_hit_position2, 4, EffectReeval.NONE)
        eventPlayer.Effects[3] = getLastCreatedEntity()
        eventPlayer.Q = [player for player in getLivingPlayers(getOppositeTeam(eventPlayer.getTeam())) if distance(vect(player.getPosition().x, false, player.getPosition().z), vect(eventPlayer.raycast_hit_position2.getPosition().x, false, eventPlayer.raycast_hit_position2.getPosition().z)) <= 4]
        damage(eventPlayer.Q, eventPlayer, 60)
        eventPlayer.Q.applyImpulse(Vector.UP, 10, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
        wait(0.1)
        destroyEffect(eventPlayer.Effects[3])
        waitUntil(eventPlayer.isHoldingButton(Button.ABILITY_2), 0.4)
        createEffect(getAllPlayers(), Effect.LIGHT_SHAFT, Color.SKY_BLUE, eventPlayer.raycast_hit_position2, 6, EffectReeval.NONE)
        eventPlayer.Effects[3] = getLastCreatedEntity()
        eventPlayer.Q = [player for player in getLivingPlayers(getOppositeTeam(eventPlayer.getTeam())) if distance(vect(player.getPosition().x, false, player.getPosition().z), vect(eventPlayer.raycast_hit_position2.getPosition().x, false, eventPlayer.raycast_hit_position2.getPosition().z)) <= 6]
        damage(eventPlayer.Q, eventPlayer, 65)
        eventPlayer.Q.applyImpulse(Vector.UP, 15, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
        wait(0.1)
        destroyEffect(eventPlayer.Effects[3])


def atalante_ultimate_loop():
    @Name "Atalante ultimate 2/2 (damage loop)"
    
    eventPlayer.V = eventPlayer.raycast_hit_position2 + vect(random.randint(-20, 20), false, random.randint(-20, 20))
    playEffect(getAllPlayers(), DynamicEffect.EXPLOSION_SOUND, Color.PURPLE, eventPlayer.V, 150)
    playEffect(getAllPlayers(), DynamicEffect.DOOMFIST_METEOR_STRIKE_IMPACT, Color.PURPLE, eventPlayer.V, 6.5)
    damage(getPlayersInRadius(eventPlayer.V, 6.5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, 110)
    wait(0.05)
    if eventPlayer.Is_Using_Ultimate:
        goto RULE_START


def tesla_ab1_loop():
    @Name "Tesla Hanzo Electricity orb (ightning damage subroutine)"
    
    eventPlayer.Medusa_trap = [player for player in getPlayersInRadius(eventPlayer.X, eventPlayer.J, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES) if player.isAlive()]
    for eventPlayer.for_loop in range(0, len(eventPlayer.Medusa_trap), true):
        createBeam(getAllPlayers(), Beam.BAD, eventPlayer.Medusa_trap[eventPlayer.for_loop], eventPlayer.X, Color.SKY_BLUE, EffectReeval.NONE)
        eventPlayer.Medusa_trap[eventPlayer.for_loop].lighting_pool[1] = getLastCreatedEntity()
        wait(0.08)
        destroyEffect(eventPlayer.Medusa_trap[eventPlayer.for_loop].lighting_pool[1])
        damage(eventPlayer.Medusa_trap[eventPlayer.for_loop], eventPlayer, 45)
        if not eventPlayer.H:
            return
    wait(0.25)
    if eventPlayer.H:
        goto RULE_START


def tawara_tota_remove_armor():
    @Name "ab2 triple arrows (remove armor - subroutine)"
    
    wait(4)
    eventPlayer.removeAllHealthPools()


rule "Hanzo Tesla Ab2 electricity attack":
    @Event eachPlayer
    @Hero hanzo
    @Condition eventPlayer.isUsingAbility2() == true
    @Condition eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) == true
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.selecting_HUD == false
    
    if eventPlayer.selected_hero_list_number == 6:
        if eventPlayer.Z >= 1:
            eventPlayer.Z -= 1
            raycast_hit_player()
            raycast_hit_position1()
            createBeam(getAllPlayers(), Beam.BAD, eventPlayer, eventPlayer.raycast_hit_position, Color.BLUE, EffectReeval.COLOR)
            eventPlayer.Effects[4] = getLastCreatedEntity()
            damage(eventPlayer.raycast_hit_player if entityExists(eventPlayer.raycast_hit_player) else getPlayersInRadius(eventPlayer.raycast_hit_position, 3, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES_AND_ENEMY_BARRIERS), eventPlayer, 60 if entityExists(eventPlayer.raycast_hit_player) else 25)
            playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.WHITE, eventPlayer.raycast_hit_position, 50)
            playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.BLUE, eventPlayer.raycast_hit_position, 2)
            wait(0.085)
            destroyEffect(eventPlayer.Effects[4])
            tesla_cooldown_reset()


def tesla_cooldown_reset():
    @Name "tesla cooldown ability loop"
    
    if eventPlayer.Z <= 0:
        eventPlayer.forceButtonPress(Button.ABILITY_2)
        eventPlayer.setStatusEffect(null, Status.HACKED, 0.086)
        eventPlayer.Z = 6
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 7)
        return


rule "Pharah all Ab1":
    @Event eachPlayer
    @Hero pharah
    @Condition (eventPlayer.isHoldingButton(Button.ABILITY_1) or eventPlayer.isHoldingButton(Button.SECONDARY_FIRE)) == true
    @Condition (eventPlayer.hasStatusEffect(Status.FROZEN) or eventPlayer.hasStatusEffect(Status.ROOTED) or eventPlayer.hasStatusEffect(Status.STUNNED) or eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN)) == false
    @Condition eventPlayer.selecting_HUD == false
    
    if not eventPlayer.selected_hero_list_number and eventPlayer.isHoldingButton(Button.ABILITY_1):
        eventPlayer.setGravity(false)
        eventPlayer.applyImpulse(eventPlayer.getFacingDirection(), 18 if eventPlayer.S == true else 10, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
        wait(0.1)
        if RULE_CONDITION:
            goto RULE_START
    elif eventPlayer.selected_hero_list_number == 1:
        if eventPlayer.X > 0:
            eventPlayer.X -= 1
            eventPlayer.playerSpeed[false] += 40
            eventPlayer.applyImpulse(eventPlayer.getFacingDirection() if eventPlayer.isHoldingButton(Button.ABILITY_1) else eventPlayer.getFacingDirection() * -1, 25 if eventPlayer.isHoldingButton(Button.ABILITY_1) else 20, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
            wait(0.35)
            eventPlayer.playerSpeed[false] -= 40
    wait(0.1)


rule "Pharah all Ab2":
    @Event eachPlayer
    @Hero pharah
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0
    @Condition (eventPlayer.hasStatusEffect(Status.FROZEN) or eventPlayer.hasStatusEffect(Status.STUNNED) or eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN)) == false
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.selecting_HUD == false
    
    if eventPlayer.selected_hero_list_number == null:
        playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.GREEN, eventPlayer, 100)
        playEffect(getAllPlayers(), DynamicEffect.GOOD_PICKUP_EFFECT, Color.GREEN, eventPlayer, 1)
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 10)
        eventPlayer.setMoveSpeed(500)
        eventPlayer.S = true
        waitUntil(isAssemblingHeroes(), 5)
        eventPlayer.setMoveSpeed(135)
        eventPlayer.S = false
    elif eventPlayer.selected_hero_list_number == 1 and not eventPlayer.isUsingAbility2():
        eventPlayer.trump_wait_middle = getPlayersInRadius(eventPlayer, 6, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES)
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 8)
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.LIME_GREEN, eventPlayer + vect(false, 0.65, false), 6)
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION_SOUND, Color.LIME_GREEN, eventPlayer + vect(false, 1.5, false), 90)
        damage(eventPlayer.trump_wait_middle, eventPlayer, 5)
        eventPlayer.trump_wait_middle.setStatusEffect(null, Status.ROOTED, 1.5)
        eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 1)


rule "Ishtar and David stop in mid air":
    @Event eachPlayer
    @Hero pharah
    @Condition eventPlayer.isHoldingButton(Button.CROUCH) == true
    
    eventPlayer.Medusa_trap = eventPlayer.getPosition()
    eventPlayer.startForcingPosition(eventPlayer, false)
    wait()
    eventPlayer.stopForcingPosition()
    wait(0.5)


rule "David ab1 evasion (add variable)":
    @Event eachPlayer
    @Hero pharah
    @Condition eventPlayer.X < 3
    @Condition eventPlayer.X > -1
    @Condition eventPlayer.selected_hero_list_number == 1
    
    wait(2.5)
    eventPlayer.X += true
    if RULE_CONDITION:
        goto RULE_START


rule "All ab1 & ab2 Zenyatta":
    @Event eachPlayer
    @Hero zenyatta
    @Condition (eventPlayer.isHoldingButton(Button.ABILITY_1) or eventPlayer.isHoldingButton(Button.ABILITY_2)) == true
    @Condition eventPlayer.isAlive() == true
    
    if eventPlayer.selected_hero_list_number == null:
        if eventPlayer.isHoldingButton(Button.ABILITY_2):
            playEffect(getAllPlayers(), DynamicEffect.GOOD_EXPLOSION, Color.RED, eventPlayer, 1)
            playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.AQUA, eventPlayer, 100)
            eventPlayer.X = true
            wait(5)
            eventPlayer.X = false
            playEffect(getAllPlayers(), DynamicEffect.BAD_PICKUP_EFFECT, Color.AQUA, eventPlayer, 1)
            playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.AQUA, eventPlayer, 100)
            wait(11)
            smallMessage(eventPlayer, "{0} Random Facing ability usable".format(heroIcon(Hero.ZENYATTA)))
    elif eventPlayer.selected_hero_list_number == 1:
        if eventPlayer.isHoldingButton(Button.ABILITY_1):
            raycast_hit_position2()
            createEffect(getAllPlayers(), Effect.LIGHT_SHAFT, Color.RED, eventPlayer.raycast_hit_position2, 8, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[2] = getLastCreatedEntity()
            eventPlayer.filtered_array = [player for player in getLivingPlayers(getOppositeTeam(eventPlayer.getTeam())) if isInLoS(eventPlayer.raycast_hit_position2, player, BarrierLos.PASS_THROUGH_BARRIERS) and distance(vect(eventPlayer.raycast_hit_position2.x, false, eventPlayer.raycast_hit_position2.z), vect(player.getPosition().x, false, player.getPosition().z)) <= 8]
            damage(eventPlayer.filtered_array, eventPlayer, 20)
            eventPlayer.filtered_array.applyImpulse(Vector.DOWN, 10000, Relativity.TO_WORLD, Impulse.INCORPORATE_CONTRARY_MOTION)
            eventPlayer.filtered_array.setStatusEffect(null, Status.ROOTED, true)
            wait(0.15)
            destroyEffect(eventPlayer.Effects[2])
            playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.RED, eventPlayer.raycast_hit_position2, 150)
            wait(9)
            smallMessage(eventPlayer, "Ability 1 available")
    elif eventPlayer.selected_hero_list_number == 2 and eventPlayer.isHoldingButton(Button.ABILITY_2):
        eventPlayer.startForcingThrottle(false, false, false, false, false, false)
        createEffect(getAllPlayers(), Effect.SPHERE, Color.RED, eventPlayer, 5, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[2] = getLastCreatedEntity()
        for eventPlayer.for_loop in range(0, 5, true):
            playEffect(getAllPlayers(), DynamicEffect.BUFF_EXPLOSION_SOUND, Color.WHITE, eventPlayer, 300)
            damage(getPlayersInRadius(eventPlayer, 5, Team.ALL, LosCheck.OFF).exclude(eventPlayer), eventPlayer, 75)
            wait(0.2)
        destroyEffect(eventPlayer.Effects[2])
        eventPlayer.stopForcingThrottle()
        wait(5)
        smallMessage(eventPlayer, "\"E\" is ready")
    elif eventPlayer.selected_hero_list_number == 3:
        if eventPlayer.isHoldingButton(Button.ABILITY_2):
            if eventPlayer.Z == false:
                #W = position of circle yellow; Z = if drone is activated or not;
                eventPlayer.Z = true
                create_dummy_of_EventPlayer()
                eventPlayer.Solomon_pillar_array = getLastCreatedEntity()
                eventPlayer.Solomon_pillar_array.startScalingSize(1.35, true)
                eventPlayer.Solomon_pillar_array.attachTo(eventPlayer, vect(false, 1.6, false))
                eventPlayer.Solomon_pillar_array.setInvisibility(Invis.ALL)
                createEffect(getAllPlayers().exclude(eventPlayer), Effect.ORB, Color.YELLOW, updateEveryTick(eventPlayer.Solomon_pillar_array.getPosition() + vect(false, 1.55, false)), 3, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
                eventPlayer.Effects[3] = getLastCreatedEntity()
                eventPlayer.Solomon_pillar_array.addHealthPool(Health.ARMOR, 175, true, true)
                async(ozymandias_ab2_loop, AsyncBehavior.RESTART)
                waitUntil(not entityExists(eventPlayer.Solomon_pillar_array), 99999)
                #W = position of circle yellow; Z = if drone is activated or not;
                eventPlayer.Z = false
                playEffect(getAllPlayers(), DynamicEffect.BAD_PICKUP_EFFECT, Color.RED, eventPlayer.W, 1)
                playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.RED, eventPlayer.W, 60)
                destroyEffect(eventPlayer.Effects[3])
                #If he despawns it its 7s cooldown / if killed is much bigger
                wait(10)
                smallMessage(eventPlayer, "Protection orb spawnable")


def ozymandias_ab2_loop():
    @Name "Ozymandias Damage loop for Orb"
    
    eventPlayer.Solomon_pillar_array.Q = [player for player in getPlayersInRadius(eventPlayer, 13, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES) if player.isAlive()]
    for eventPlayer.for_loop in range(0, len(eventPlayer.Solomon_pillar_array.Q), true):
        damage(eventPlayer.Solomon_pillar_array.Q[eventPlayer.for_loop], eventPlayer, 25)
        createBeam(getAllPlayers(), Beam.OMNIC_SLICER, eventPlayer.Solomon_pillar_array, eventPlayer.Solomon_pillar_array.Q[eventPlayer.for_loop], Color.YELLOW, EffectReeval.NONE)
        eventPlayer.Effects[6] = getLastCreatedEntity()
        wait(0.4)
        destroyEffect(eventPlayer.Effects[6])
    wait(0.1)
    if entityExists(eventPlayer.Solomon_pillar_array):
        goto RULE_START


rule "Adrunf Himvler ab 1 morale boost":
    @Event playerDealtHealing
    @Hero zenyatta
    @Condition eventAbility == Button.ABILITY_1
    @Condition eventPlayer.selected_hero_list_number == null
    @Condition eventPlayer.isInSpawnRoom() == false
    
    eventPlayer.setUltCharge(eventPlayer.getUltCharge() + 10)
    playEffect(getAllPlayers(), DynamicEffect.BRIGITTE_REPAIR_PACK_ARMOR, Color.WHITE, healee, 1)
    playEffect(getAllPlayers(), DynamicEffect.GOOD_EXPLOSION, Color.YELLOW, healee, 1)
    healee.addHealthPool(Health.NORMAL, 300, false, true)
    eventPlayer.Effects[7] = getLastCreatedHealthPool()
    waitUntil(eventPlayer.isInSpawnRoom(), 3)
    removeHealthPool(eventPlayer.Effects[7])
    playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.WHITE, healee, 1)
    playEffect(getAllPlayers(), DynamicEffect.BAD_PICKUP_EFFECT, Color.BLUE, healee, 1)
    wait(9)
    smallMessage(eventPlayer, "You can boost now")


rule "Lancelot ab2 2/2 (damage reversal)":
    @Event playerTookDamage
    @Hero bastion
    @Condition eventPlayer.selected_hero_list_number == 1
    @Condition eventPlayer.R == true
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.isDummy() == false
    @Condition eventPlayer != attacker
    
    eventPlayer.setHealth(eventPlayer.getHealth() + eventDamage)
    damage(attacker, eventPlayer, eventDamage * 2.5)


def solomon_ab1_loop():
    @Name "Solomon ab1 ult steal (subroutine)"
    
    raycast_hit_player()
    eventPlayer.Q = eventPlayer.raycast_hit_player
    if entityExists(eventPlayer.raycast_hit_player):
        goto lbl_0
    eventPlayer.Q = [player for player in getPlayersInRadius(eventPlayer.raycast_hit_position2, 2, Team.ALL, LosCheck.SURFACES) if player.isAlive()][0].exclude(eventPlayer)
    lbl_0:
    if eventPlayer.Q.getTeam() != eventPlayer.getTeam():
        if eventPlayer.Q.getUltCharge() >= 2:
            eventPlayer.setUltCharge(eventPlayer.getUltCharge() + 1)
            eventPlayer.Q.setUltCharge(eventPlayer.Q.getUltCharge() - 0.7)
    else:
        if eventPlayer.getUltCharge() >= 2:
            eventPlayer.setUltCharge(eventPlayer.getUltCharge() - 8)
            eventPlayer.Q.setUltCharge(eventPlayer.Q.getUltCharge() + 4)
    wait(0.09)
    if eventPlayer.L:
        goto RULE_START


rule "Solomon ultimate damage":
    @Event playerDealtDamage
    @Hero reaper
    @Condition eventAbility == Button.ULTIMATE
    @Condition eventPlayer.selected_hero_list_number == null
    
    victim.startDoT(eventPlayer, 3, 20)


rule "All reaper Ab1":
    @Event eachPlayer
    @Hero reaper
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_1) == null
    @Condition eventPlayer.selecting_HUD == false
    @Condition eventPlayer.isInSpawnRoom() == false
    
    if eventPlayer.selected_hero_list_number == 0 and not eventPlayer.L:
        eventPlayer.color = Color.VIOLET
        async(create_beam_effect_subroutine, AsyncBehavior.RESTART)
        eventPlayer.L = true
        async(solomon_ab1_loop, AsyncBehavior.RESTART)
        waitUntil(not eventPlayer.isHoldingButton(Button.ABILITY_1), 99999)
        eventPlayer.L = false
        destroy_beam_effect_subroutine()
    elif eventPlayer.selected_hero_list_number == 1:
        eventPlayer.P = [i for i in eventPlayer.getPlayerClosestToReticle(eventPlayer.getTeam()) if entityExists(i) and not i.isInSpawnRoom()]
        if not entityExists(eventPlayer.P):
            goto lbl_0
        async(reaper_set_lower_HP, AsyncBehavior.RESTART)
        eventPlayer.G = true
        wait(0.25)
        waitUntil(eventPlayer.isHoldingButton(Button.ABILITY_1) or eventPlayer.isDead() or eventPlayer.isInSpawnRoom() or not entityExists(eventPlayer) or eventPlayer.P.isDead() or not entityExists(eventPlayer.P), 99999)
        eventPlayer.G = false
        lbl_0:
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 3)
        stopHoT(eventPlayer.heal_over_time)
        eventPlayer.startHoT(eventPlayer, 9999, 30)
        eventPlayer.heal_over_time = getLastHoT()
        async(stop_healing_over_time, AsyncBehavior.RESTART)


rule "All reaper Ab2":
    @Event eachPlayer
    @Hero reaper
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0
    @Condition eventPlayer.selecting_HUD == false
    @Condition eventPlayer.isInSpawnRoom() == false
    @Condition isGameInProgress() == true
    
    if eventPlayer.selected_hero_list_number == null:
        if len(eventPlayer.Solomon_pillar_array) >= 6:
            goto lbl_0
        smallMessage(eventPlayer, "Cursed pillar spawned")
        create_dummy_of_EventPlayer()
        getLastCreatedEntity().startForcingName("SOLOMON POWER PILLAR")
        getLastCreatedEntity().setDamageReceived(70)
        async(Solomon_ab2_loop, AsyncBehavior.RESTART)
        lbl_0:
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 12)
    else:
        create_dummy_of_EventPlayer()
        eventPlayer.Solomon_pillar_array.setMaxHealth(60)
        getLastCreatedEntity().setFacing(Vector.UP, Relativity.TO_WORLD)
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 12)
        wait(0.25)
        waitUntil(eventPlayer.isHoldingButton(Button.ABILITY_2), 4)
        kill(eventPlayer.Solomon_pillar_array, null)


rule "sniper  ab1":
    @Event eachPlayer
    @Hero widowmaker
    @Condition eventPlayer.isUsingAbility1() == true
    @Condition eventPlayer.isInAir() == true
    @Condition eventPlayer.isMoving() == true
    @Condition eventPlayer.E == false
    @Condition eventPlayer.selected_hero_list_number == null
    
    eventPlayer.E = true
    eventPlayer.disallowButton(Button.JUMP)
    eventPlayer.disallowButton(Button.ABILITY_1)
    waitUntil(not eventPlayer.isUsingAbility1(), 99999)
    eventPlayer.startForcingPosition(eventPlayer.getPosition(), true)
    wait(0.1)
    eventPlayer.stopForcingPosition()
    eventPlayer.startForcingThrottle(false, false, false, false, false, false)
    eventPlayer.setGravity(false)
    waitUntil(eventPlayer.isHoldingButton(Button.ABILITY_1) or eventPlayer.isInSpawnRoom() or eventPlayer.hasStatusEffect(Status.STUNNED), 99999)
    eventPlayer.setGravity(100)
    eventPlayer.stopForcingThrottle()
    eventPlayer.E = false
    eventPlayer.allowButton(Button.JUMP)
    eventPlayer.allowButton(Button.ABILITY_1)


rule "sniper  ab2 (stun)":
    @Event playerDealtDamage
    @Hero widowmaker
    @Condition eventAbility == Button.ABILITY_2
    @Condition eventPlayer.selected_hero_list_number == null
    
    if victim.hasStatusEffect(Status.KNOCKED_DOWN):
        goto lbl_0
    victim.setStatusEffect(eventPlayer, Status.KNOCKED_DOWN, 4.5)
    lbl_0:
    getLivingPlayers(getOppositeTeam(eventPlayer.getTeam())).startForcingOutlineFor(getPlayers(eventPlayer.getTeam()), true, Color.VIOLET, OutlineVisibility.ALWAYS)
    waitUntil(eventPlayer.isInSpawnRoom() or eventPlayer.isDead() or not entityExists(eventPlayer), 6)
    getPlayers(getOppositeTeam(eventPlayer.getTeam())).stopForcingOutlineFor(getPlayers(eventPlayer.getTeam()))


rule "sniper ultimate (setup)":
    @Event playerDealtDamage
    @Hero widowmaker
    @Condition eventPlayer.selected_hero_list_number == null
    
    if eventPlayer.isUsingUltimate():
        if eventAbility in [Button.SECONDARY_FIRE, Button.ABILITY_2]:
            damage(victim, null, victim.getMaxHealth() / 2.1)
        elif eventWasCriticalHit and eventPlayer.isFiringSecondaryFire() and eventAbility == Button.PRIMARY_FIRE:
            eventPlayer.startHoT(eventPlayer, 2.5, 150)
            victim.setStatusEffect(eventPlayer, Status.STUNNED, 2)
    else:
        if eventAbility == Button.ABILITY_2:
            eventPlayer.setUltCharge(eventPlayer.getUltCharge() + 10)


rule "Bastion Alfred || Lancelot reversal Ab2 : give invincible status || Bounty hunter select bounty":
    @Event eachPlayer
    @Hero bastion
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.isAlive() == true
    
    if eventPlayer.selected_hero_list_number == 0:
        eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 4)
        createEffect(getAllPlayers(), Effect.BAD_AURA, Color.BLUE, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[true] = getLastCreatedEntity()
        wait(4)
        destroyEffect(eventPlayer.Effects[true])
        wait(8)
        smallMessage(eventPlayer, "You can use armour now")
    elif eventPlayer.selected_hero_list_number == 1:
        eventPlayer.R = true
        playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.WHITE, eventPlayer, 100)
        eventPlayer.is_damage_reversing = true
        waitUntil(eventPlayer.isInSpawnRoom(), 3.5)
        playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.WHITE, eventPlayer, 100)
        playEffect(getAllPlayers(), DynamicEffect.BAD_PICKUP_EFFECT, Color.RED, eventPlayer, 1)
        eventPlayer.R = false
        eventPlayer.is_damage_reversing = false
        waitUntil(isAssemblingHeroes(), 7)
        smallMessage(eventPlayer, "E ready")
    else:
        destroyIcon(eventPlayer.Effects[2])
        FoV_and_LoS_player_select()
        createIcon(getPlayers(eventPlayer.getTeam()), eventPlayer.FoV_and_lineOFsight_player, Icon.ARROW_DOWN, IconReeval.VISIBILITY_AND_POSITION, Color.RED, false)
        eventPlayer.Effects[2] = getLastCreatedEntity()
        createEffect(getAllPlayers(), Effect.ZENYATTA_ORB_OF_DISCORD_TARGET, Color.WHITE, eventPlayer.FoV_and_lineOFsight_player, 1, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[3] = getLastCreatedEntity()
        smallMessage(eventPlayer.FoV_and_lineOFsight_player, "{0} Marked for High Damage".format(heroIcon(Hero.BASTION)))
        async(bounty_loop, AsyncBehavior.RESTART)
        waitUntil(not isInLoS(eventPlayer, eventPlayer.FoV_and_lineOFsight_player, BarrierLos.PASS_THROUGH_BARRIERS) or eventPlayer.isDead() or eventPlayer.FoV_and_lineOFsight_player.isDead() or not entityExists(eventPlayer.FoV_and_lineOFsight_player) or eventPlayer.isInSpawnRoom(), 9999)
        destroyIcon(eventPlayer.Effects[2])
        destroyEffect(eventPlayer.Effects[3])
        eventPlayer.FoV_and_lineOFsight_player.setDamageReceived(70)
        eventPlayer.FoV_and_lineOFsight_player = null
        wait(7)
        smallMessage(eventPlayer, "Bounty Mark Ready to Use")


rule "Houdini sombra ab2":
    @Event eachPlayer
    @Hero sombra
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0
    @Condition (eventPlayer.is_player_anchored > 0 or eventPlayer.hasStatusEffect(Status.ASLEEP) or eventPlayer.hasStatusEffect(Status.FROZEN) or eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN) or eventPlayer.hasStatusEffect(Status.STUNNED)) == true
    @Condition eventPlayer.selected_hero_list_number == null
    
    eventPlayer.setAbilityCooldown(Button.ABILITY_2, 4)
    eventPlayer.clearStatusEffect(Status.HACKED)
    eventPlayer.clearStatusEffect(Status.ROOTED)
    eventPlayer.clearStatusEffect(Status.BURNING)
    eventPlayer.setStatusEffect(null, Status.FROZEN, 9999)
    eventPlayer.clearStatusEffect(Status.FROZEN)
    eventPlayer.stopForcingPosition()
    eventPlayer.detach()
    eventPlayer.is_player_anchored = null
    eventPlayer.setStatusEffect(null, Status.INVINCIBLE, 1)


rule "Houdini sombra ab 1 (create dummy)":
    @Event eachPlayer
    @Hero sombra
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_1) == null
    @Condition eventPlayer.selected_hero_list_number == null
    @Condition eventPlayer.isInSpawnRoom() == false
    @Condition entityExists(eventPlayer.Solomon_pillar_array) == false
    
    eventPlayer.setAbilityCooldown(Button.ABILITY_1, 8)
    houdini_create_clone()
    wait(0.5)
    waitUntil(not entityExists(eventPlayer.Solomon_pillar_array) or eventPlayer.isInSpawnRoom() or eventPlayer.isHoldingButton(Button.INTERACT) or eventPlayer.Solomon_pillar_array.isDead(), 99999)
    kill(eventPlayer.Solomon_pillar_array, null)
    eventPlayer.Solomon_pillar_array = []
    eventPlayer.setAbilityCooldown(Button.ABILITY_1, 8)


rule "Houdini sombra ab1  (if player dies)":
    @Event playerDied
    @Hero sombra
    @Condition (not eventPlayer.isDummy() and not eventPlayer.selected_hero_list_number or eventPlayer.isDummy()) == true
    
    if not eventPlayer.isDummy():
        if entityExists(eventPlayer.Solomon_pillar_array):
            eventPlayer.teleport(eventPlayer.Solomon_pillar_array)
            eventPlayer.resurrect()
            playEffect(getAllPlayers(), DynamicEffect.GOOD_EXPLOSION, Color.PURPLE, eventPlayer, 1)
            destroyDummy(eventPlayer.getTeam(), eventPlayer.Solomon_pillar_array.getSlot())
            eventPlayer.startHoT(eventPlayer, 0.75, 1000)
    else:
        damage(attacker, eventPlayer, 100)
        destroyDummy(eventPlayer.getTeam(), eventPlayer.getSlot())


rule "Tamamo Cat very fast punch":
    @Event eachPlayer
    @Hero doomfist
    @Condition eventPlayer.isFiringSecondaryFire() == true
    @Condition eventPlayer.selected_hero_list_number == 2
    
    eventPlayer.setMoveSpeed(200)
    waitUntil(not eventPlayer.isFiringSecondaryFire() or eventPlayer.was_damaged, 99999)
    wait()
    eventPlayer.setMoveSpeed(155)
    if eventPlayer.Is_Using_Ultimate:
        goto lbl_0
    eventPlayer.setAbilityCooldown(Button.SECONDARY_FIRE, 7)
    lbl_0:


rule "Quetzaqoatl ultimate landing":
    @Event eachPlayer
    @Hero doomfist
    @Condition eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) == true
    @Condition eventPlayer.isUsingUltimate() == true
    @Condition eventPlayer.Is_Using_Ultimate == true
    @Condition eventPlayer.selected_hero_list_number == 1
    
    waitUntil(not eventPlayer.isUsingUltimate(), 1.5)
    playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.RED, eventPlayer, 12)
    playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.RED, eventPlayer, 100)
    eventPlayer.Is_Using_Ultimate = false


rule "Quetzaqoatl doomfist boost || tamamo Ab 2":
    @Event eachPlayer
    @Hero doomfist
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0
    @Condition eventPlayer.isInSpawnRoom() == false
    
    if eventPlayer.selected_hero_list_number == 1:
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION_SOUND, Color.RED, eventPlayer, 100)
        playEffect(getAllPlayers(), DynamicEffect.GOOD_PICKUP_EFFECT, Color.GREEN, eventPlayer, 1)
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 10)
        eventPlayer.playerSpeed[false] += 110
        eventPlayer.setGravity(35)
        waitUntil(eventPlayer.isInSpawnRoom(), 4)
        eventPlayer.playerSpeed[false] -= 110
        eventPlayer.setGravity(100)
        playEffect(getAllPlayers(), DynamicEffect.GOOD_PICKUP_EFFECT, Color.RED, eventPlayer, 1)
        playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.RED, eventPlayer, 100)
    elif eventPlayer.selected_hero_list_number == 2:
        smallMessage(eventPlayer, "Defense mode")
        createEffect(getAllPlayers(), Effect.LUCIO_SOUND_BARRIER_PROTECTED, Color.TEAM_1, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[2] = getLastCreatedEntity()
        eventPlayer.X = 2
        eventPlayer.setStatusEffect(null, Status.FROZEN, 9999)
        eventPlayer.setDamageReceived(0.001)
        wait(0.45)
        waitUntil(eventPlayer.isHoldingButton(Button.ABILITY_2) or eventPlayer.isInSpawnRoom() or eventPlayer.isDead(), 9999)
        eventPlayer.clearStatusEffect(Status.FROZEN)
        smallMessage(eventPlayer, "Combat mode")
        eventPlayer.X = 1
        eventPlayer.setDamageReceived(70)
        destroyEffect(eventPlayer.Effects[2])
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 4)
        eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 1)
    elif eventPlayer.selected_hero_list_number == 3:
        eventPlayer.B = random.randint(0, 1)
        if eventPlayer.B:
            smallMessage(eventPlayer, "Lucky!!!")
            eventPlayer.startHoT(eventPlayer, 7, 9999)
        else:
            smallMessage(eventPlayer, "Bad roll :(")
            eventPlayer.setHealth(eventPlayer.getHealth() / 2)
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 10)


rule "All Mcree ab1":
    @Event eachPlayer
    @Hero cassidy
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_1) == 0
    @Condition eventPlayer.selecting_HUD == false
    @Condition eventPlayer.Is_Using_Ultimate == false
    
    if eventPlayer.selected_hero_list_number == null:
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 10)
        eventPlayer.T = getPlayersInRadius(eventPlayer, 5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES_AND_ENEMY_BARRIERS)
        eventPlayer.T.setStatusEffect(null, Status.FROZEN, 1.5)
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.SKY_BLUE, eventPlayer, 5)
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION_SOUND, Color.SKY_BLUE, eventPlayer, 80)
    elif eventPlayer.selected_hero_list_number == 1:
        eventPlayer.clearStatusEffect(Status.STUNNED)
        eventPlayer.clearStatusEffect(Status.KNOCKED_DOWN)
        eventPlayer.clearStatusEffect(Status.FROZEN)
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 7)
        eventPlayer.setMoveSpeed(275)
        eventPlayer.setInvisibility(Invis.ALL)
        eventPlayer.setGravity(35)
        eventPlayer.detach()
        eventPlayer.stopForcingPosition()
        eventPlayer.clearStatusEffect(Status.ROOTED)
        eventPlayer.is_player_anchored = null
        eventPlayer.setJumpVerticalSpeed(145)
        waitUntil(eventPlayer.isInSpawnRoom(), 1.5)
        eventPlayer.setInvisibility(Invis.NONE)
        eventPlayer.setMoveSpeed(115)
        eventPlayer.setGravity(100)
        eventPlayer.setJumpVerticalSpeed(100)


rule "Abigail Ab2 and Billy The Kid || Rammatra new guy":
    @Event eachPlayer
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0
    @Condition eventPlayer.getCurrentHero() in [Hero.CASSIDY, Hero.RAMATTRA] == true
    @Condition eventPlayer.selecting_HUD == false
    
    if eventPlayer.getCurrentHero() == Hero.CASSIDY:
        if eventPlayer.selected_hero_list_number == 1:
            raycast_hit_position2()
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.VIOLET, eventPlayer.raycast_hit_position2 + vect(false, 0.4, false), 4)
            wait(1.5)
            createEffect(getAllPlayers(), Effect.RING, Color.PURPLE, eventPlayer.raycast_hit_position2, 4, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[11] = getLastCreatedEntity()
            createIcon(getAllPlayers(), eventPlayer.raycast_hit_position2, Icon.WARNING, IconReeval.VISIBILITY_AND_POSITION, Color.WHITE, true)
            eventPlayer.Effects[12] = getLastCreatedEntity()
            waitUntil(eventPlayer.isHoldingButton(Button.ABILITY_2) or eventPlayer.isInSpawnRoom() or getPlayersInRadius(eventPlayer.raycast_hit_position2, 4, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF) >= 1, 4)
            getPlayersInRadius(eventPlayer.raycast_hit_position2, 4, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF).startForcingPosition(eventPlayer.raycast_hit_position2 + vect(0, 1, 0), true)
            waitUntil(eventPlayer.isInSpawnRoom() or eventPlayer.isHoldingButton(Button.ABILITY_2), 2.5)
            getPlayersInRadius(eventPlayer.raycast_hit_position2, 4, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF).stopForcingPosition()
            destroyEffect(eventPlayer.Effects[11])
            destroyIcon(eventPlayer.Effects[12])
            eventPlayer.setAbilityCooldown(Button.ABILITY_2, 9.5)
    else:
        if eventPlayer.selected_hero_list_number == 1:
            eventPlayer.is_curie_cursed = 0
            FoV_and_LoS_player_select()
            eventPlayer.FoV_and_lineOFsight_player.is_curie_cursed = 3
            eventPlayer.FoV_and_lineOFsight_player.Curserer_master = eventPlayer
            eventPlayer.setAbilityCooldown(Button.ABILITY_2, 11)
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.cancelPrimaryAction()
            eventPlayer.A = eventPlayer.getPosition() + vect(0, 20, 0)
            eventPlayer.B = eventPlayer.A + worldVector(Vector.FORWARD, eventPlayer, Transform.ROTATION) * 40
            chase(eventPlayer.A, eventPlayer.B, duration=8, ChaseReeval.DESTINATION_AND_DURATION)
            while eventPlayer.A != eventPlayer.B:
                createProjectile(Projectile.PHARAH_ROCKET, eventPlayer, eventPlayer.A + vect(random.uniform(-5, 5), 0, random.uniform(-5, 5)), Vector.DOWN, Relativity.TO_WORLD, ModifyHealth.DAMAGE, getOppositeTeam(eventPlayer.getTeam()), 150, 0.3, 2.5, DynamicEffect.PHARAH_ROCKET_LAUNCHER_EXPLOSION, DynamicEffect.PHARAH_ROCKET_LAUNCHER_EXPLOSION_SOUND, 0, 7, 5, 0, 0, 0)
                wait(0.1)
            eventPlayer.setAbilityCooldown(Button.ABILITY_2, 16)


rule "Ozymandias and Tristan Ability 1":
    @Event eachPlayer
    @Hero zenyatta
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.isAlive() == true
    
    if eventPlayer.selected_hero_list_number == 3:
        chase(eventPlayer.B, 20, rate=2.5, ChaseReeval.DESTINATION_AND_RATE)
        chase(eventPlayer.K, 60, rate=11, ChaseReeval.DESTINATION_AND_RATE)
        waitUntil(not eventPlayer.isHoldingButton(Button.ABILITY_1) or eventPlayer.isInSpawnRoom(), 99999)
        stopChasingVariable(eventPlayer.B)
        stopChasingVariable(eventPlayer.K)
        eventPlayer.color = Color.YELLOW
        async(create_beam_effect_subroutine, AsyncBehavior.RESTART)
        eventPlayer.ozymandias_ab1_using = true
        async(ozymandias_ab1_loop, AsyncBehavior.RESTART)
        #K = damage that gets created while being held
        waitUntil(eventPlayer.isDead() or not entityExists(eventPlayer), 4)
        eventPlayer.ozymandias_ab1_using = false
        destroy_beam_effect_subroutine()
        eventPlayer.K = null
        eventPlayer.B = null
        waitUntil(isAssemblingHeroes(), 1)
        smallMessage(eventPlayer, "Laser Ready")
    elif eventPlayer.selected_hero_list_number == 2:
        playEffect(getAllPlayers(), DynamicEffect.GOOD_PICKUP_EFFECT, Color.LIME_GREEN, eventPlayer, 3)
        playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.WHITE, eventPlayer, 100)
        heal(eventPlayer, eventPlayer, 5 * eventPlayer.getUltCharge())
        eventPlayer.setUltCharge(eventPlayer.getUltCharge() / 1.05)
        wait(8)
        smallMessage(eventPlayer, "\"Shift\" is ready")


def ozymandias_ab1_loop():
    @Name "Ozymandias ab1 damage loop  (subroutine)"
    
    raycast_hit_player()
    raycast_hit_position2()
    if eventPlayer.raycast_hit_player.getCurrentHero() in getAllHeroes():
        damage(eventPlayer.raycast_hit_player, eventPlayer, eventPlayer.K / 3)
    else:
        damage(getPlayersInRadius(eventPlayer.raycast_hit_position2, 2, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, eventPlayer.K / 3.6)
    playEffect(getAllPlayers(), DynamicEffect.GOOD_EXPLOSION, Color.RED, eventPlayer.raycast_hit_position2, 0.5)
    wait(0.05)
    if eventPlayer.ozymandias_ab1_using:
        goto RULE_START


def leonidas_dash():
    @Name "leonidas dash (subroutine)"
    
    if getPlayersInRadius(eventPlayer, 2.5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF) >= 1:
        damage(getPlayersInRadius(eventPlayer, 2.5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, 75)
        ([player for player in getPlayersInRadius(eventPlayer, 2.5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES) if not player.hasStatusEffect(Status.KNOCKED_DOWN)]).setStatusEffect(null, Status.KNOCKED_DOWN, 2.5)
        getPlayersInRadius(eventPlayer, 2.5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF).applyImpulse(Vector.UP + eventPlayer.getFacingDirection(), 15, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
    wait(0.1)
    if eventPlayer.W:
        goto RULE_START


def saber_alter_wind_gust():
    @Name "saber alter wind gust ab2 (subroutine)"
    
    playEffect(getAllPlayers(), DynamicEffect.GOOD_EXPLOSION, Color.SKY_BLUE, eventPlayer.saber_wind_gust, 1)
    playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.WHITE, eventPlayer.saber_wind_gust, 2.5)
    playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.WHITE, eventPlayer.saber_wind_gust, 2.5)
    damage(getPlayersInRadius(eventPlayer.saber_wind_gust, 5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, 40)
    for eventPlayer.for_loop in range(0, len(getPlayersInRadius(eventPlayer.saber_wind_gust, 5, Team.ALL, LosCheck.OFF)), true):
        getPlayersInRadius(eventPlayer.saber_wind_gust, 5, Team.ALL, LosCheck.OFF)[eventPlayer.for_loop].applyImpulse(Vector.BACKWARD, 6, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
        wait()
    wait(0.1)
    if eventPlayer.isUsingAbility2() or eventPlayer.saber_wind_gust != eventPlayer.G:
        goto RULE_START


rule "gilgamesh ab1 chain of heaven bind":
    @Event eachPlayer
    @Hero hanzo
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_1) == 0
    @Condition eventPlayer.selected_hero_list_number == 1
    @Condition eventPlayer.selecting_HUD == false
    
    playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.YELLOW, eventPlayer + vect(false, true, false), 8)
    eventPlayer.trump_wait_middle = getPlayersInRadius(eventPlayer, 7, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES)
    playEffect(getAllPlayers(), DynamicEffect.BAD_PICKUP_EFFECT, Color.YELLOW, getPlayersInRadius(eventPlayer, 7, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES), 1)
    eventPlayer.setAbilityCooldown(Button.ABILITY_1, 11)
    for eventPlayer.for_loop_2 in range(0, len(eventPlayer.trump_wait_middle), true):
        if eventPlayer.trump_wait_middle[eventPlayer.for_loop_2].is_player_anchored <= 0:
            eventPlayer.trump_wait_middle[eventPlayer.for_loop_2].is_player_anchored = 60
        else:
            eventPlayer.trump_wait_middle[eventPlayer.for_loop_2].is_player_anchored += 30


rule "Moctezuma ab2 drunk area":
    @Event eachPlayer
    @Hero roadhog
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0
    @Condition eventPlayer.selected_hero_list_number == 1
    @Condition eventPlayer.selecting_HUD == false
    
    eventPlayer.B = [null, 40, 1000, 70, 160]
    eventPlayer.P = getPlayersInRadius(eventPlayer, 6.3, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)
    smallMessage(eventPlayer.P, "{0} Can't look straight".format(heroIcon(Hero.ROADHOG)))
    for eventPlayer.for_loop in range(0, 4, true):
        eventPlayer.P.setAimSpeed(random.choice(eventPlayer.B))
        waitUntil(isAssemblingHeroes(), random.uniform(0.7, 1.5))
    waitUntil(eventPlayer.isInSpawnRoom(), 0.35)
    eventPlayer.setAbilityCooldown(Button.ABILITY_2, 10)
    eventPlayer.P.setAimSpeed(100)
    eventPlayer.P = []


rule "Vlad get ult from damage || Paracelus disable ball || Medea absorb attacker ult charge (All Moira took damage)":
    @Event playerTookDamage
    @Hero moira
    @Condition eventPlayer.isDummy() == false
    
    if eventPlayer.selected_hero_list_number == 1 and eventPlayer.vamp_absorb:
        eventPlayer.setUltCharge(eventPlayer.getUltCharge() + eventDamage / 5)
        attacker.setUltCharge(attacker.getUltCharge() - eventDamage / 5)
        heal(eventPlayer, eventPlayer, eventDamage / 2)
    elif eventPlayer.selected_hero_list_number == 0 and eventPlayer.B == true:
        eventPlayer.vamp_absorb += eventDamage
        heal(eventPlayer, eventPlayer, eventDamage / 1.6)


rule "diermuid remove poison after death":
    @Event eachPlayer
    @Hero soldier
    @Condition eventPlayer.selected_hero_list_number == 2
    @Condition eventPlayer.selecting_HUD == false
    
    waitUntil(not eventPlayer.isInSpawnRoom(), 99999)
    waitUntil(eventPlayer.isDead() or eventPlayer.isInSpawnRoom(), 99999)
    for eventPlayer.for_loop in range(0, len(eventPlayer.Q), true):
        stopDoT(eventPlayer.Q[eventPlayer.for_loop])
        wait(0.05)
    stopDoT(eventPlayer.Q)


rule "Moctezuma guy fall ULT (superRoutine)":
    @Event eachPlayer
    @Condition eventPlayer.moctezuma_lifted[false] == 2
    
    waitUntil(eventPlayer.isDead() or eventPlayer.isOnGround(), 99999)
    eventPlayer.setHealth(eventPlayer.getHealth() - eventPlayer.getMaxHealth() / 2)
    eventPlayer.setGravity(100)
    eventPlayer.moctezuma_lifted[false] = 1
    wait(6, Wait.RESTART_WHEN_TRUE)
    eventPlayer.is_healing_cursed = false


rule "Doom Hassan of the mountain shift resource":
    @Event eachPlayer
    @Hero sigma
    @Condition eventPlayer.isMoving() == true
    @Condition eventPlayer.V == true
    @Condition eventPlayer.R > null
    
    eventPlayer.R -= 8.5
    wait(0.1)
    if RULE_CONDITION:
        goto RULE_START


rule "All genji damage (received)":
    @Event playerTookDamage
    @Hero genji
    @Condition eventPlayer.isUsingAbility2() == true
    @Condition eventPlayer.selected_hero_list_number == 6
    
    eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 0.15)
    heal(eventPlayer, eventPlayer, eventDamage)
    damage(getPlayersInRadius(eventPlayer, 6, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), attacker, eventDamage * 3)
    damage(attacker, null, eventDamage * 2)


rule "Pharah David ULT":
    @Event playerDealtKnockback
    @Hero pharah
    @Condition eventAbility == Button.ABILITY_2
    @Condition eventPlayer.selected_hero_list_number == 1
    @Condition victim != eventPlayer
    
    victim.setHealth(victim.getMaxHealth() / 6)


rule "Semiramis Ab1 go through walls || Illari Duelist Ability":
    @Event eachPlayer
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_1) == 0
    #32.674c
    @Condition eventPlayer.getCurrentHero() in [Hero.ANA, Hero.ILLARI] == true
    
    if eventPlayer.getCurrentHero() == Hero.ANA and eventPlayer.selected_hero_list_number == 2:
        eventPlayer.disableEnvironmentCollision(false)
        smallMessage(eventPlayer, "Ghost mode on")
        waitUntil(eventPlayer.isInSpawnRoom(), 6)
        smallMessage(eventPlayer, "Ghost mode off")
        eventPlayer.enableEnvironmentCollision()
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 6)
    elif eventPlayer.getCurrentHero() == Hero.ILLARI and not eventPlayer.selected_hero_list_number:
        FoV_and_LoS_player_select()
        startDamageModification(eventPlayer, getAllPlayers().exclude(eventPlayer.FoV_and_lineOFsight_player), 0, DamageReeval.RECEIVERS_DAMAGERS_AND_DMGPERCENT)
        eventPlayer.Effects[1] = getLastDamageModification()
        startDamageModification(eventPlayer.FoV_and_lineOFsight_player, getAllPlayers().exclude(eventPlayer), 0, DamageReeval.RECEIVERS_DAMAGERS_AND_DMGPERCENT)
        eventPlayer.Effects[2] = getLastDamageModification()
        smallMessage(getAllPlayers(), "{0} {1} Dueling - {2}".format(heroIcon(Hero.ILLARI), eventPlayer, eventPlayer.FoV_and_lineOFsight_player))
        createIcon(getAllPlayers(), eventPlayer.FoV_and_lineOFsight_player, Icon.RECYCLE, IconReeval.VISIBILITY_AND_POSITION, Color.WHITE, false)
        eventPlayer.Effects[3] = getLastCreatedEntity()
        createIcon(getAllPlayers(), eventPlayer, Icon.RECYCLE, IconReeval.VISIBILITY_AND_POSITION, Color.WHITE, false)
        eventPlayer.Effects[4] = getLastCreatedEntity()
        eventPlayer.I = true
        wait(0.25)
        waitUntil(eventPlayer.FoV_and_lineOFsight_player.isInSpawnRoom() or not entityExists(eventPlayer.FoV_and_lineOFsight_player) or eventPlayer.FoV_and_lineOFsight_player.isDead() or eventPlayer.isDead() or eventPlayer.isHoldingButton(Button.ABILITY_1) or eventPlayer.isInSpawnRoom() or not entityExists(eventPlayer), 9999)
        smallMessage(getAllPlayers(), "Duel Over")
        stopDamageModification(eventPlayer.Effects[1])
        stopDamageModification(eventPlayer.Effects[2])
        destroyIcon(eventPlayer.Effects[3])
        destroyIcon(eventPlayer.Effects[4])
        eventPlayer.I = false
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 5)


rule "ANCHOR MESSAGE":
    @Event eachPlayer
    @Condition eventPlayer.is_player_anchored >= 2
    
    wait(1.8, Wait.ABORT_WHEN_FALSE)
    smallMessage(eventPlayer, "Pull on the chain to free yourself! {0}% trap left".format(eventPlayer.is_player_anchored))
    if RULE_CONDITION:
        goto RULE_START


rule "ANCHOR SET AND TRAP":
    @Event eachPlayer
    @Condition eventPlayer.is_player_anchored >= 2
    
    eventPlayer.anchor_position = raycast(eventPlayer.getEyePosition(), eventPlayer.getEyePosition() + Vector.DOWN * 50, null, eventPlayer, false).getHitPosition()
    smallMessage(eventPlayer, "You've been TRAPPED")
    createBeam(getAllPlayers(), Beam.BRIGITTE_FLAIL_CHAIN, eventPlayer.getEyePosition(), eventPlayer.anchor_position, Color.ROSE, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.anchor_effect = getLastCreatedEntity()
    waitUntil(eventPlayer.isInSpawnRoom() or eventPlayer.isDead() or eventPlayer.is_player_anchored < 1, 99999)
    destroyEffect(eventPlayer.anchor_effect)
    playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.ROSE, eventPlayer.anchor_position, 2)
    playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.ROSE, eventPlayer.anchor_position, 5)
    Spiderman_trap_list.remove(eventPlayer)
    eventPlayer.is_player_anchored = 0


rule "ANCHOR ESCAPE":
    @Event eachPlayer
    @Condition eventPlayer.is_player_anchored >= 2
    @Condition distance(eventPlayer.getPosition(), eventPlayer.anchor_position) >= 3.5
    @Condition eventPlayer.isInSpawnRoom() == false
    
    eventPlayer.applyImpulse(directionTowards(eventPlayer, eventPlayer.anchor_position), 7, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
    eventPlayer.is_player_anchored -= 4
    if distance(eventPlayer.getPosition(), eventPlayer.anchor_position) > 9:
        eventPlayer.teleport(eventPlayer.anchor_position)
    wait(0.065)
    if RULE_CONDITION:
        goto RULE_START


def felix_faust_ab1_loop():
    @Name "Felix Faust ab1 (subroutine)"
    
    FoV_and_LoS_player_select()
    if not entityExists(eventPlayer.FoV_and_lineOFsight_player):
        goto lbl_0
    eventPlayer.startHoT(eventPlayer, 2, 100)
    damage(eventPlayer.FoV_and_lineOFsight_player, eventPlayer, 40)
    lbl_0:
    wait(0.65)
    if eventPlayer.is_damage_reversing:
        goto RULE_START


rule "Frankenstein Sec.Fire buff+nerf":
    @Event eachPlayer
    @Hero reinhardt
    @Condition eventPlayer.isHoldingButton(Button.SECONDARY_FIRE) == true
    @Condition eventPlayer.selected_hero_list_number == 2
    @Condition eventPlayer.isInSpawnRoom() == false
    
    smallMessage(eventPlayer, "Heal Mode ON")
    eventPlayer.startHoT(null, 9999, 90)
    eventPlayer.Y = getLastHoT()
    eventPlayer.Z = true
    async(Franken_Loop_subroutine, AsyncBehavior.RESTART)
    wait(0.25)
    waitUntil(eventPlayer.isHoldingButton(Button.SECONDARY_FIRE) or eventPlayer.isInSpawnRoom() or eventPlayer.getUltCharge() <= 0, 10)
    stopHoT(eventPlayer.Y)
    eventPlayer.Z = false
    smallMessage(eventPlayer, "Heal Mode OFF")


rule "ZENYATTA tristan Sec.Fire Attack":
    @Event eachPlayer
    @Hero zenyatta
    @Condition eventPlayer.isFiringSecondaryFire() == true
    @Condition eventPlayer.selected_hero_list_number == 2
    
    eventPlayer.setAmmo(false, 999)
    eventPlayer.setProjectileSpeed(100)
    wait()
    if RULE_CONDITION:
        goto RULE_START


def Muramasa_ab2_loop():
    @Name "GENJI Senji Muramasa damage loop"
    
    getPlayersInRadius(eventPlayer.Z, eventPlayer.C, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES_AND_ENEMY_BARRIERS).startDoT(null, 4, 13 if eventPlayer.isUsingUltimate() else 3)
    getPlayersInRadius(eventPlayer.Z, eventPlayer.C, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES_AND_ENEMY_BARRIERS).setStatusEffect(eventPlayer, Status.BURNING, 5)
    wait(0.12)
    if eventPlayer.isUsingAbility2():
        goto RULE_START


rule "BASTION Lancelot ab1 || Turret alfred ab1":
    @Event eachPlayer
    @Hero bastion
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    
    if eventPlayer.selected_hero_list_number == 1:
        eventPlayer.playerSpeed[false] += 20
        eventPlayer.P = true
        createEffect(getAllPlayers(), Effect.BAD_AURA, Color.ORANGE, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[5] = getLastCreatedEntity()
        wait(0.35)
        waitUntil(eventPlayer.isHoldingButton(Button.ABILITY_1), 3)
        eventPlayer.P = null
        destroyEffect(eventPlayer.Effects[5])
        eventPlayer.playerSpeed[false] -= 20
        wait(7)
        smallMessage(eventPlayer, "Shift ready")
    elif eventPlayer.selected_hero_list_number == 0:
        eventPlayer.playerSpeed[false] -= 60
        eventPlayer.setDamageReceived(35)
        waitUntil(not eventPlayer.isUsingAbility1(), 9)
        eventPlayer.setDamageReceived(70)
        eventPlayer.playerSpeed[false] += 60


def Solomon_ab2_loop():
    @Name "Solomon ab2 loop (subroutine)"
    
    for eventPlayer.for_loop_2 in range(len(eventPlayer.Solomon_pillar_array)):
        if not entityExists(eventPlayer.Solomon_pillar_array[eventPlayer.for_loop_2]):
            goto lbl_0
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.RED, eventPlayer.Solomon_pillar_array[eventPlayer.for_loop_2] + vect(false, 1.45, false), 5)
        playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.RED, eventPlayer.Solomon_pillar_array[eventPlayer.for_loop_2] + vect(false, 1.45, false), 150)
        lbl_0:
    wait(0.15)
    eventPlayer.setUltCharge(eventPlayer.getUltCharge() + 1.15 * len([player for player in eventPlayer.Solomon_pillar_array if entityExists(player)]) * 2)
    for eventPlayer.for_loop in range(len(eventPlayer.Solomon_pillar_array) - true):
        if not entityExists(eventPlayer.Solomon_pillar_array[eventPlayer.for_loop]):
            goto lbl_1
        damage(getPlayersInRadius(eventPlayer.Solomon_pillar_array[eventPlayer.for_loop], 4, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, 120)
        heal(eventPlayer, eventPlayer, 20)
        lbl_1:
    wait(1.25)
    if not eventPlayer.isInSpawnRoom() and eventPlayer.isAlive() and len(eventPlayer.Solomon_pillar_array) > 0:
        goto RULE_START


rule "GENJI Sasaki can only jump in air":
    @Event eachPlayer
    @Hero genji
    @Condition eventPlayer.selected_hero_list_number == 2
    @Condition eventPlayer.isMoving() == true
    
    eventPlayer.disallowButton(Button.JUMP)
    waitUntil(eventPlayer.isDead() or eventPlayer.selected_hero_list_number != 2, 99999)
    eventPlayer.allowButton(Button.JUMP)


rule "Ashe Xanzang push people away and punches anti armor (make anti armor subroutine in future)":
    @Event playerDealtDamage
    @Hero ashe
    @Condition eventPlayer.selected_hero_list_number == 1
    @Condition eventAbility == Button.MELEE
    
    damage(victim, eventPlayer, victim.getHealthOfType(Health.ARMOR) / 4)
    if eventPlayer.J:
        victim.setStatusEffect(null, Status.ROOTED, 0.8)
        eventPlayer.Z = eventPlayer.getPosition() - vect(false, 4, false)
        victim.applyImpulse(directionTowards(attacker.getPosition(), victim.getEyePosition()), 14, Relativity.TO_WORLD, Impulse.INCORPORATE_CONTRARY_MOTION)


rule "Ana Semiramis RightClick Anti-air projectile":
    @Event eachPlayer
    @Hero ana
    @Condition eventPlayer.selected_hero_list_number == 2
    @Condition eventPlayer.isHoldingButton(Button.SECONDARY_FIRE) == true
    @Condition eventPlayer.isAlive() == true
    
    FoV_and_LoS_player_select()
    createProjectile(Projectile.SIGMA_HYPERSPHERE, eventPlayer, null, null, Relativity.TO_WORLD, ModifyHealth.DAMAGE, getOppositeTeam(eventPlayer.getTeam()), 50, 1, 4.5, DynamicEffect.BAD_EXPLOSION, DynamicEffect.EXPLOSION_SOUND, 0.05, 17, 13, 13, 0, 0)
    wait(7)
    smallMessage(eventPlayer, "R.Click ready")


rule "Vlad ULT effect create loop":
    @Event eachPlayer
    @Condition distance(eventPlayer, eventPlayer.Vlad_effect_master.Z) <= 13
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.Vlad_effect_master.Is_Using_Ultimate == true
    @Condition isInLoS(eventPlayer.Vlad_effect_master.Z, eventPlayer, BarrierLos.BLOCKED_BY_ALL_BARRIERS) == true
    @Condition entityExists(eventPlayer.Vlad_effect_master) == true
    
    createBeam(getAllPlayers(), Beam.MOIRA_ORB_DAMAGE, eventPlayer, eventPlayer.Vlad_effect_master.Z, Color.TEAM_1, EffectReeval.POSITION_AND_RADIUS)
    eventPlayer.blood_beam_pool = getLastCreatedEntity()
    wait()
    waitUntil(eventPlayer.isDead() or not eventPlayer.Vlad_effect_master.getCurrentHero() in [Hero.MOIRA] or eventPlayer.Vlad_effect_master.Is_Using_Ultimate == false or distance(eventPlayer, eventPlayer.Vlad_effect_master.Z) > 13 or not isInLoS(eventPlayer.Vlad_effect_master.Z, eventPlayer, BarrierLos.BLOCKED_BY_ALL_BARRIERS), 10)
    destroyEffect(eventPlayer.blood_beam_pool)


rule "Mash longer range dash":
    @Event eachPlayer
    @Hero brigitte
    @Condition eventPlayer.isFiringSecondaryFire() == true
    @Condition eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) == true
    @Condition eventPlayer.isFiringPrimaryFire() == true
    @Condition eventPlayer.selected_hero_list_number == 1
    @Condition eventPlayer.isInSpawnRoom() == false
    
    eventPlayer.playerSpeed[false] += 145
    waitUntil(not eventPlayer.isFiringSecondaryFire(), 0.09)
    eventPlayer.playerSpeed[false] -= 145


rule "Gilles ab2 (detonate the tentacles)":
    @Event eachPlayer
    @Hero symmetra
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.selected_hero_list_number == null
    @Condition eventPlayer.delay_tagger == true
    @Condition eventPlayer.C == true
    @Condition eventPlayer.selecting_HUD == false
    
    eventPlayer.B = true
    for eventPlayer.for_loop in range(0, 4, true):
        damage(getPlayersInRadius(eventPlayer.T[eventPlayer.for_loop], 5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, 90)
        playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.PURPLE, eventPlayer.T[eventPlayer.for_loop], 6)
        playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.PURPLE, eventPlayer.T[eventPlayer.for_loop], 75)
    eventPlayer.B = false
    eventPlayer.setAbilityCooldown(Button.ABILITY_2, 10)
    eventPlayer.C = false
    wait(0.15)


rule "Marie Antoinette ice slide (better and improved LOL)":
    @Event eachPlayer
    @Hero mei
    @Condition eventPlayer.isHoldingButton(Button.CROUCH) == true
    @Condition eventPlayer.isFiringPrimaryFire() == true
    @Condition eventPlayer.selected_hero_list_number == null
    @Condition eventPlayer.selecting_HUD == false
    
    eventPlayer.applyImpulse(eventPlayer.getFacingDirection(), 22, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION_XYZ)
    waitUntil(not eventPlayer.isHoldingButton(Button.CROUCH) or not eventPlayer.isFiringPrimaryFire() or isAssemblingHeroes(), 99999)
    eventPlayer.setGravity(100)


rule "Genji Mordred disable ARMOR when armor is 0 (IF MORDRED BROKE SET BACK NULL TO FALSE CONDITIONS)":
    @Event playerTookDamage
    @Hero genji
    @Condition eventPlayer.selected_hero_list_number == 11
    @Condition eventPlayer.K == null
    @Condition eventPlayer.getHealth() <= 250
    @Condition eventPlayer.getHealthOfType(Health.ARMOR) == null
    
    remove_mordred_armor()


def raycast_hit_position1():
    @Name "RAY CAST HIT POSITION SUBROUTINE 1 (USE THIS ONE FOR TRUMP)"
    
    eventPlayer.raycast_lenght = 150
    __skipIf__(not (eventPlayer.getCurrentHero() == Hero.SYMMETRA and eventPlayer.selected_hero_list_number == 1), true)
    eventPlayer.raycast_lenght = 35
    __skipIf__(not (eventPlayer.getCurrentHero() == Hero.ROADHOG and eventPlayer.selected_hero_list_number == null), true)
    eventPlayer.raycast_lenght = 24
    __skipIf__(eventPlayer.getCurrentHero() != Hero.MERCY, true)
    eventPlayer.raycast_lenght = 24
    eventPlayer.raycast_hit_position = raycast(eventPlayer.getEyePosition(), eventPlayer.getEyePosition() + eventPlayer.getFacingDirection() * eventPlayer.raycast_lenght, getLivingPlayers(Team.ALL), eventPlayer, true).getHitPosition()


def raycast_hit_position2():
    @Name "RAY CAST HIT POSITION SUBROUTINE 2"
    
    eventPlayer.raycast_hit_position2 = raycast(eventPlayer.getEyePosition(), eventPlayer.getEyePosition() + eventPlayer.getFacingDirection() * 150, getLivingPlayers(Team.ALL), eventPlayer, true).getHitPosition()


def raycast_hit_player():
    @Name "RAY CAST HIT PLAYER SUBROUTINE"
    
    eventPlayer.raycast_hit_player = raycast(eventPlayer.getEyePosition(), eventPlayer.getEyePosition() + eventPlayer.getFacingDirection() * 150, getLivingPlayers(Team.ALL if eventPlayer.getCurrentHero() == Hero.REAPER else getOppositeTeam(eventPlayer.getTeam())), eventPlayer, true).getPlayerHit()


def chase_player_var_time():
    @Name "CHASE PLAYER VARIABLE OVER TIME subroutine"
    
    chase(eventPlayer.chase_Variable_time, eventPlayer.chase_variable_destination, duration=eventPlayer.chase_variable_duration, ChaseReeval.DESTINATION_AND_DURATION)


def chase_player_var_speed():
    @Name "CHASE PLAYER VARIABLE AT SPEED subroutine"
    
    chase(eventPlayer.chase_Variable_at_rate, eventPlayer.chase_variable_destination2, rate=eventPlayer.chase_variable_rate_speed, ChaseReeval.DESTINATION_AND_RATE)


rule "Manual CHU allow sec.fire":
    @Event eachPlayer
    @Hero soldier
    @Condition eventPlayer.Is_Using_Ultimate == false
    @Condition eventPlayer.selected_hero_list_number == null
    @Condition eventPlayer.getAbilityCooldown(Button.SECONDARY_FIRE) == 0
    
    eventPlayer.allowButton(Button.SECONDARY_FIRE)


rule "Hassan faster punch while ulting ALL doomfist":
    @Event eachPlayer
    @Hero doomfist
    @Condition eventPlayer.isFiringSecondaryFire() == true
    @Condition (eventPlayer.selected_hero_list_number == null and eventPlayer.Is_Using_Ultimate) == true
    
    waitUntil(not eventPlayer.isHoldingButton(Button.SECONDARY_FIRE), 99999)
    eventPlayer.playerSpeed[false] += 220
    #was 0.038
    wait(0.085)
    eventPlayer.playerSpeed[false] -= 220


rule "Asclepius damage Ab1 spin around (CAST)":
    @Event eachPlayer
    @Hero moira
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.selected_hero_list_number == 3
    @Condition eventPlayer.P == null
    @Condition eventPlayer.isInSpawnRoom() == false
    
    eventPlayer.P = eventPlayer.getEyePosition()
    eventPlayer.D = 20
    chase(eventPlayer.D, 240, rate=30, ChaseReeval.DESTINATION_AND_RATE)
    createEffect(getAllPlayers(), Effect.SPHERE, Color.PURPLE, updateEveryTick(eventPlayer.P), 0.55, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.Effects[true] = getLastCreatedEntity()
    createEffect(getAllPlayers(), Effect.BAD_AURA, Color.BLUE, updateEveryTick(eventPlayer.P), 1.2, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.Effects[2] = getLastCreatedEntity()
    eventPlayer.N = 30
    chase(eventPlayer.N, 170, rate=15, ChaseReeval.DESTINATION_AND_RATE)
    chase(eventPlayer.P, eventPlayer.getEyePosition() + angleToDirection(getTotalTimeElapsed() * 280, 0), rate=1000000, ChaseReeval.DESTINATION_AND_RATE)
    waitUntil(eventPlayer.isDead() or eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) or eventPlayer.isInSpawnRoom() or eventPlayer.P == null, 60)
    stopChasingVariable(eventPlayer.N)
    stopChasingVariable(eventPlayer.D)
    raycast_hit_position1()
    chase(eventPlayer.P, eventPlayer.raycast_hit_position.getPosition(), rate=eventPlayer.N, ChaseReeval.DESTINATION_AND_RATE)
    waitUntil(not eventPlayer.P or eventPlayer.isDead() or eventPlayer.isInSpawnRoom(), 99999)
    destroyEffect(eventPlayer.Effects[true])
    destroyEffect(eventPlayer.Effects[2])
    stopChasingVariable(eventPlayer.P)
    eventPlayer.P = null
    wait(0.55)


rule "Asclepius damage RightClick Track Target":
    @Event eachPlayer
    @Hero moira
    @Condition eventPlayer.isHoldingButton(Button.SECONDARY_FIRE) == true
    @Condition eventPlayer.isUsingAbility2() == false
    @Condition eventPlayer.selected_hero_list_number == 3
    @Condition distance(eventPlayer, eventPlayer.P) >= 2
    @Condition eventPlayer.P != null
    
    eventPlayer.raycast_hit_position = ([player for player in getPlayersInRadius(eventPlayer.P.getPosition(), 500, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES) if player.isAlive() and entityExists(player) and not player.isInSpawnRoom()])[0]
    smallMessage(eventPlayer, eventPlayer.raycast_hit_position)


rule "Asclepius damage Pr. fire (END)":
    @Event eachPlayer
    @Hero moira
    @Condition (eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) or eventPlayer.isHoldingButton(Button.SECONDARY_FIRE) or not eventPlayer.P) == true
    @Condition eventPlayer.isUsingAbility2() == false
    @Condition eventPlayer.selected_hero_list_number == 3
    @Condition eventPlayer.P != null
    
    waitUntil(eventPlayer.isInSpawnRoom() or not eventPlayer.P or distance(eventPlayer.P, eventPlayer.raycast_hit_position) <= 0.2 or getPlayersInRadius(eventPlayer.P, 3, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES) > 0, 99999)
    stopChasingVariable(eventPlayer.P)
    destroyEffect(eventPlayer.Effects[true])
    destroyEffect(eventPlayer.Effects[2])
    damage(getPlayersInRadius(eventPlayer.P, 3, Team.ALL, LosCheck.SURFACES).exclude(eventPlayer), eventPlayer, eventPlayer.D)
    playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.PURPLE, eventPlayer.P, 3)
    eventPlayer.P = null


rule "Asclepius damage Pr. fire call to change target":
    @Event eachPlayer
    @Hero moira
    @Condition eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) == true
    @Condition eventPlayer.selected_hero_list_number == 3
    @Condition eventPlayer.P != null
    
    raycast_hit_position1()


rule "Hassan of the great hand sneaky ab2 (reworked)":
    @Event eachPlayer
    @Hero doomfist
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0
    @Condition eventPlayer.selected_hero_list_number == null
    @Condition eventPlayer.isAlive() == true
    
    eventPlayer.setAbilityCooldown(Button.ABILITY_2, 6)
    FoV_and_LoS_player_select()
    eventPlayer.Medea_rule_breaker = eventPlayer
    eventPlayer.has_soul = eventPlayer.FoV_and_lineOFsight_player
    if entityExists(eventPlayer.FoV_and_lineOFsight_player):
        Auto_tracking_variable_Rule()
        damage(eventPlayer.FoV_and_lineOFsight_player, eventPlayer, 60 if distance(eventPlayer, eventPlayer.FoV_and_lineOFsight_player.getPosition()) <= 1 else 0)
        eventPlayer.forceButtonPress(Button.MELEE)
        wait(0.09)
        eventPlayer.applyImpulse(eventPlayer.getFacingDirection() * -1, 1, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION_XYZ)


rule "Avicebron fireStrike Rein":
    @Event eachPlayer
    @Hero reinhardt
    @Condition eventPlayer.isHoldingButton(Button.ULTIMATE) == true
    @Condition entityExists(eventPlayer.G) == true
    @Condition eventPlayer.selected_hero_list_number == 4
    
    eventPlayer.G.setAbilityCooldown(Button.ABILITY_2, false)
    eventPlayer.G.allowButton(Button.ABILITY_2)
    eventPlayer.G.stopFacing()
    eventPlayer.G.startFacing(directionTowards(eventPlayer.G, [i for i in eventPlayer.getPlayerClosestToReticle(getOppositeTeam(eventPlayer.getTeam())) if isInLoS(eventPlayer.G, i, BarrierLos.PASS_THROUGH_BARRIERS)]), 10000, Relativity.TO_WORLD, FacingReeval.DIRECTION_AND_TURN_RATE)
    wait(0.15)
    eventPlayer.G.forceButtonPress(Button.ABILITY_2)
    wait(0.55)
    wait(6)
    smallMessage(eventPlayer, "Rein FireStrike ready")


rule "Ereshkigal Ab2 USE":
    @Event eachPlayer
    @Hero zenyatta
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.selected_hero_list_number == 1
    
    eventPlayer.allowButton(Button.SECONDARY_FIRE)
    eventPlayer.startForcingButton(Button.SECONDARY_FIRE)
    eventPlayer.setDamageDealt(30)
    waitUntil(isAssemblingHeroes(), 3.5)
    eventPlayer.disallowButton(Button.SECONDARY_FIRE)
    waitUntil(not eventPlayer.isFiringSecondaryFire(), 99999)
    eventPlayer.setDamageDealt(105)
    waitUntil(isAssemblingHeroes(), 8)
    smallMessage(eventPlayer, "Ability 2 available")


def emyia_clear_shield():
    @Name "Hanzo EMYIA clear shield (subroutine)"
    
    eventPlayer.clearStatusEffect(Status.UNKILLABLE)
    destroyEffect(eventPlayer.Effects[0])
    destroyEffect(eventPlayer.Effects[true])
    playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.RED, eventPlayer, 2)
    playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.RED, eventPlayer, 100)
    eventPlayer.H = null
    eventPlayer.T = false
    eventPlayer.X = false
    eventPlayer.setAbilityCooldown(Button.ABILITY_1, 15)


rule "Roadhog Caesar ULT push upwards":
    @Event eachPlayer
    @Hero roadhog
    @Condition eventPlayer.isUsingUltimate() == true
    @Condition eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) == true
    @Condition eventPlayer.getVerticalFacingAngle() > 45
    @Condition eventPlayer.selected_hero_list_number == null
    
    eventPlayer.applyImpulse(eventPlayer.getFacingDirection() * -1, 10, Relativity.TO_PLAYER, Impulse.CANCEL_CONTRARY_MOTION)
    wait(0.1)
    if RULE_CONDITION:
        goto RULE_START


rule "Roadhog Caesar Primary Fire Throw People":
    @Event eachPlayer
    @Hero roadhog
    @Condition eventPlayer.selected_hero_list_number == null
    @Condition eventPlayer.V != null
    @Condition eventPlayer.hasSpawned() == true
    
    async(caesar_melee_cooldown, AsyncBehavior.RESTART)
    wait(2)
    waitUntil(eventPlayer.isFiringPrimaryFire() or eventPlayer.isDead() or eventPlayer.isInSpawnRoom() or eventPlayer.was_damagedBig, 6)
    eventPlayer.V.detach()
    if eventPlayer.was_damagedBig:
        goto lbl_0
    eventPlayer.V.applyImpulse(eventPlayer.getFacingDirection(), 280, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
    wait(0.45)
    lbl_0:
    eventPlayer.V.clearStatusEffect(Status.KNOCKED_DOWN)
    wait(0.65)
    eventPlayer.V.clearStatusEffect(Status.PHASED_OUT)
    eventPlayer.V = null


rule "Baptiste Starlin single fire":
    @Event eachPlayer
    @Hero baptiste
    @Condition eventPlayer.isFiringPrimaryFire() == true
    @Condition eventPlayer.selected_hero_list_number == 1
    
    eventPlayer.cancelPrimaryAction()


def caesar_melee_cooldown():
    @Name "roadhog caesar cooldown after pickup"
    
    eventPlayer.disallowButton(Button.MELEE)
    waitUntil(eventPlayer.V == null or eventPlayer.isInSpawnRoom(), 3)
    waitUntil(eventPlayer.isInSpawnRoom(), 10)
    eventPlayer.allowButton(Button.MELEE)
    smallMessage(eventPlayer, "Pickup ready")


rule "Bug fix for people leaving time stop":
    @Event playerLeft
    
    setSlowMotion(100)


def Enable_Buttons_sub():
    @Name "ENABLE ALL BUTTONS SUBROUTINE"
    
    eventPlayer.setAbility1Enabled(true)
    eventPlayer.setProjectileGravity(100)
    eventPlayer.setProjectileSpeed(100)
    eventPlayer.setJumpVerticalSpeed(100)
    eventPlayer.allowButton(Button.JUMP)
    eventPlayer.allowButton(Button.PRIMARY_FIRE)
    eventPlayer.allowButton(Button.SECONDARY_FIRE)
    eventPlayer.allowButton(Button.ABILITY_2)
    eventPlayer.allowButton(Button.ABILITY_1)
    eventPlayer.allowButton(Button.ULTIMATE)
    eventPlayer.allowButton(Button.CROUCH)
    eventPlayer.allowButton(Button.MELEE)
    eventPlayer.allowButton(Button.INTERACT)
    eventPlayer.allowButton(Button.RELOAD)
    wait(0.1)


rule "Tracer King Crimson set effects on person":
    @Event playerTookDamage
    @Condition attacker.getCurrentHero() == Hero.TRACER
    @Condition eventAbility == Button.MELEE
    @Condition attacker.Is_Using_Ultimate != true
    @Condition attacker.selected_hero_list_number == false
    
    eventPlayer.is_tracer_marked[false] = true
    if victim in attacker.B:
        goto lbl_0
    createEffect(getAllPlayers(), Effect.RING, Color.RED, victim, 1.5, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.is_tracer_marked[1] = getLastCreatedEntity()
    createIcon(getAllPlayers(), victim + vect(false, 2, false), Icon.FIRE, IconReeval.VISIBILITY_AND_POSITION, Color.RED, true)
    eventPlayer.is_tracer_marked[2] = getLastCreatedEntity()
    attacker.B.append(victim)
    smallMessage(victim, "{0} Marked".format(heroIcon(Hero.TRACER)))
    lbl_0:
    waitUntil(eventPlayer.isDead() or not entityExists(attacker) or not entityExists(eventPlayer) or not eventPlayer.is_tracer_marked, 99999)
    destroyEffect(eventPlayer.is_tracer_marked[1])
    destroyIcon(eventPlayer.is_tracer_marked[2])
    wait(5.5)


rule "Tracer King Crimson ab2 early detonate bombs":
    @Event eachPlayer
    @Hero tracer
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0
    
    eventPlayer.B.setStatusEffect(eventPlayer, Status.ROOTED, 0.9)
    damage(eventPlayer.B, eventPlayer, 105)
    if eventPlayer.Is_Using_Ultimate:
        goto lbl_0
    Tracer_trigger()
    lbl_0:


def Tracer_trigger():
    @Name "Tracer subroutine trigger detonate"
    
    for eventPlayer.for_loop in range(0, len(eventPlayer.B), true):
        playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.RED, eventPlayer.B[eventPlayer.for_loop], 3)
        eventPlayer.B[eventPlayer.for_loop].is_tracer_marked[false] = false
    eventPlayer.B = []


rule "William Tell ab1":
    @Event eachPlayer
    @Hero ashe
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_1) == 0
    @Condition eventPlayer.selected_hero_list_number == 3
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.hasStatusEffect(Status.STUNNED) == false
    @Condition eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN) == false
    
    eventPlayer.playerSpeed[false] += 50
    eventPlayer.setGravity(35)
    raycast_hit_position2()
    createBeam(getAllPlayers(), Beam.BAD, eventPlayer, eventPlayer.raycast_hit_position2, Color.BLACK, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.Effects[5] = getLastCreatedEntity()
    eventPlayer.startAcceleration(directionTowards(eventPlayer, eventPlayer.raycast_hit_position2), 25, 10, Relativity.TO_WORLD, AccelReeval.DIRECTION_RATE_AND_MAX_SPEED)
    async(mei_spiderwoman_loop, AsyncBehavior.RESTART)
    wait(0.25)
    waitUntil(eventPlayer.isDead() or eventPlayer.isInSpawnRoom() or eventPlayer.isHoldingButton(Button.ABILITY_1) or eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN) or distance(eventPlayer, eventPlayer.raycast_hit_position2) <= 4 or distance(eventPlayer, eventPlayer.raycast_hit_position2) >= 30, 2)
    destroyEffect(eventPlayer.Effects[5])
    eventPlayer.playerSpeed[false] -= 50
    eventPlayer.stopAcceleration()
    eventPlayer.setGravity(100)
    eventPlayer.setAbilityCooldown(Button.ABILITY_1, 8.5)


def mei_spiderwoman_loop():
    @Name "William Tell subroutine"
    
    eventPlayer.applyImpulse(eventPlayer.getFacingDirection(), 1.5, Relativity.TO_WORLD, Impulse.INCORPORATE_CONTRARY_MOTION)
    wait(0.09)
    if eventPlayer.getAbilityCooldown(Button.ABILITY_1) != null:
        goto RULE_START


rule "King Crimson Sec.Fire":
    @Event eachPlayer
    @Hero dva
    @Condition eventPlayer.isFiringSecondaryFire() == true
    @Condition eventPlayer.getAbilityResource(Button.SECONDARY_FIRE) >= 99
    @Condition eventPlayer.A == false
    @Condition eventPlayer.Is_Using_Ultimate == false
    @Condition eventPlayer.selecting_HUD == false
    
    smallMessage(getAllPlayers(), "{0} Dodging enemy attacks".format(heroIcon(eventPlayer.getCurrentHero())))
    eventPlayer.S = true
    eventPlayer.setStatusEffect(eventPlayer, Status.INVINCIBLE, 3)
    createEffect(getAllPlayers(), Effect.SPHERE, Color.RED, updateEveryTick(eventPlayer), 2, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.Effects[true] = getLastCreatedEntity()
    eventPlayer.setAbilityResource(Button.SECONDARY_FIRE, false)
    eventPlayer.disallowButton(Button.SECONDARY_FIRE)
    eventPlayer.setMoveSpeed(200)
    waitUntil(eventPlayer.isDead(), 3)
    eventPlayer.setMoveSpeed(135)
    destroyEffect(eventPlayer.Effects[true])
    eventPlayer.S = false
    waitUntil(eventPlayer.isDead() or eventPlayer.isInSpawnRoom() or eventPlayer.getAbilityResource(Button.SECONDARY_FIRE) >= 99, 99999)
    eventPlayer.allowButton(Button.SECONDARY_FIRE)


rule "King Crimson Ab1 become invisible":
    @Event eachPlayer
    @Hero dva
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_1) == 0
    @Condition eventPlayer.Is_Using_Ultimate == false
    @Condition eventPlayer.isInAlternateForm() == false
    
    smallMessage(getAllPlayers(), "{0} Hiding...".format(heroIcon(eventPlayer.getCurrentHero())))
    destroy_nameONplayer()
    eventPlayer.disallowButton(Button.SECONDARY_FIRE)
    eventPlayer.A = true
    eventPlayer.setAbilityCooldown(Button.ABILITY_1, 12)
    eventPlayer.setInvisibility(Invis.ALL)
    eventPlayer.disallowButton(Button.PRIMARY_FIRE)
    eventPlayer.setGravity(false)
    eventPlayer.startHoT(eventPlayer, 2.35, 150)
    waitUntil(eventPlayer.isUsingAbility1(), 3)
    eventPlayer.setGravity(100)
    eventPlayer.setInvisibility(Invis.NONE)
    eventPlayer.allowButton(Button.PRIMARY_FIRE)
    eventPlayer.A = false
    eventPlayer.allowButton(Button.SECONDARY_FIRE)
    create_nameONplayer()


rule "Symmetra Gordon Freeman RightClick to pick up enemy || Sherlock Holmes shoot healing":
    @Event eachPlayer
    @Hero symmetra
    @Condition eventPlayer.isHoldingButton(Button.SECONDARY_FIRE) == true
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.isInSpawnRoom() == false
    
    if eventPlayer.selected_hero_list_number == 2:
        raycast_hit_player()
        if distance(eventPlayer, eventPlayer.raycast_hit_player) > 17:
            goto lbl_0
        eventPlayer.color = Color.BLUE
        async(create_beam_effect_subroutine, AsyncBehavior.RESTART)
        wait(0.1)
        destroy_beam_effect_subroutine()
        if entityExists(eventPlayer.raycast_hit_player):
            eventPlayer.raycast_hit_player.setDamageReceived(10)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            smallMessage(getAllPlayers(), "{0} got attached!!".format(eventPlayer.raycast_hit_player))
            eventPlayer.B = true
            eventPlayer.raycast_hit_player.attachTo(eventPlayer, vect(0, 1, 4))
            createBeam(getAllPlayers(), Beam.GOOD, eventPlayer, eventPlayer.raycast_hit_player, Color.BLUE, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[6] = getLastCreatedEntity()
            wait(1.25)
            waitUntil(eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) or eventPlayer.isDead() or eventPlayer.isInSpawnRoom() or eventPlayer.was_damagedBig, 6)
            lbl_0:
            eventPlayer.raycast_hit_player.detach()
            if eventPlayer.was_damagedBig:
                goto lbl_1
            eventPlayer.raycast_hit_player.applyImpulse(eventPlayer.getFacingDirection(), 60, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
            lbl_1:
            eventPlayer.B = false
            eventPlayer.allowButton(Button.PRIMARY_FIRE)
            destroyEffect(eventPlayer.Effects[6])
            eventPlayer.raycast_hit_player.setDamageReceived(70)
        waitUntil(eventPlayer.isDead(), 8)
        smallMessage(eventPlayer, "{0} Can pick-up now".format(heroIcon(eventPlayer.getCurrentHero())))
    elif eventPlayer.selected_hero_list_number == 3:
        createHomingProjectile(Projectile.BAPTISTE_BIOTIC_LAUNCHER, eventPlayer, null, null, Relativity.TO_WORLD, ModifyHealth.HEAL, eventPlayer.getTeam(), 85, 1, 4, DynamicEffect.BAPTISTE_BIOTIC_LAUNCHER_EXPLOSION, DynamicEffect.EXPLOSION_SOUND, 0.05, 25, 11, 0, eventPlayer.getPlayerClosestToReticle(eventPlayer.getTeam()), 1)
        eventPlayer.setAmmo(0, eventPlayer.getAmmo(0) - 25)
        wait(1.5)


def float_player_above_level():
    @Name "No clip LOOP"
    
    eventPlayer.startAcceleration(Vector.DOWN if eventPlayer.isHoldingButton(Button.CROUCH) else Vector.UP, 100, 3 if any([eventPlayer.isHoldingButton(i) for i in [Button.JUMP, Button.CROUCH]]) else 1.4, Relativity.TO_WORLD, AccelReeval.DIRECTION_RATE_AND_MAX_SPEED)
    waitUntil(not eventPlayer.N or eventPlayer.isInSpawnRoom(), 99999)
    eventPlayer.stopAcceleration()


def Symmetra_AA_mine():
    @Name "Symmetra AA mine ability 2"
    
    eventPlayer.G = [player for player in getLivingPlayers(getOppositeTeam(eventPlayer.getTeam())) if distance(player.getPosition() * vect(1, 0, 1), eventPlayer.X.getPosition() * vect(1, 0, 1)) <= 20 and player.getAltitude() > eventPlayer.X.getAltitude()]
    eventPlayer.L = [player for player in eventPlayer.G if player.getTeam() == eventPlayer.getTeam()]
    eventPlayer.G.applyImpulse(Vector.DOWN, 150, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
    damage(eventPlayer.G.exclude(eventPlayer.L), null, 80)
    eventPlayer.G.exclude(eventPlayer.L).setStatusEffect(null, Status.ROOTED, 0.7)
    wait(0.65)
    if eventPlayer.X and not eventPlayer.isInSpawnRoom():
        goto RULE_START


def create_nameONplayer():
    @Name "Create Name above player head (used for invisibility abilities)"
    
    createInWorldText(getAllPlayers() if eventPlayer.getCurrentHero() != Hero.DOOMFIST else getAllPlayers().exclude(eventPlayer.hassan_near_sight_list), eventPlayer.Selected_Hero[eventPlayer.selected_hero_list_number], eventPlayer + vect(false, 1.75, false), true, Clip.SURFACES, WorldTextReeval.VISIBILITY_POSITION_AND_STRING, Color.WHITE, SpecVisibility.DEFAULT)
    eventPlayer.in_world_text[false] = getLastCreatedText()


def destroy_nameONplayer():
    @Name "Destroy name above player head (used for invisibility abilities)"
    
    destroyInWorldText(eventPlayer.in_world_text[false])
    return


rule "Junker queen faster with ab2":
    @Event eachPlayer
    @Hero junkerQueen
    @Condition eventPlayer.isUsingAbility2() == true
    
    eventPlayer.playerSpeed[false] += 135
    waitUntil(not eventPlayer.isUsingAbility2(), 5)
    eventPlayer.playerSpeed[false] -= 135


rule "Genji jack the ripper double dash":
    @Event eachPlayer
    @Hero genji
    @Condition eventPlayer.isUsingAbility1() == true
    @Condition eventPlayer.selected_hero_list_number == 1
    
    waitUntil(not eventPlayer.isUsingAbility1(), 99999)
    eventPlayer.setAbilityCooldown(Button.ABILITY_1, 0)
    wait(3)
    eventPlayer.setAbilityCooldown(Button.ABILITY_1, 5)


rule "WreckingBall ab2 unkillable":
    @Event eachPlayer
    @Hero hammond
    @Condition eventPlayer.isUsingAbility2() == true
    
    eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 4)
    eventPlayer.R = true
    wait(4)
    eventPlayer.R = false


rule "TORB invincible ab2":
    @Event eachPlayer
    @Hero torbjorn
    @Condition eventPlayer.isUsingAbility2() == true
    @Condition eventPlayer.selected_hero_list_number == 0
    
    eventPlayer.setStatusEffect(eventPlayer, Status.UNKILLABLE, 999)
    waitUntil(not eventPlayer.isUsingAbility2(), 99999)
    eventPlayer.clearStatusEffect(Status.UNKILLABLE)


rule "JUNKRAT all damage to, the fall damage AND Trap make you 50%":
    @Event playerTookDamage
    @Condition attacker.getCurrentHero() == Hero.JUNKRAT
    
    if eventAbility == Button.ABILITY_1 and eventPlayer.getCurrentHero() != Hero.JUNKRAT:
        attacker.F[eventPlayer.getSlot()] = 0
        waitUntil(eventPlayer.isInAir(), 99999)
        while eventPlayer.isInAir():
            if eventPlayer.getAltitude() >= attacker.F[eventPlayer.getSlot()]:
                attacker.F[eventPlayer.getSlot()] = eventPlayer.getAltitude()
            wait(0.1)
        smallMessage(eventPlayer, "Fall damage {0}".format(attacker.F[eventPlayer.getSlot()] * 13))
        damage(eventPlayer, attacker, 11 * attacker.F[eventPlayer.getSlot()])
    elif eventAbility == Button.ABILITY_2:
        eventPlayer.setHealth(eventPlayer.getHealth() / 2)


rule "Torb hammer higurama":
    @Event playerDealtDamage
    @Hero torbjorn
    @Condition eventAbility == Button.PRIMARY_FIRE
    @Condition eventPlayer.getCurrentWeapon() == 2
    @Condition eventPlayer.selected_hero_list_number == 1
    
    victim.applyImpulse(directionTowards(eventPlayer, victim.getEyePosition()), 6, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
    damage(victim, eventPlayer, 120)


rule "Soujourn chain enemy with ab2":
    @Event playerTookDamage
    @Condition attacker.getCurrentHero() == Hero.SOJOURN
    @Condition attacker.selected_hero_list_number == null
    
    if eventAbility == Button.ABILITY_2:
        eventPlayer.is_player_anchored = 40
        wait(3)


rule "Soujourn dash invinci + heal":
    @Event eachPlayer
    @Hero sojourn
    @Condition eventPlayer.isUsingAbility1() == true
    
    eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 1.1)
    eventPlayer.startHoT(eventPlayer, 2, 60)
    waitUntil(not eventPlayer.isUsingAbility1(), 99999)


rule "Kiriko ab2 heal + ult buff":
    @Event playerDealtHealing
    @Hero kiriko
    @Condition eventAbility == Button.ABILITY_2
    
    if eventPlayer.selected_hero_list_number:
        async(Remove_healee_debuffs, AsyncBehavior.RESTART)
    else:
        healee.startHoT(eventPlayer, 1, 155)
        healee.setUltCharge(healee.getUltCharge() + 15)
        wait(3)


rule "Iskandar nerf so only 1 charge":
    @Event eachPlayer
    @Hero reinhardt
    @Condition eventPlayer.isUsingAbility2() == true
    
    wait(0.25, Wait.RESTART_WHEN_TRUE)
    eventPlayer.setAbilityCharge(Button.ABILITY_2, 0)
    eventPlayer.setAbilityCooldown(Button.ABILITY_2, 11)


def Auto_tracking_variable_Rule():
    @Name "Auto Tracking Variable Subroutine for Hassan DOOM and Hp Lovecraft Lucio"
    
    eventPlayer.hokusai_check_teleport = eventPlayer.Medea_rule_breaker.getPosition()
    eventPlayer.Medea_rule_breaker.startForcingPosition(eventPlayer.hokusai_check_teleport, true)
    chase(eventPlayer.hokusai_check_teleport, eventPlayer.has_soul.getPosition(), rate=75, ChaseReeval.DESTINATION_AND_RATE)
    waitUntil(distance(eventPlayer.Medea_rule_breaker, eventPlayer.has_soul.getPosition()) <= 1 or not isInLoS(eventPlayer, eventPlayer.has_soul, BarrierLos.PASS_THROUGH_BARRIERS), 2)
    stopChasingVariable(eventPlayer.hokusai_check_teleport)
    eventPlayer.Medea_rule_breaker.stopForcingPosition()


def Franken_Loop_subroutine():
    @Name "Franken Loop for sec.fire (subroutine)"
    
    eventPlayer.setUltCharge(eventPlayer.getUltCharge() - 0.09)
    wait(0.1)
    if eventPlayer.Z:
        goto RULE_START


rule "Rule for detecting invincibility":
    @Event eachPlayer
    @Condition (eventPlayer.hasStatusEffect(Status.UNKILLABLE) or eventPlayer.hasStatusEffect(Status.INVINCIBLE) or eventPlayer.hasStatusEffect(Status.PHASED_OUT)) == true
    
    createEffect(getAllPlayers(), Effect.BAPTISTE_IMMORTALITY_FIELD_PROTECTED, Color.WHITE, eventPlayer, 1, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.moctezuma_lifted[true] = getLastCreatedEntity()
    waitUntil(not (eventPlayer.hasStatusEffect(Status.INVINCIBLE) or eventPlayer.hasStatusEffect(Status.UNKILLABLE) or eventPlayer.hasStatusEffect(Status.PHASED_OUT) or eventPlayer.isInSpawnRoom()), 99999)
    destroyEffect(eventPlayer.moctezuma_lifted[true])


rule "Rule for detecting damage reversal":
    @Event eachPlayer
    @Condition eventPlayer.is_damage_reversing == true
    
    createEffect(getAllPlayers(), Effect.ECHO_CLONING, Color.TEAM_2, eventPlayer, 1, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.moctezuma_lifted[2] = getLastCreatedEntity()
    waitUntil(not eventPlayer.is_damage_reversing, 99999)
    destroyEffect(eventPlayer.moctezuma_lifted[2])


rule "Rule for detecting healing disabled":
    @Event eachPlayer
    @Condition eventPlayer.is_healing_cursed == true
    
    destroyEffect(eventPlayer.delay_tagger[3])
    eventPlayer.setHealingReceived(0.3)
    createEffect(getAllPlayers(), Effect.ANA_BIOTIC_GRENADE_NO_HEALING, getOppositeTeam(eventPlayer.getTeam()), eventPlayer, 1, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.delay_tagger[3] = getLastCreatedEntity()
    createEffect(getAllPlayers(), Effect.BAD_AURA, Color.PURPLE, eventPlayer, 0.8, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.delay_tagger[4] = getLastCreatedEntity()
    waitUntil(not eventPlayer.is_healing_cursed, 99999)
    destroyEffect(eventPlayer.delay_tagger[3])
    destroyEffect(eventPlayer.delay_tagger[4])
    eventPlayer.setHealingReceived(100)


rule "WreckingBall absorb/reverse damage effect while ab2 active":
    @Event playerTookDamage
    @Hero hammond
    @Condition eventPlayer.R == true
    @Condition eventPlayer.Mahito_Transfigured == false
    
    heal(eventPlayer, null, eventDamage * (2 - distance(eventPlayer, attacker) * 0.1))


rule "Merlin and Queen Elisabeth LifeWeaver ab2 Lock Hp":
    @Event eachPlayer
    @Hero lifeweaver
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0
    
    if eventPlayer.selected_hero_list_number:
        FoV_and_LoS_player_select()
        smallMessage(eventPlayer.FoV_and_lineOFsight_player, "{0} You have no control".format(heroIcon(Hero.LIFEWEAVER)))
        eventPlayer.FoV_and_lineOFsight_player.setStatusEffect(null, Status.HACKED, 4)
        eventPlayer.FoV_and_lineOFsight_player.startTransformingThrottle(true, true, worldVector(Vector.BACKWARD, eventPlayer.FoV_and_lineOFsight_player, Transform.ROTATION))
        eventPlayer.FoV_and_lineOFsight_player.healthpack_cursed[1] = eventPlayer
        eventPlayer.FoV_and_lineOFsight_player.healthpack_cursed[4] = true
        waitUntil(eventPlayer.isInSpawnRoom(), 4)
        eventPlayer.FoV_and_lineOFsight_player.stopTransformingThrottle()
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 10)
        eventPlayer.FoV_and_lineOFsight_player.healthpack_cursed[4] = false
    else:
        eventPlayer.M = [player for player in getLivingPlayers(Team.ALL) if player.getCurrentHero() in getAllHeroes()]
        for eventPlayer.for_loop_2 in range(0, len(eventPlayer.M), true):
            eventPlayer.H[eventPlayer.for_loop_2] = eventPlayer.M[eventPlayer.for_loop_2].getHealth()
        eventPlayer.Is_Using_Ultimate = true
        smallMessage(getAllPlayers(), "{0} Health Locked in".format(heroIcon(eventPlayer.getCurrentHero())))
        waitUntil(eventPlayer.isInSpawnRoom() or not eventPlayer.Is_Using_Ultimate, 6)
        eventPlayer.Is_Using_Ultimate = false
        for eventPlayer.for_loop_2 in range(0, len(eventPlayer.M), true):
            if eventPlayer.M[eventPlayer.for_loop_2].isDead() and eventPlayer.H[eventPlayer.for_loop_2] >= 1:
                eventPlayer.M[eventPlayer.for_loop_2].resurrect()
            eventPlayer.M[eventPlayer.for_loop_2].setHealth(eventPlayer.H[eventPlayer.for_loop_2])
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 25)
        smallMessage(getAllPlayers(), "{0} Health Reverted".format(heroIcon(eventPlayer.getCurrentHero())))


rule "Merlin ab1 escape":
    @Event eachPlayer
    @Hero lifeweaver
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_1) == 0
    @Condition eventPlayer.selected_hero_list_number == false
    @Condition eventPlayer.isInSpawnRoom() == false
    
    destroy_nameONplayer()
    smallMessage(eventPlayer, "Invisibile")
    eventPlayer.setInvisibility(Invis.ENEMIES)
    waitUntil(eventPlayer.isDead() or eventPlayer.isInSpawnRoom(), 2.5)
    eventPlayer.setAbilityCooldown(Button.ABILITY_1, 12)
    eventPlayer.setInvisibility(Invis.NONE)
    smallMessage(eventPlayer, "Visibile")
    create_nameONplayer()


rule "Lancelot ab2 2/2 (slow damage reversal)":
    @Event playerDealtDamage
    @Condition victim.getCurrentHero() == Hero.BASTION
    @Condition victim.selected_hero_list_number == 1
    @Condition victim.P == true
    
    damage(eventPlayer, null, 50)
    eventPlayer.playerSpeed[false] -= 50
    waitUntil(eventPlayer.isInSpawnRoom(), 3)
    wait()
    eventPlayer.playerSpeed[false] += 50


def ultimate_ender():
    @Name "ULTIMATE ENDER RULE"
    
    waitUntil(eventPlayer.Is_Using_Ultimate, 7)
    waitUntil(eventPlayer.isDead() or not entityExists(eventPlayer) or eventPlayer.isInSpawnRoom() or not eventPlayer.Is_Using_Ultimate, 8.25)
    eventPlayer.Is_Using_Ultimate = false


rule "Tracer trigger clean":
    @Event eachPlayer
    @Hero tracer
    @Condition eventPlayer.hasSpawned() == true
    @Condition eventPlayer.isInSpawnRoom() == false
    
    waitUntil(eventPlayer.isInSpawnRoom(), 99999)
    Tracer_trigger()


rule "Junker Queen Uber heal ult":
    @Event playerTookDamage
    @Condition attacker.getCurrentHero() == Hero.JUNKER_QUEEN
    @Condition eventAbility == Button.ULTIMATE
    
    attacker.startHoT(eventPlayer, 4, 150)
    eventPlayer.startDoT(attacker, 4, 60)
    wait(5)


def Area_Casting_Animation():
    @Name "Area Casting Animation Subroutine"
    
    for eventPlayer.for_loop_2 in range(0, 3, true):
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, eventPlayer.color, eventPlayer.raycast_hit_position + vect(false, 2, false), 9)
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, eventPlayer.color, eventPlayer.raycast_hit_position, 15)
        wait(0.59)


def FoV_and_LoS_player_select():
    @Name "Select player in Field of view and line of sight Subroutine"
    
    eventPlayer.FoV_and_lineOFsight_player = ([i for i in (eventPlayer.getPlayerClosestToReticle(Team.ALL if eventPlayer.getCurrentHero() in [Hero.MERCY, Hero.BAPTISTE] else getOppositeTeam(eventPlayer.getTeam()))) if eventPlayer.isInViewAngle(i, 60) and isInLoS(eventPlayer, i, BarrierLos.PASS_THROUGH_BARRIERS) and i.isAlive()])[0]


rule "Rammatra curse variable set for damage heal and 3s slow":
    @Event eachPlayer
    @Condition eventPlayer.is_curie_cursed >= 3
    
    playEffect(getAllPlayers(), DynamicEffect.BAD_PICKUP_EFFECT, Color.PURPLE, eventPlayer, 1.5)
    eventPlayer.Curserer_master.startHoT(eventPlayer, 3.5, 50)
    eventPlayer.startDoT(null, 3, 25)
    eventPlayer.B_3 = eventPlayer.playerSpeed[false] / 2.5
    eventPlayer.playerSpeed[false] -= eventPlayer.B_3
    wait(3)
    eventPlayer.playerSpeed[false] += eventPlayer.B_3
    eventPlayer.is_curie_cursed = 0


def Farthest_solomon_array_minion():
    @Name "Select the furthest living rein mininon (AVICEBRON CODE)"
    
    eventPlayer.G = sorted(eventPlayer.Solomon_pillar_array, lambda player: distance(player, eventPlayer)).last()


def reaper_set_lower_HP():
    @Name "Reaper set lower HP"
    
    eventPlayer.setHealth(eventPlayer.getHealth() - 5)
    eventPlayer.P.setHealth(eventPlayer.P.getHealth() + 3.6)
    wait(0.1)
    if eventPlayer.G:
        goto RULE_START


rule "Reaper clone for Henri Sanson dead freeze trigger || Tracer split-stream|| Illari Get HP after killing Her Dueling player or Astolfo increase life (final b­low)":
    @Event playerDealtFinalBlow
    
    if victim.isDummy() and victim.getCurrentHero() == Hero.REAPER and victim.solomon_master.selected_hero_list_number:
        smallMessage(attacker, "{0} I CURSE YOU WITH ICE".format(heroIcon(Hero.REAPER)))
        eventPlayer.setStatusEffect(null, Status.FROZEN, 3)
    elif eventPlayer.getCurrentHero() == Hero.ILLARI and eventPlayer.I and victim == eventPlayer.FoV_and_lineOFsight_player:
        smallMessage(eventPlayer, "Duel Won")
        eventPlayer.startHoT(eventPlayer, 3, 999)
        wait(0.1)
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 0)
    elif eventPlayer.getCurrentHero() == Hero.TRACER:
        if eventPlayer.selected_hero_list_number == true:
            eventPlayer.N = getLivingPlayers(eventPlayer.getTeam())
            heal(eventPlayer.N, null, 250)
            eventPlayer.N.setStatusEffect(null, Status.UNKILLABLE, 3)
            for eventPlayer.for_loop in range(0, len(eventPlayer.N), true):
                eventPlayer.N[eventPlayer.for_loop].setUltCharge(eventPlayer.N[eventPlayer.for_loop].getUltCharge() + 15)
    elif eventPlayer.getCurrentHero() == Hero.BRIGITTE:
        if eventPlayer.selected_hero_list_number == 2:
            eventPlayer.Q += 35
            eventPlayer.setMaxHealth(eventPlayer.Q)
        elif eventPlayer.selected_hero_list_number == 4:
            if eventPlayer.K < 2:
                goto lbl_0
            eventPlayer.setAbility1Enabled(false)
            lbl_0:
            if eventPlayer.K >= 5:
                goto lbl_1
            eventPlayer.K += 1
            level_up_call_subroutine()
            lbl_1:


def stop_healing_over_time():
    @Name "Stop healing over time bug when HP = max hp"
    
    waitUntil(eventPlayer.getHealth() == eventPlayer.getMaxHealth(), 99999)
    stopHoT(eventPlayer.heal_over_time)


rule "Winston Slow AoE ability RULE":
    @Event eachPlayer
    @Condition any([distance(player, eventPlayer) <= 13 for player in Winston_Slow_Areas]) == true
    @Condition eventPlayer in Winston_Slow_Areas == false
    @Condition Winston_Slow_Areas != []
    
    eventPlayer.playerSpeed[false] -= 20
    eventPlayer.disallowButton(Button.JUMP)
    waitUntil(all([distance(player, eventPlayer) > 13 for player in Winston_Slow_Areas]), 99999)
    eventPlayer.allowButton(Button.JUMP)
    eventPlayer.playerSpeed[false] += 20
    wait(0.1)


rule "Rein Mahoraga if attacker, decide what do with damage":
    @Event playerTookDamage
    @Hero reinhardt
    @Condition eventPlayer.selected_hero_list_number == 5
    @Condition eventPlayer.isDummy() == false
    @Condition entityExists(attacker) == true
    
    eventPlayer.setHealth(eventPlayer.getHealth() + (eventDamage * (eventPlayer.A[attacker.getSlot() + 5])))


def create_dummy_of_EventPlayer():
    @Name "create_dummy_of_EventPlayer subroutine"
    
    eventPlayer.Solomon_pillar_array.remove([player for player in eventPlayer.Solomon_pillar_array if not entityExists(player)])
    createDummy(eventPlayer.getCurrentHero(), eventPlayer.getTeam(), 11 - len([player for player in getPlayers(eventPlayer.getTeam()) if player.isDummy()]), eventPlayer, Vector.UP)
    getLastCreatedEntity().solomon_master = eventPlayer
    eventPlayer.Solomon_pillar_array.append(getLastCreatedEntity())
    return


rule "Anti-spawn ULT check against Avicebron and Jehsus Exploit":
    @Event eachPlayer
    @Condition eventPlayer.isInSpawnRoom() == false
    
    waitUntil(eventPlayer.isInSpawnRoom(), 99999)
    if eventPlayer.getCurrentHero() == Hero.BAPTISTE and not eventPlayer.selected_hero_list_number or eventPlayer.getCurrentHero() == Hero.REINHARDT and eventPlayer.selected_hero_list_number == 4:
        eventPlayer.setUltCharge(0)


rule "ULTIMATE SETUP #1: Sojourn, Ana, Lucio, Illari, Hanzo, Pharah, Baptiste, Kiriko, LifeWeaver, WreckingBall, Zarya, Torbjorn, Tracer, D.va, Junkrat, Orisa, Ashe, Zenyatta, Sombra":
    @Event eachPlayer
    @Condition (eventPlayer.isHoldingButton(Button.ULTIMATE) and eventPlayer.getUltCharge() == 100 or eventPlayer.isUsingUltimate()) == true
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.isInSpawnRoom() == false
    @Condition eventPlayer.getCurrentHero() in Global_ULTButton_1 == true
    @Condition eventPlayer.isDummy() == false
    
    if eventPlayer.getCurrentHero() == Hero.SOJOURN:
        if not eventPlayer.selected_hero_list_number:
            smallMessage(getAllPlayers(), "{0} Let the Rain Fall".format(heroIcon(eventPlayer.getCurrentHero())))
            eventPlayer.W = [player for player in getPlayersInRadius(eventPlayer, 100, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF) if player.isAlive() and not player.isInSpawnRoom()]
            for eventPlayer.for_loop in range(10):
                eventPlayer.G = eventPlayer.W
                for eventPlayer.J in range(len(eventPlayer.W)):
                    eventPlayer.H = random.choice(eventPlayer.G)
                    createHomingProjectile(Projectile.PHARAH_ROCKET, eventPlayer, null, Vector.UP, Relativity.TO_WORLD, ModifyHealth.DAMAGE, getOppositeTeam(eventPlayer.getTeam()), 50, 0.6, 3.5, DynamicEffect.BAD_EXPLOSION, DynamicEffect.EXPLOSION_SOUND, 0.01, 14, 15, 0, eventPlayer.H, 1)
                    eventPlayer.G.remove(eventPlayer.H)
                    wait(0.1)
                wait(0.076)
            wait(3)
        else:
            raycast_hit_position1()
            eventPlayer.Q = 8
            eventPlayer.R = null
            chase(eventPlayer.Q, 18, rate=5, ChaseReeval.DESTINATION_AND_RATE)
            createEffect(getAllPlayers(), Effect.CLOUD, Color.GREEN, eventPlayer.raycast_hit_position, 10, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[2] = getLastCreatedEntity()
            createEffect(getAllPlayers(), Effect.SPHERE, Color.BLACK, eventPlayer.raycast_hit_position, 10, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[4] = getLastCreatedEntity()
            createIcon(getAllPlayers(), eventPlayer.raycast_hit_position, Icon.POISON_2, IconReeval.VISIBILITY_AND_POSITION, Color.GREEN, true)
            eventPlayer.Effects[3] = getLastCreatedEntity()
            for eventPlayer.for_loop in range(12):
                eventPlayer.V = getPlayersInRadius(eventPlayer.raycast_hit_position, 10, Team.ALL, LosCheck.OFF)
                eventPlayer.V.remove(eventPlayer)
                eventPlayer.R.append(eventPlayer.V)
                eventPlayer.V.setMoveSpeed(60)
                eventPlayer.V.startDoT(null, 4, eventPlayer.Q)
                wait(0.7)
            stopChasingVariable(eventPlayer.Q)
            destroyEffect(eventPlayer.Effects[2])
            destroyIcon(eventPlayer.Effects[3])
            destroyEffect(eventPlayer.Effects[4])
            eventPlayer.R.playerSpeed[false] += 0.1
    elif eventPlayer.getCurrentHero() == Hero.ANA:
        if eventPlayer.selected_hero_list_number == null:
            playEffect(getAllPlayers(), DynamicEffect.BAD_PICKUP_EFFECT, Color.SKY_BLUE, eventPlayer, 1)
            playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.SKY_BLUE, eventPlayer, 300)
            eventPlayer.Is_Using_Ultimate = true
            createEffect(getAllPlayers(), Effect.BAD_AURA, Color.BLUE, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[9] = getLastCreatedEntity()
            waitUntil(eventPlayer.isFiringPrimaryFire() or not eventPlayer.Is_Using_Ultimate, 99999)
            destroyEffect(eventPlayer.Effects[9])
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            wait(1.25)
            eventPlayer.allowButton(Button.PRIMARY_FIRE)
            eventPlayer.Is_Using_Ultimate = false
        elif eventPlayer.selected_hero_list_number == 1:
            raycast_hit_position1()
            createEffect(getAllPlayers(), Effect.RING, Color.GREEN, eventPlayer.raycast_hit_position, 9, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            eventPlayer.color = Color.GREEN
            Area_Casting_Animation()
            heal(getPlayersInRadius(eventPlayer.raycast_hit_position, 9, eventPlayer.getTeam(), LosCheck.OFF), eventPlayer, 500)
            playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.GREEN, eventPlayer.raycast_hit_position + vect(false, true, false), 9)
            playEffect(getAllPlayers(), DynamicEffect.GOOD_EXPLOSION, Color.RED, eventPlayer.raycast_hit_position + vect(false, true, false), 9)
            damage(getPlayersInRadius(eventPlayer.raycast_hit_position, 9, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, 350)
            getPlayersInRadius(eventPlayer.raycast_hit_position, 9, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF).startDoT(eventPlayer, 5, 28)
            getPlayersInRadius(eventPlayer.raycast_hit_position, 9, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF).setStatusEffect(eventPlayer, Status.BURNING, 5)
            destroyEffect(eventPlayer.Effects[true])
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.J = true
            eventPlayer.applyImpulse(Vector.UP, 20, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
            waitUntil(isAssemblingHeroes() or eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) or eventPlayer.isHoldingButton(Button.JUMP), 99999)
            eventPlayer.J = false
            eventPlayer.startForcingPosition(eventPlayer.getPosition(), true)
            wait(0.1)
            eventPlayer.stopForcingPosition()
            eventPlayer.setGravity(false)
            eventPlayer.startForcingThrottle(false, false, false, false, false, false)
            eventPlayer.color = Color.GREEN
            async(create_beam_effect_subroutine, AsyncBehavior.RESTART)
            eventPlayer.Is_Using_Ultimate = true
            async(ultimate_ender, AsyncBehavior.RESTART)
            while eventPlayer.Is_Using_Ultimate:
                damage(getPlayersInRadius(eventPlayer.raycast_hit_position2, 3, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, 18)
                playEffect(getAllPlayers(), DynamicEffect.ECHO_STICKY_BOMB_EXPLOSION, Color.LIME_GREEN, eventPlayer.raycast_hit_position2, 1)
                wait(0.05)
            eventPlayer.setGravity(100)
            destroy_beam_effect_subroutine()
            eventPlayer.stopForcingThrottle()
            eventPlayer.stopForcingPosition()
    elif eventPlayer.getCurrentHero() == Hero.ILLARI:
        if eventPlayer.selected_hero_list_number == null:
            raycast_hit_position1()
            eventPlayer.color = Color.YELLOW
            damage(getPlayersInRadius(eventPlayer.raycast_hit_position, 10, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, 35)
            Area_Casting_Animation()
            playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.BLACK, eventPlayer.raycast_hit_position, 20)
            damage(getPlayersInRadius(eventPlayer.raycast_hit_position, 10, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, 215)
    elif eventPlayer.getCurrentHero() == Hero.LUCIO:
        eventPlayer.Is_Using_Ultimate = true
        raycast_hit_position2()
        createEffect(getAllPlayers(), Effect.RING, Color.YELLOW, eventPlayer.raycast_hit_position2, 8, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[true] = getLastCreatedEntity()
        createIcon(getAllPlayers(), eventPlayer.raycast_hit_position2 + vect(false, 2, false), Icon.WARNING, IconReeval.VISIBILITY_AND_POSITION, Color.WHITE, false)
        eventPlayer.Effects[2] = getLastCreatedEntity()
        async(ultimate_ender, AsyncBehavior.RESTART)
        while eventPlayer.Is_Using_Ultimate:
            eventPlayer.R.append(getPlayersInRadius(eventPlayer.raycast_hit_position2, 8, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES))
            eventPlayer.P = [player for player in eventPlayer.R if distance(player, eventPlayer.raycast_hit_position2) > 8]
            eventPlayer.R.remove(eventPlayer.P)
            eventPlayer.R.setMoveSpeed(60)
            eventPlayer.R.setDamageReceived(110)
            eventPlayer.P.setDamageReceived(70)
            eventPlayer.P.playerSpeed[false] += 0.1
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.YELLOW, eventPlayer.raycast_hit_position2, 8)
            damage(eventPlayer.R, eventPlayer, 45)
            wait(0.8)
        eventPlayer.R.setDamageReceived(70)
        eventPlayer.R.playerSpeed[false] += 0.5
        destroyEffect(eventPlayer.Effects[true])
        destroyIcon(eventPlayer.Effects[2])
    elif eventPlayer.getCurrentHero() == Hero.HANZO:
        if eventPlayer.selected_hero_list_number == 2:
            FoV_and_LoS_player_select()
            if entityExists(eventPlayer.FoV_and_lineOFsight_player):
                eventPlayer.Is_Using_Ultimate = true
                async(ultimate_ender, AsyncBehavior.RESTART)
                smallMessage(getAllPlayers(), "{0} You cannot escape my sight".format(heroIcon(eventPlayer.getCurrentHero())))
                while eventPlayer.Is_Using_Ultimate:
                    eventPlayer.J = getPlayersInRadius(eventPlayer.FoV_and_lineOFsight_player, 100, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES)
                    if len(eventPlayer.J.exclude(eventPlayer.FoV_and_lineOFsight_player)):
                        goto lbl_0
                    break
                    lbl_0:
                    eventPlayer.T = sorted(eventPlayer.J, lambda player: distance(player, eventPlayer.FoV_and_lineOFsight_player))
                    for eventPlayer.X in range(len(eventPlayer.T)):
                        createBeam(getAllPlayers(), Beam.BAD, eventPlayer.T[eventPlayer.X], eventPlayer.T[eventPlayer.X + (-1 if eventPlayer.T[eventPlayer.X] == eventPlayer.T.last() else 1)], Color.YELLOW, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
                        eventPlayer.Effects[4] = getLastCreatedEntity()
                        damage(eventPlayer.T[eventPlayer.X], eventPlayer, 125)
                        wait(0.4)
                        destroyEffect(eventPlayer.Effects[4])
                    eventPlayer.FoV_and_lineOFsight_player = eventPlayer.T.last()
            else:
                eventPlayer.T = []
                smallMessage(eventPlayer, "Enemy is behind a wall")
        elif eventPlayer.selected_hero_list_number == 0:
            smallMessage(getAllPlayers(), "{0} UNLIMITED BLADE WORKS".format(heroIcon(Hero.HANZO)))
            #variable used for unlimited blade works trap
            eventPlayer.E = eventPlayer.getPosition()
            wait(0.5)
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.ORANGE, eventPlayer.getEyePosition(), 7)
            wait(0.5)
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.ORANGE, eventPlayer.getEyePosition(), 10)
            wait(0.5)
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.ORANGE, eventPlayer.getEyePosition(), 15)
            createEffect(getAllPlayers(), Effect.SPHERE, Color.ORANGE, eventPlayer.E, 20, EffectReeval.NONE)
            eventPlayer.Effects[5] = getLastCreatedEntity()
            eventPlayer.Is_Using_Ultimate = true
            #players inside UBW
            eventPlayer.M = getPlayersInRadius(eventPlayer.E, 20, Team.ALL, LosCheck.OFF)
            #Targets inside
            eventPlayer.M.Emiya_master = eventPlayer
            ultimate_ender()
            destroyEffect(eventPlayer.Effects[5])
            #Targets inside
            eventPlayer.M.Emiya_master = null
            playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.WHITE, eventPlayer, 200)
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.Is_Using_Ultimate = true
            eventPlayer.addHealthPool(Health.ARMOR, 2000, false, true)
            raycast_hit_position2()
            createBeam(getAllPlayers(), Beam.BAD, eventPlayer.getPosition(), eventPlayer.raycast_hit_position2, Color.RED, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            createEffect(getAllPlayers(), Effect.SPHERE, Color.RED, eventPlayer.raycast_hit_position2, 15, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[2] = getLastCreatedEntity()
            eventPlayer.setStatusEffect(eventPlayer, Status.FROZEN, 3)
            eventPlayer.setStatusEffect(null, Status.BURNING, 0.4)
            for eventPlayer.for_loop in range(0, 3, true):
                wait(0.7)
                eventPlayer.setStatusEffect(null, Status.BURNING, 0.4)
            kill(getPlayersInRadius(eventPlayer.raycast_hit_position2, 15, Team.ALL, LosCheck.OFF).exclude(eventPlayer), eventPlayer)
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.RED, eventPlayer.raycast_hit_position2 + vect(false, true, false), 7)
            playEffect(getAllPlayers(), DynamicEffect.SOMBRA_EMP_EXPLOSION_EFFECT, Color.TEAM_2, eventPlayer.raycast_hit_position2 + vect(false, true, false), 10)
            playEffect(getAllPlayers(), DynamicEffect.SOMBRA_EMP_EXPLOSION_EFFECT, Color.TEAM_1, eventPlayer.raycast_hit_position2 + vect(false, true, false), 15)
            destroyEffect(eventPlayer.Effects[true])
            destroyEffect(eventPlayer.Effects[2])
            eventPlayer.Is_Using_Ultimate = false
            eventPlayer.setUltCharge(false)
        elif eventPlayer.selected_hero_list_number == 3:
            eventPlayer.Is_Using_Ultimate = true
            smallMessage(getAllPlayers(), "{0} METEOR SHOWER!!!".format(heroIcon(eventPlayer.getCurrentHero())))
            raycast_hit_position2()
            createEffect(getAllPlayers(), Effect.SPHERE, Color.PURPLE, eventPlayer.raycast_hit_position2, 38, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            async(atalante_ultimate_loop, AsyncBehavior.RESTART)
            ultimate_ender()
            eventPlayer.Is_Using_Ultimate = false
            destroyEffect(eventPlayer.Effects[true])
        elif eventPlayer.selected_hero_list_number == 4:
            createProjectile(Projectile.MOIRA_DAMAGE_ORB, eventPlayer, null, null, Relativity.TO_WORLD, ModifyHealth.DAMAGE, getOppositeTeam(eventPlayer.getTeam()), 1500, 1, 6, DynamicEffect.BAD_EXPLOSION, DynamicEffect.EXPLOSION_SOUND, 0.025, 13, 15, 15, 20, 0)
            createEffect(getAllPlayers(), Effect.BAD_AURA, Color.GRAY, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            waitUntil(isAssemblingHeroes(), 1)
            destroyEffect(eventPlayer.Effects[true])
        elif eventPlayer.selected_hero_list_number == 5:
            eventPlayer.clearStatusEffect(Status.HACKED)
            eventPlayer.clearStatusEffect(Status.STUNNED)
            eventPlayer.clearStatusEffect(Status.FROZEN)
            eventPlayer.clearStatusEffect(Status.ASLEEP)
            eventPlayer.clearStatusEffect(Status.KNOCKED_DOWN)
            wait(0.3)
            createEffect(getAllPlayers(), Effect.BAD_AURA, Color.BLUE, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            eventPlayer.forceButtonPress(Button.ULTIMATE)
            eventPlayer.getPlayersInViewAngle(getOppositeTeam(eventPlayer.getTeam()), 95).clearStatusEffect(Status.INVINCIBLE)
            waitUntil(isAssemblingHeroes(), 4)
            destroyEffect(eventPlayer.Effects[true])
        elif eventPlayer.selected_hero_list_number == 6:
            createEffect(getAllPlayers(), Effect.BAD_AURA, Color.SKY_BLUE, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[3] = getLastCreatedEntity()
            waitUntil(eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) or eventPlayer.isDead() or eventPlayer.isInSpawnRoom(), 99999)
            raycast_hit_position2()
            createBeam(getAllPlayers(), Beam.BAD, eventPlayer, eventPlayer.raycast_hit_position2, Color.SKY_BLUE, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[6] = getLastCreatedEntity()
            playEffect(getAllPlayers(), DynamicEffect.TRACER_RECALL_REAPPEAR, Color.WHITE, eventPlayer.raycast_hit_position2, 4)
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.WHITE, eventPlayer.raycast_hit_position2 + vect(false, 2.7, false), 4)
            getPlayersInRadius(eventPlayer.raycast_hit_position2, 4, Team.ALL, LosCheck.OFF).respawn()
            wait(0.5)
            destroyEffect(eventPlayer.Effects[6])
            destroyEffect(eventPlayer.Effects[3])
    elif eventPlayer.getCurrentHero() == Hero.PHARAH:
        if eventPlayer.selected_hero_list_number == null:
            smallMessage(getAllPlayers(), "{0} Behold me and be obliterated".format(heroIcon(eventPlayer.getCurrentHero())))
            eventPlayer.C = null
            chase(eventPlayer.C, 18, duration=3.35, ChaseReeval.DESTINATION_AND_DURATION)
            eventPlayer.Moving_ball_array = Color.WHITE
            eventPlayer.setGravity(25)
            eventPlayer.setStatusEffect(eventPlayer, Status.FROZEN, 4)
            raycast_hit_position1()
            createEffect(getAllPlayers(), Effect.SPHERE, eventPlayer.Moving_ball_array, eventPlayer.raycast_hit_position, updateEveryTick(eventPlayer.C), EffectReeval.VISIBILITY_POSITION_RADIUS_AND_COLOR)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION_SOUND, Color.WHITE, eventPlayer.raycast_hit_position, 560)
            wait(1.11)
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION_SOUND, Color.WHITE, eventPlayer.raycast_hit_position, 560)
            eventPlayer.Moving_ball_array = Color.BLUE
            wait(1.11)
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION_SOUND, Color.WHITE, eventPlayer.raycast_hit_position, 560)
            eventPlayer.Moving_ball_array = Color.YELLOW
            wait(1.13)
            destroyEffect(eventPlayer.Effects[true])
            playEffect(getAllPlayers(), DynamicEffect.GOOD_EXPLOSION, Color.WHITE, eventPlayer.raycast_hit_position, 16)
            playEffect(getAllPlayers(), DynamicEffect.EXPLOSION_SOUND, Color.WHITE, eventPlayer.raycast_hit_position, 1000)
            createEffect(getAllPlayers(), Effect.LIGHT_SHAFT, Color.ROSE, eventPlayer.raycast_hit_position, 18, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[2] = getLastCreatedEntity()
            damage(getPlayersInRadius(eventPlayer.raycast_hit_position, 18, Team.ALL, LosCheck.OFF).exclude(eventPlayer), eventPlayer, 9999)
            wait(0.5)
            destroyEffect(eventPlayer.Effects[2])
            stopChasingVariable(eventPlayer.C)
            eventPlayer.C = null
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.allowButton(Button.ABILITY_2)
            eventPlayer.Is_Using_Ultimate = true
            eventPlayer.setProjectileSpeed(170)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            eventPlayer.setAbilityCooldown(Button.ABILITY_2, 0)
            eventPlayer.forceButtonPress(Button.ABILITY_2)
            waitUntil(not eventPlayer.Is_Using_Ultimate, 0.35)
            eventPlayer.allowButton(Button.PRIMARY_FIRE)
            eventPlayer.setProjectileSpeed(105)
            eventPlayer.Is_Using_Ultimate = false
            eventPlayer.disallowButton(Button.ABILITY_2)
            wait(0.25)
            eventPlayer.setAbilityCooldown(Button.ABILITY_2, 0)
    elif eventPlayer.getCurrentHero() == Hero.BAPTISTE:
        if eventPlayer.selected_hero_list_number == null:
            if eventPlayer.Holy_heal == true:
                eventPlayer.Jehsus_protected_player.setStatusEffect(null, Status.UNKILLABLE, 4)
                smallMessage(getAllPlayers(), "{0} Protecting my friend".format(heroIcon(Hero.BAPTISTE)))
            else:
                if (len([i for i in getLivingPlayers(eventPlayer.getTeam()).exclude(eventPlayer) if i.hasSpawned() and not i.isInSpawnRoom()])) > 0:
                    eventPlayer.Jehsus_protected_player = eventPlayer.getPlayerClosestToReticle(eventPlayer.getTeam())
                    eventPlayer.Holy_heal = true
                    eventPlayer.Jehsus_protected_player.jehsus_master = eventPlayer
                    eventPlayer.Jehsus_protected_player.Holy_heal = true
                    async(baptiste_ult_subroutine, AsyncBehavior.NOOP)
                else:
                    eventPlayer.Is_Using_Ultimate = true
                    eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 1.5)
                    eventPlayer.setMoveSpeed(280)
                    eventPlayer.setDamageDealt(560)
                    createEffect(getAllPlayers(), Effect.ANA_NANO_BOOSTED, Color.TEAM_2, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
                    eventPlayer.Effects[true] = getLastCreatedEntity()
                    waitUntil(eventPlayer.isInSpawnRoom() or eventPlayer.hasStatusEffect(Status.HACKED) or eventPlayer.hasStatusEffect(Status.FROZEN) or eventPlayer.hasStatusEffect(Status.STUNNED) or eventPlayer.hasStatusEffect(Status.ASLEEP) or eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN) or not eventPlayer.Is_Using_Ultimate, 12)
                    eventPlayer.setUltCharge(false)
                    eventPlayer.setMoveSpeed(135)
                    eventPlayer.setDamageDealt(255)
                    destroyEffect(eventPlayer.Effects[true])
                    eventPlayer.Is_Using_Ultimate = false
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.Is_Using_Ultimate = true
            createEffect(getAllPlayers(), Effect.BAD_AURA, Color.ORANGE, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[3] = getLastCreatedEntity()
            smallMessage(getAllPlayers(), "{0} All of OUR HP is mine".format(heroIcon(eventPlayer.getCurrentHero())))
            while eventPlayer.isAlive() and eventPlayer.Is_Using_Ultimate and eventPlayer.getUltCharge() > 0:
                damage([player for player in eventPlayer.getPlayersInViewAngle(Team.ALL, 60) if isInLoS(eventPlayer, player, BarrierLos.PASS_THROUGH_BARRIERS)].exclude(eventPlayer), null, 10)
                eventPlayer.setUltCharge(eventPlayer.getUltCharge() - 2)
                wait(0.1)
            destroyEffect(eventPlayer.Effects[3])
            eventPlayer.Is_Using_Ultimate = false
        elif eventPlayer.selected_hero_list_number == 2:
            FoV_and_LoS_player_select()
            destroyEffect(eventPlayer.Effects[true])
            destroyEffect(eventPlayer.Effects[2])
            eventPlayer.Mahito_Transfigured[0] = true
            eventPlayer.J = true
            eventPlayer.selected_hero_list_number = eventPlayer.FoV_and_lineOFsight_player.selected_hero_list_number
            eventPlayer.startForcingHero(eventPlayer.FoV_and_lineOFsight_player.getCurrentHero())
            wait(1)
            eventPlayer.J = false
            async(Experimental, AsyncBehavior.NOOP)
    elif eventPlayer.getCurrentHero() == Hero.KIRIKO:
        if not eventPlayer.selected_hero_list_number:
            smallMessage(getAllPlayers(), "{0} Bullet Time".format(heroIcon(eventPlayer.getCurrentHero())))
            eventPlayer.Is_Using_Ultimate = true
            setSlowMotion(10)
            wait(0.3)
            setSlowMotion(100)
            waitUntil(not eventPlayer.Is_Using_Ultimate or eventPlayer.isFiringSecondaryFire(), 9999)
            wait(0.25)
            eventPlayer.Is_Using_Ultimate = false
            smallMessage(eventPlayer, "{0} Ultimate Over".format(heroIcon(Hero.KIRIKO)))
            eventPlayer.setUltCharge(random.choice([0, 100, 1]))
    elif eventPlayer.getCurrentHero() == Hero.HAMMOND:
        for eventPlayer.for_loop in range(40):
            createProjectile(Projectile.BASTION_TACTICAL_GRENADE, eventPlayer, null, localVector(vect(random.randint(-15, 15), 5, random.randint(-15, 15)), eventPlayer, Transform.ROTATION), Relativity.TO_WORLD, ModifyHealth.DAMAGE, getOppositeTeam(eventPlayer.getTeam()), 270, 1, 2, DynamicEffect.BAD_EXPLOSION, DynamicEffect.EXPLOSION_SOUND, 0.01, 10, 8, 0, 15, 18)
            wait(0.065)
        eventPlayer.Is_Using_Ultimate = true
        ultimate_ender()
    elif eventPlayer.getCurrentHero() == Hero.LIFEWEAVER:
        if eventPlayer.selected_hero_list_number:
            eventPlayer.Is_Using_Ultimate = true
            bigMessage(getAllPlayers(), "{0} Healing Reversed".format(heroIcon(Hero.LIFEWEAVER)))
            eventPlayer.C = [player for player in getLivingPlayers(getOppositeTeam(eventPlayer.getTeam())) if not player.isInSpawnRoom()]
            eventPlayer.C.healthpack_cursed[1] = eventPlayer
            eventPlayer.C.healthpack_cursed[4] = true
            eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 2)
            for eventPlayer.for_loop in range(0, len(eventPlayer.C), true):
                eventPlayer.C[eventPlayer.for_loop].startTransformingThrottle(true, true, worldVector(Vector.BACKWARD, eventPlayer.C[eventPlayer.for_loop], Transform.ROTATION))
            waitUntil(not eventPlayer.Is_Using_Ultimate, 8)
            eventPlayer.C.stopTransformingThrottle()
            eventPlayer.Is_Using_Ultimate = false
            eventPlayer.C.healthpack_cursed[4] = false
        else:
            eventPlayer.N = getLivingPlayers(eventPlayer.getTeam())
            eventPlayer.N.is_healing_cursed = false
            eventPlayer.N.playerSpeed[false] += 35
            eventPlayer.N.startHoT(eventPlayer, 3, 120)
            eventPlayer.N.is_healing_cursed = false
            eventPlayer.N.is_player_anchored = 0
            eventPlayer.N.healthpack_cursed[0] = false
            for eventPlayer.for_loop in range(0, len(eventPlayer.N), true):
                playEffect(getAllPlayers(), DynamicEffect.GOOD_PICKUP_EFFECT, Color.ROSE, eventPlayer.N[eventPlayer.for_loop], 1)
                eventPlayer.N[eventPlayer.for_loop].setUltCharge(eventPlayer.N[eventPlayer.for_loop].getUltCharge() + 30)
                #before it was using garden_value as *0.15
                eventPlayer.N[eventPlayer.for_loop].addHealthPool(Health.NORMAL, eventPlayer.N[eventPlayer.for_loop].getMaxHealth() * 0.15, true, false)
            waitUntil(eventPlayer.isInSpawnRoom(), 3)
            eventPlayer.N.playerSpeed[false] -= 35
            eventPlayer.forceButtonPress(Button.ULTIMATE)
    elif eventPlayer.getCurrentHero() == Hero.ZARYA:
        if eventPlayer.selected_hero_list_number:
            eventPlayer.Is_Using_Ultimate = true
            createEffect(getAllPlayers(), Effect.GOOD_AURA, Color.RED, eventPlayer, 1, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[4] = getLastCreatedEntity()
            eventPlayer.H = eventPlayer.getNormalizedHealth()
            eventPlayer.setMaxHealth(200)
            wait(0.05)
            eventPlayer.setHealth(eventPlayer.getMaxHealth())
            smallMessage(eventPlayer, "FLOWING DRAGON ACTIVE")
            ultimate_ender()
            eventPlayer.setMaxHealth(150)
            destroyEffect(eventPlayer.Effects[4])
        else:
            create_dummy_of_EventPlayer()
            eventPlayer.Solomon_pillar_array = getLastCreatedEntity()
            getLastCreatedEntity().solomon_master = null
            smallMessage(getAllPlayers(), "10 seconds to kill both Zarya")
            eventPlayer.disableRespawn()
            waitUntil(eventPlayer.isDead() and (eventPlayer.Solomon_pillar_array.isDead() or not entityExists(eventPlayer.Solomon_pillar_array)), 10)
            if eventPlayer.isDead() and (eventPlayer.Solomon_pillar_array.isDead() or not entityExists(eventPlayer.Solomon_pillar_array)):
                goto lbl_1
            eventPlayer.resurrect()
            eventPlayer.setAmmo(0, 600)
            eventPlayer.setDamageDealt(625)
            eventPlayer.startHoT(eventPlayer, 5, 9999)
            lbl_1:
            smallMessage(getAllPlayers(), "Unlucky, one of them is alive")
            eventPlayer.enableRespawn()
            waitUntil(eventPlayer.isInSpawnRoom(), 6.5)
            eventPlayer.setDamageDealt(100)
            destroyDummy(eventPlayer.getTeam(), eventPlayer.Solomon_pillar_array.getSlot())
            eventPlayer.Solomon_pillar_array = null
    elif eventPlayer.getCurrentHero() == Hero.TORBJORN:
        if eventPlayer.selected_hero_list_number == 0:
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            eventPlayer.setDamageDealt(750)
            eventPlayer.setDamageReceived(10)
            wait(6)
            eventPlayer.setDamageDealt(100)
            eventPlayer.setDamageReceived(70)
            eventPlayer.allowButton(Button.PRIMARY_FIRE)
        else:
            FoV_and_LoS_player_select()
            eventPlayer.C = [eventPlayer, eventPlayer.FoV_and_lineOFsight_player]
            eventPlayer.C.B = ["rock", "paper", "Scissors"]
            smallMessage(eventPlayer.C, "Pr.Fire = Rock, Sec.Fire = Paper, Melee = Scissors")
            eventPlayer.C.setStatusEffect(null, Status.UNKILLABLE, 6.5)
            eventPlayer.C.setStatusEffect(null, Status.FROZEN, 6.5)
            wait(1.5)
            eventPlayer.C.Choice_rock_paper_scissors = -1
            waitUntil(all([player.Choice_rock_paper_scissors != -1 for player in eventPlayer.C]), 5.1)
            eventPlayer.C.clearStatusEffect(Status.UNKILLABLE)
            eventPlayer.C.clearStatusEffect(Status.FROZEN)
            eventPlayer.Snow_protection_active = (eventPlayer.Choice_rock_paper_scissors - eventPlayer.FoV_and_lineOFsight_player.Choice_rock_paper_scissors + 3) % 3
            kill(any([player.Choice_rock_paper_scissors == -1 for player in eventPlayer.C]), null)
            if eventPlayer.Snow_protection_active == 1:
                kill(eventPlayer.FoV_and_lineOFsight_player, eventPlayer.FoV_and_lineOFsight_player)
                smallMessage(eventPlayer, "Won :D")
            elif eventPlayer.Snow_protection_active == 2:
                kill(eventPlayer, eventPlayer)
                smallMessage(eventPlayer, "Lost :(")
            elif eventPlayer.Choice_rock_paper_scissors == eventPlayer.FoV_and_lineOFsight_player.Choice_rock_paper_scissors:
                smallMessage(eventPlayer.C, "Draw !?")
    elif eventPlayer.getCurrentHero() == Hero.TRACER:
        eventPlayer.Is_Using_Ultimate = true
        if eventPlayer.selected_hero_list_number:
            eventPlayer.W = getPlayersInRadius(eventPlayer, 5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)
            eventPlayer.W.Cursed_facing_status = 1
            smallMessage(eventPlayer.W, "{0} DONT MOVE YOUR MOUSE!".format(heroIcon(Hero.TRACER)))
            ultimate_ender()
            eventPlayer.W.Cursed_facing_status = null
        else:
            smallMessage(getAllPlayers(), "{0} CAN'T DODGE THIS".format(heroIcon(eventPlayer.getCurrentHero())))
            wait(2.5)
            damage(eventPlayer.B, eventPlayer, 550)
            Tracer_trigger()
            eventPlayer.Is_Using_Ultimate = false
    elif eventPlayer.getCurrentHero() == Hero.DVA and not eventPlayer.isInAlternateForm() and not eventPlayer.A and not eventPlayer.S:
        createEffect(getAllPlayers(), Effect.BAD_AURA, Color.RED, eventPlayer, 3, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[2] = getLastCreatedEntity()
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 0)
        smallMessage(getAllPlayers(), "{0} TIME FOR A JUMP".format(heroIcon(eventPlayer.getCurrentHero())))
        eventPlayer.setMoveSpeed(false)
        eventPlayer.allowButton(Button.ABILITY_1)
        eventPlayer.forceButtonPress(Button.ABILITY_1)
        eventPlayer.setStatusEffect(null, Status.PHASED_OUT, 1)
        wait(1.15)
        eventPlayer.Is_Using_Ultimate = true
        eventPlayer.setMoveSpeed(350)
        waitUntil(not eventPlayer.isUsingAbility1(), 3)
        eventPlayer.Is_Using_Ultimate = false
        destroyEffect(eventPlayer.Effects[2])
        eventPlayer.setMoveSpeed(135)
        eventPlayer.disallowButton(Button.ABILITY_1)
    elif eventPlayer.getCurrentHero() == Hero.JUNKRAT:
        smallMessage(getAllPlayers(), "{0} Floor is NOT Lava".format(heroIcon(Hero.JUNKRAT)))
        eventPlayer.Is_Using_Ultimate = true
        async(ultimate_ender, AsyncBehavior.RESTART)
        for eventPlayer.for_loop in range(75):
            eventPlayer.U = [player for player in getLivingPlayers(getOppositeTeam(eventPlayer.getTeam())) if not player.isOnGround()]
            damage(eventPlayer.U, eventPlayer, 12)
            eventPlayer.U.setStatusEffect(null, Status.BURNING, 1)
            wait(0.1)
            if not eventPlayer.Is_Using_Ultimate:
                goto lbl_2
        lbl_2:
        eventPlayer.Is_Using_Ultimate = false
    elif eventPlayer.getCurrentHero() == Hero.ORISA:
        if eventPlayer.selected_hero_list_number == 0:
            eventPlayer.setProjectileSpeed(10000)
            eventPlayer.setUltCharge(false)
            createEffect(getAllPlayers(), Effect.SPHERE, Color.ORANGE, updateEveryTick(eventPlayer.getPosition()), 8, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[2] = getLastCreatedEntity()
            eventPlayer.Is_Using_Ultimate = true
            async(ultimate_ender, AsyncBehavior.RESTART)
            while eventPlayer.Is_Using_Ultimate:
                eventPlayer.W = getPlayersInRadius(eventPlayer, 8, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)
                eventPlayer.W.setStatusEffect(eventPlayer, Status.ROOTED, 0.2)
                for eventPlayer.for_loop_2 in range(0, len(eventPlayer.W), true):
                    eventPlayer.W[eventPlayer.for_loop_2].applyImpulse(directionTowards(eventPlayer.getPosition(), eventPlayer.W[eventPlayer.for_loop_2]) * vect(true, false, true), 20, Relativity.TO_WORLD, Impulse.INCORPORATE_CONTRARY_MOTION)
                wait(0.1)
            destroyEffect(eventPlayer.Effects[2])
            eventPlayer.setProjectileSpeed(100)
        else:
            eventPlayer.W = getPlayersInRadius(eventPlayer, 12, Team.ALL, LosCheck.OFF).exclude(eventPlayer)
            eventPlayer.W.is_player_anchored = 400
            wait(0.2)
            eventPlayer.W.anchor_position = eventPlayer
            smallMessage(eventPlayer.W, "{0} YOU ARE TIED TO ME NOW".format(heroIcon(eventPlayer.getCurrentHero())))
            eventPlayer.setDamageDealt(175)
            wait(5)
            eventPlayer.setDamageDealt(110)
    elif eventPlayer.getCurrentHero() == Hero.ASHE:
        if eventPlayer.selected_hero_list_number == 0:
            eventPlayer.Medusa_trap = nearestWalkablePosition(eventPlayer)
            eventPlayer.Q = [player for player in getPlayers(getOppositeTeam(eventPlayer.getTeam())) if distance(eventPlayer.Medusa_trap * vect(1, 0, 1), player.getPosition() * vect(1, 0, 1)) <= 25]
            smallMessage(eventPlayer.Q, "{0} No ultimates here".format(heroIcon(eventPlayer.getCurrentHero())))
            createEffect(getAllPlayers(), Effect.LIGHT_SHAFT, Color.RED, eventPlayer.Medusa_trap, 25, EffectReeval.NONE)
            eventPlayer.Effects[3] = getLastCreatedEntity()
            eventPlayer.Is_Using_Ultimate = true
            async(ultimate_ender, AsyncBehavior.RESTART)
            while eventPlayer.Is_Using_Ultimate:
                eventPlayer.Q = [player for player in getPlayers(getOppositeTeam(eventPlayer.getTeam())) if distance(eventPlayer.Medusa_trap * vect(1, 0, 1), player.getPosition() * vect(1, 0, 1)) <= 25]
                eventPlayer.Q.Is_Using_Ultimate = false
                eventPlayer.Q.setStatusEffect(eventPlayer, Status.BURNING, 0.5)
                damage(eventPlayer.Q, null, 3)
                wait(0.1)
            destroyEffect(eventPlayer.Effects[3])
        elif eventPlayer.selected_hero_list_number == 1:
            playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.BLUE, eventPlayer, 250)
            raycast_hit_position1()
            eventPlayer.chase_Variable_at_rate = eventPlayer.getPosition()
            eventPlayer.chase_variable_destination2 = eventPlayer.raycast_hit_position
            eventPlayer.chase_variable_rate_speed = 40
            chase_player_var_speed()
            eventPlayer.Is_Using_Ultimate = true
            createEffect(getAllPlayers(), Effect.GOOD_AURA, Color.YELLOW, updateEveryTick(eventPlayer.chase_Variable_at_rate), 6, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[3] = getLastCreatedEntity()
            createEffect(getAllPlayers(), Effect.SPHERE, Color.YELLOW, updateEveryTick(eventPlayer.chase_Variable_at_rate), 6, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[4] = getLastCreatedEntity()
            async(xuanzang_ULT_loop, AsyncBehavior.RESTART)
            waitUntil(eventPlayer.chase_Variable_at_rate == eventPlayer.raycast_hit_position or not eventPlayer.Is_Using_Ultimate, 4)
            playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.BLUE, eventPlayer, 100)
            playEffect(getAllPlayers(), DynamicEffect.BAD_PICKUP_EFFECT, Color.RED, eventPlayer, 1)
            destroyEffect(eventPlayer.Effects[3])
            destroyEffect(eventPlayer.Effects[4])
            stopChasingVariable(eventPlayer.chase_Variable_at_rate)
            waitUntil(not eventPlayer.Is_Using_Ultimate, 3)
            eventPlayer.Is_Using_Ultimate = false
        elif eventPlayer.selected_hero_list_number == 2:
            smallMessage(getAllPlayers(), "{0} Let my weapons rain down on you".format(heroIcon(eventPlayer.getCurrentHero())))
            raycast_hit_position2()
            createEffect(getAllPlayers(), Effect.RING, Color.ORANGE, eventPlayer.raycast_hit_position2, 15, EffectReeval.VISIBILITY)
            eventPlayer.Effects[4] = getLastCreatedEntity()
            eventPlayer.Is_Using_Ultimate = true
            eventPlayer.G = eventPlayer.raycast_hit_position2 + vect(random.randint(-15, 15), false, random.randint(-15, 15))
            createEffect(getAllPlayers(), Effect.LIGHT_SHAFT, Color.YELLOW, eventPlayer.G, 1, EffectReeval.POSITION_AND_RADIUS)
            eventPlayer.Effects[5] = getLastCreatedEntity()
            async(ultimate_ender, AsyncBehavior.RESTART)
            while eventPlayer.Is_Using_Ultimate:
                eventPlayer.G = eventPlayer.raycast_hit_position2 + vect(random.randint(-8, 8), false, random.randint(-8, 8))
                eventPlayer.air_area_difference_array = ([player for player in getLivingPlayers(Team.ALL) if distance(eventPlayer.G * vect(1, 0, 1), player.getPosition() * vect(1, 0, 1)) <= 1.8]).exclude(eventPlayer)
                playEffect(getAllPlayers(), DynamicEffect.EXPLOSION_SOUND, Color.YELLOW, eventPlayer.G, 65)
                playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.YELLOW, eventPlayer.G, 3)
                damage(eventPlayer.air_area_difference_array, eventPlayer, 160)
                wait(0.06)
            destroyEffect(eventPlayer.Effects[4])
            destroyEffect(eventPlayer.Effects[5])
        elif eventPlayer.selected_hero_list_number == 3:
            eventPlayer.S = 0.15
            createEffect(getAllPlayers(), Effect.GOOD_AURA, Color.ORANGE, updateEveryTick(eventPlayer.getEyePosition() + eventPlayer.getFacingDirection() * 0.5), eventPlayer.S, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[3] = getLastCreatedEntity()
            eventPlayer.D = null
            eventPlayer.startForcingButton(Button.SECONDARY_FIRE)
            createInWorldText(eventPlayer, "Damage: {0}".format(eventPlayer.D), updateEveryTick(eventPlayer.getEyePosition() + eventPlayer.getFacingDirection()), 2, Clip.SURFACES, WorldTextReeval.VISIBILITY_POSITION_AND_STRING, Color.WHITE, SpecVisibility.DEFAULT)
            eventPlayer.Effects[4] = getLastCreatedText()
            chase(eventPlayer.D, 750, rate=200, ChaseReeval.DESTINATION_AND_RATE)
            waitUntil(eventPlayer.isFiringPrimaryFire() or isAssemblingHeroes() or eventPlayer.isDead() or not eventPlayer.isHoldingButton(Button.SECONDARY_FIRE), 99999)
            stopChasingVariable(eventPlayer.D)
            raycast_hit_position1()
            raycast_hit_player()
            damage(eventPlayer.raycast_hit_player if eventPlayer.raycast_hit_player in getLivingPlayers(getOppositeTeam(eventPlayer.getTeam())) else getPlayersInRadius(eventPlayer.raycast_hit_position, 3, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES_AND_ENEMY_BARRIERS), eventPlayer, eventPlayer.D * 2 if eventPlayer.raycast_hit_player in getLivingPlayers(getOppositeTeam(eventPlayer.getTeam())) else eventPlayer.D)
            playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.RED, eventPlayer.raycast_hit_position, 3)
            playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.WHITE, eventPlayer.raycast_hit_position, 3)
            playEffect(getAllPlayers(), DynamicEffect.EXPLOSION_SOUND, Color.WHITE, eventPlayer.raycast_hit_position, 100)
            destroyEffect(eventPlayer.Effects[3])
            destroyInWorldText(eventPlayer.Effects[4])
            createBeam(getAllPlayers(), Beam.GOOD, eventPlayer, eventPlayer.raycast_hit_position, Color.WHITE, EffectReeval.NONE)
            eventPlayer.Effects[3] = getLastCreatedEntity()
            createBeam(getAllPlayers(), Beam.BAD, eventPlayer, eventPlayer.raycast_hit_position, Color.ORANGE, EffectReeval.NONE)
            eventPlayer.Effects[4] = getLastCreatedEntity()
            eventPlayer.stopForcingButton(Button.SECONDARY_FIRE)
            wait(0.1)
            destroyEffect(eventPlayer.Effects[4])
            destroyEffect(eventPlayer.Effects[3])
    elif eventPlayer.getCurrentHero() == Hero.ZENYATTA:
        if eventPlayer.selected_hero_list_number == 0:
            while eventPlayer.isUsingUltimate():
                damage(getPlayersInRadius(eventPlayer, 5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, 75)
                wait(0.25)
        elif eventPlayer.selected_hero_list_number == 1:
            raycast_hit_position1()
            eventPlayer.color = Color.RED
            Area_Casting_Animation()
            eventPlayer.trump_wait_middle = 18
            eventPlayer.Is_Using_Ultimate = true
            createEffect(getAllPlayers(), Effect.SPHERE, Color.RED, eventPlayer.raycast_hit_position, eventPlayer.trump_wait_middle, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            eventPlayer.P = []
            eventPlayer.P.append(getPlayersInRadius(eventPlayer.raycast_hit_position, eventPlayer.trump_wait_middle, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF))
            chase(eventPlayer.trump_wait_middle, 9, duration=5, ChaseReeval.DESTINATION_AND_DURATION)
            async(ultimate_ender, AsyncBehavior.RESTART)
            smallMessage(getAllPlayers(), "{0} PRISON ACTIVE".format(heroIcon(Hero.ZENYATTA)))
            while eventPlayer.Is_Using_Ultimate:
                for eventPlayer.for_loop in range(0, len(eventPlayer.P), true):
                    if distance(eventPlayer.P[eventPlayer.for_loop], eventPlayer.raycast_hit_position) > eventPlayer.trump_wait_middle:
                        eventPlayer.P[eventPlayer.for_loop].applyImpulse(directionTowards(eventPlayer.P[eventPlayer.for_loop], eventPlayer.raycast_hit_position), 33, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
                        eventPlayer.P[eventPlayer.for_loop].setStatusEffect(eventPlayer, Status.FROZEN, 0.7)
                        damage(eventPlayer.P[eventPlayer.for_loop], eventPlayer, 150)
                        wait()
                    wait()
                wait(0.1)
            stopChasingVariable(eventPlayer.trump_wait_middle)
            eventPlayer.P = []
            destroyEffect(eventPlayer.Effects[true])
        elif eventPlayer.selected_hero_list_number == 2:
            smallMessage(getAllPlayers(), "{0} If you MOVE you DIE".format(heroIcon(Hero.ZENYATTA)))
            eventPlayer.startForcingThrottle(false, false, false, false, false, false)
            wait(1.25)
            eventPlayer.Is_Using_Ultimate = true
            createEffect(getAllPlayers(), Effect.SPHERE, Color.RED, eventPlayer.getPosition(), 1800, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            async(ultimate_ender, AsyncBehavior.RESTART)
            while eventPlayer.Is_Using_Ultimate:
                eventPlayer.filtered_array = ([player for player in getLivingPlayers(Team.ALL) if distance(eventPlayer * vect(1, 0, 1), player.getPosition() * vect(1, 0, 1)) <= 1800 and player.isMoving()]).exclude(eventPlayer)
                damage(eventPlayer.filtered_array, eventPlayer, 12)
                heal(eventPlayer, eventPlayer, len(eventPlayer.filtered_array) * 7)
                wait()
            destroyEffect(eventPlayer.Effects[true])
            eventPlayer.allowButton(Button.PRIMARY_FIRE)
            eventPlayer.allowButton(Button.SECONDARY_FIRE)
            eventPlayer.stopForcingThrottle()
        elif eventPlayer.selected_hero_list_number == 3:
            eventPlayer.raycast_hit_position = eventPlayer
            eventPlayer.startForcingThrottle(false, false, false, false, false, false)
            eventPlayer.C = 0.5
            eventPlayer.color = Color.YELLOW
            Area_Casting_Animation()
            eventPlayer.allowButton(Button.ULTIMATE)
            eventPlayer.forceButtonPress(Button.ULTIMATE)
            chase(eventPlayer.C, 18, duration=2.15, ChaseReeval.DESTINATION_AND_DURATION)
            createEffect(getAllPlayers(), Effect.RING, Color.YELLOW, eventPlayer, eventPlayer.C, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[2] = getLastCreatedEntity()
            createEffect(getAllPlayers(), Effect.LIGHT_SHAFT, Color.YELLOW, eventPlayer, eventPlayer.C, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            eventPlayer.Is_Using_Ultimate = true
            async(ultimate_ender, AsyncBehavior.RESTART)
            while eventPlayer.isUsingUltimate():
                eventPlayer.filtered_array = ([player for player in getLivingPlayers(Team.ALL) if distance(eventPlayer.getPosition() * vect(1, 0, 1), player.getPosition() * vect(1, 0, 1)) <= eventPlayer.C]).exclude(eventPlayer)
                eventPlayer.filtered_array.remove(eventPlayer.Solomon_pillar_array)
                damage(eventPlayer.filtered_array, eventPlayer, 100)
                wait(0.09)
            eventPlayer.stopForcingThrottle()
            stopChasingVariable(eventPlayer.C)
            destroyEffect(eventPlayer.Effects[true])
            eventPlayer.stopForcingPosition()
            eventPlayer.disallowButton(Button.ULTIMATE)
            destroyEffect(eventPlayer.Effects[2])
    elif eventPlayer.getCurrentHero() == Hero.SOMBRA:
        if not eventPlayer.selected_hero_list_number:
            if entityExists(eventPlayer.Solomon_pillar_array):
                eventPlayer.G = getPlayersInRadius(eventPlayer.Solomon_pillar_array, 8, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)
                damage(eventPlayer.G, eventPlayer, 285)
                eventPlayer.G.setAimSpeed(1000)
                playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.WHITE, eventPlayer.Solomon_pillar_array, 6)
                playEffect(getAllPlayers(), DynamicEffect.GOOD_EXPLOSION, Color.VIOLET, eventPlayer.Solomon_pillar_array, 6)
                playEffect(getAllPlayers(), DynamicEffect.EXPLOSION_SOUND, Color.VIOLET, eventPlayer.Solomon_pillar_array, 100)
                kill(eventPlayer.Solomon_pillar_array, null)
                wait(4.5)
                eventPlayer.G.setAimSpeed(100)
                eventPlayer.Solomon_pillar_array = []
            else:
                eventPlayer.setUltCharge(eventPlayer.getUltCharge() - 20)
                houdini_create_clone()
                goto lbl_3
        else:
            FoV_and_LoS_player_select()
            eventPlayer.attachTo(eventPlayer.FoV_and_lineOFsight_player, vect(0, 0, 0))
            if not eventPlayer.FoV_and_lineOFsight_player:
                goto lbl_4
            eventPlayer.FoV_and_lineOFsight_player.startDoT(null, 9999, 40)
            eventPlayer.X = getLastDoT()
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            wait(0.1)
            eventPlayer.Is_Using_Ultimate = true
            waitUntil(eventPlayer.isHoldingButton(Button.ULTIMATE) or distance(eventPlayer, eventPlayer.FoV_and_lineOFsight_player) > 2 or eventPlayer.isDead() or eventPlayer.FoV_and_lineOFsight_player.isDead() or not eventPlayer.Is_Using_Ultimate, 10)
            lbl_4:
            eventPlayer.detach()
            eventPlayer.Is_Using_Ultimate = false
            stopDoT(eventPlayer.X)
            eventPlayer.allowButton(Button.PRIMARY_FIRE)
    if eventPlayer.getCurrentHero() == Hero.KIRIKO and not eventPlayer.selected_hero_list_number:
        goto lbl_5
    eventPlayer.setUltCharge(0)
    lbl_3:
    lbl_5:


rule "ULTIMATE SETUP #2: Cassidy, Symmetra, Soldier 76, Genji, Moira, Doomfist":
    @Event eachPlayer
    @Condition (eventPlayer.isHoldingButton(Button.ULTIMATE) and eventPlayer.getUltCharge() == 100 or eventPlayer.isUsingUltimate()) == true
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.isInSpawnRoom() == false
    @Condition eventPlayer.getCurrentHero() in Global_ULTButton_2 == true
    
    if eventPlayer.getCurrentHero() == Hero.CASSIDY:
        if eventPlayer.selected_hero_list_number == null:
            wait(1)
            if not eventPlayer.isUsingUltimate():
                goto lbl_0
            eventPlayer.forceButtonPress(Button.PRIMARY_FIRE)
            wait(1)
            eventPlayer.forceButtonPress(Button.PRIMARY_FIRE)
            eventPlayer.setStatusEffect(null, Status.HACKED, 0.25)
            lbl_0:
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.startHoT(eventPlayer, 3, 80)
            eventPlayer.Is_Using_Ultimate = true
            async(ultimate_ender, AsyncBehavior.RESTART)
            createInWorldText(getPlayers(getOppositeTeam(eventPlayer.getTeam())), "{0} Don't get close {1} ".format(iconString(Icon.WARNING), iconString(Icon.WARNING)), eventPlayer + vect(0, 2, 0), 1.2, Clip.NONE, WorldTextReeval.VISIBILITY_POSITION_AND_STRING, Color.WHITE, SpecVisibility.DEFAULT)
            eventPlayer.Effects[2] = getLastCreatedText()
            createEffect(getAllPlayers(), Effect.GOOD_AURA, Color.GRAY, eventPlayer, 1, EffectReeval.VISIBILITY_POSITION_RADIUS_AND_COLOR)
            eventPlayer.Effects[5] = getLastCreatedEntity()
            createEffect(getAllPlayers(), Effect.RING, Color.RED, eventPlayer, 9, EffectReeval.VISIBILITY_POSITION_RADIUS_AND_COLOR)
            eventPlayer.Effects[8] = getLastCreatedEntity()
            while eventPlayer.Is_Using_Ultimate:
                getPlayersInRadius(eventPlayer, 9, Team.ALL, LosCheck.OFF).exclude(eventPlayer).startDoT(eventPlayer, 2.5, 20)
                wait(0.3)
            destroyInWorldText(eventPlayer.Effects[2])
            destroyEffect(eventPlayer.Effects[5])
            destroyEffect(eventPlayer.Effects[8])
    elif eventPlayer.getCurrentHero() == Hero.SYMMETRA:
        if eventPlayer.selected_hero_list_number == 0:
            eventPlayer.raycast_hit_position = eventPlayer.getPosition()
            eventPlayer.color = Color.PURPLE
            Area_Casting_Animation()
            createEffect(getAllPlayers(), Effect.SPHERE, Color.PURPLE, eventPlayer.raycast_hit_position, 13, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[10] = getLastCreatedEntity()
            eventPlayer.Is_Using_Ultimate = true
            async(ultimate_ender, AsyncBehavior.RESTART)
            while eventPlayer.Is_Using_Ultimate:
                eventPlayer.Z.append(getPlayersInRadius(eventPlayer.raycast_hit_position, 13, Team.ALL, LosCheck.OFF).exclude(eventPlayer))
                eventPlayer.Z.setGravity(false)
                eventPlayer.X = [player for player in eventPlayer.Z if distance(player, eventPlayer.raycast_hit_position) > 13]
                eventPlayer.X.setGravity(100)
                eventPlayer.Z.remove(eventPlayer.X)
                getPlayersInRadius(eventPlayer.raycast_hit_position, 13, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF).applyImpulse(directionTowards(getPlayersInRadius(eventPlayer.raycast_hit_position, 13, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer.raycast_hit_position), 15, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
                damage(eventPlayer.Z, eventPlayer, 40)
                wait(0.15)
            destroyEffect(eventPlayer.Effects[10])
            eventPlayer.Z.setGravity(100)
            eventPlayer.Z = null
        elif eventPlayer.selected_hero_list_number == 1:
            if eventPlayer.U == false:
                eventPlayer.R = vect(eventPlayer.getPosition().x, false, eventPlayer.getPosition().z)
                eventPlayer.S = eventPlayer.getFacingDirection()
            elif eventPlayer.U == true:
                eventPlayer.trump_wait_time = 0.05
                eventPlayer.trump_wait_middle = 0.05
                eventPlayer.setInvisibility(Invis.ALL)
                createEffect(getAllPlayers(), Effect.BAD_AURA, Color.BLUE, eventPlayer.getPosition(), true, EffectReeval.VISIBILITY)
                eventPlayer.Effects[5] = getLastCreatedEntity()
                wait(6)
                eventPlayer.trump_wait_time = 0.25
                eventPlayer.trump_wait_middle = 0.1
                smallMessage(eventPlayer, "Ultimate over")
                eventPlayer.setInvisibility(Invis.NONE)
                destroyEffect(eventPlayer.Effects[5])
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.C = [player for player in eventPlayer.getPlayersInViewAngle(getOppositeTeam(eventPlayer.getTeam()), 75) if isInLoS(eventPlayer, player, BarrierLos.PASS_THROUGH_BARRIERS)]
            damage(eventPlayer.C, eventPlayer, 100)
            playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.SKY_BLUE, eventPlayer, 6)
        elif eventPlayer.selected_hero_list_number == 3:
            eventPlayer.T = [player for player in getPlayersInRadius(eventPlayer, 25, Team.ALL, LosCheck.SURFACES) if player.isAlive()].exclude(eventPlayer)
            eventPlayer.T.Is_Crippled = true
            playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.WHITE, eventPlayer, 100)
            damage(eventPlayer.T, eventPlayer, 100)
            smallMessage(eventPlayer.T, "{0} - Crippled".format(heroIcon(Hero.SYMMETRA)))
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.SKY_BLUE, eventPlayer.getEyePosition(), 35)
            getPlayers(eventPlayer.getTeam()).setAbilityCooldown(Button.ABILITY_1, 0)
            getPlayers(eventPlayer.getTeam()).setAbilityCooldown(Button.ABILITY_2, 0)
            getPlayers(eventPlayer.getTeam()).Is_Crippled = false
            eventPlayer.setUltEnabled(false)
            wait(5)
            eventPlayer.setUltEnabled(true)
    elif eventPlayer.getCurrentHero() == Hero.SOLDIER:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.setAbilityCooldown(Button.SECONDARY_FIRE, false)
            eventPlayer.Is_Using_Ultimate = true
            playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.RED, eventPlayer, 100)
            createEffect(getAllPlayers(), Effect.BAD_AURA, Color.RED, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[3] = getLastCreatedEntity()
            progressBarHud(eventPlayer, eventPlayer.gilles_de_rais_damage, "Spear throw activation LOADING", HudPosition.TOP, 0, Color.RED, Color.WHITE, ProgressHudReeval.VISIBILITY_VALUES_AND_COLOR, SpecVisibility.DEFAULT)
            eventPlayer.Effects[4] = getLastCreatedText()
            eventPlayer.gilles_de_rais_damage = null
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.setStatusEffect(null, Status.ROOTED, 9999)
            async(ultimate_ender, AsyncBehavior.RESTART)
            while eventPlayer.Is_Using_Ultimate and eventPlayer.gilles_de_rais_damage < 100:
                eventPlayer.gilles_de_rais_damage += 10
                wait(0.2)
            waitUntil(not eventPlayer.Is_Using_Ultimate or eventPlayer.gilles_de_rais_damage == 100, 99999)
            if not eventPlayer.Is_Using_Ultimate:
                goto lbl_1
            smallMessage(eventPlayer, "Can fire rocket now")
            eventPlayer.allowButton(Button.SECONDARY_FIRE)
            waitUntil(not eventPlayer.Is_Using_Ultimate or eventPlayer.isFiringSecondaryFire(), 15)
            waitUntil(not eventPlayer.Is_Using_Ultimate, 1.5)
            lbl_1:
            eventPlayer.clearStatusEffect(Status.ROOTED)
            eventPlayer.Is_Using_Ultimate = false
            destroyEffect(eventPlayer.Effects[3])
            destroyProgressBarHud(eventPlayer.Effects[4])
            eventPlayer.allowButton(Button.SECONDARY_FIRE)
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.Is_Using_Ultimate = true
            createEffect(getAllPlayers(), Effect.BAD_AURA, Color.GREEN, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            eventPlayer.playerSpeed[false] += 150
            eventPlayer.setGravity(0)
            eventPlayer.disableEnvironmentCollision(false)
            eventPlayer.setStatusEffect(eventPlayer, Status.INVINCIBLE, 6)
            async(ultimate_ender, AsyncBehavior.RESTART)
            while eventPlayer.Is_Using_Ultimate and getPlayersInRadius(eventPlayer, 2.1, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES) <= 0:
                if not eventPlayer.isHoldingButton(Button.SECONDARY_FIRE):
                    goto lbl_2
                eventPlayer.applyImpulse(eventPlayer.getFacingDirection(), 1.5, Relativity.TO_WORLD, Impulse.INCORPORATE_CONTRARY_MOTION)
                lbl_2:
                wait(0.02)
            if not eventPlayer.Is_Using_Ultimate:
                goto lbl_3
            heal(eventPlayer, eventPlayer, 360)
            damage(getPlayersInRadius(eventPlayer, 5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES_AND_ENEMY_BARRIERS), eventPlayer, 345)
            playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.GREEN, eventPlayer, 3)
            playEffect(getAllPlayers(), DynamicEffect.EXPLOSION_SOUND, Color.GREEN, eventPlayer, 100)
            lbl_3:
            eventPlayer.enableEnvironmentCollision()
            eventPlayer.playerSpeed[false] -= 150
            eventPlayer.Is_Using_Ultimate = false
            destroyEffect(eventPlayer.Effects[true])
            eventPlayer.setGravity(100)
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.Medusa_ultimate = []
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION_SOUND, Color.GREEN, eventPlayer + vect(false, 2, false), 110)
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.GREEN, eventPlayer + vect(false, 2, false), 7)
            eventPlayer.Medusa_ultimate.append(getPlayersInRadius(eventPlayer, 7, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF))
            wait(0.1)
            eventPlayer.Is_Using_Ultimate = true
            smallMessage(eventPlayer.Medusa_ultimate, "Cursed by Diarmuid ULT")
            damage(eventPlayer.Medusa_ultimate, eventPlayer, 5)
            eventPlayer.Medusa_ultimate.setStatusEffect(eventPlayer, Status.BURNING, 8.25)
            eventPlayer.Medusa_ultimate.setDamageReceived(120)
            eventPlayer.Medusa_ultimate.is_healing_cursed = true
            waitUntil(not eventPlayer.Is_Using_Ultimate, 6)
            eventPlayer.Is_Using_Ultimate = false
            eventPlayer.Medusa_ultimate.is_healing_cursed = false
            eventPlayer.Medusa_ultimate.setDamageReceived(70)
        elif eventPlayer.selected_hero_list_number == 3:
            eventPlayer.playerSpeed[false] += 80
            getPlayersInRadius(eventPlayer, 8, eventPlayer.getTeam(), LosCheck.OFF).setStatusEffect(null, Status.UNKILLABLE, 8)
            eventPlayer.Is_Using_Ultimate = true
            playEffect(getAllPlayers(), DynamicEffect.GOOD_EXPLOSION, Color.YELLOW, eventPlayer, 7)
            waitUntil(not eventPlayer.Is_Using_Ultimate, 8)
            eventPlayer.Is_Using_Ultimate = false
            eventPlayer.playerSpeed[false] -= 80
        elif eventPlayer.selected_hero_list_number == 4:
            eventPlayer.setStatusEffect(null, Status.ROOTED, 3)
            eventPlayer.Is_Using_Ultimate = true
            raycast_hit_position1()
            createEffect(getAllPlayers(), Effect.SPHERE, Color.ROSE, eventPlayer.raycast_hit_position, 18, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[6] = getLastCreatedEntity()
            createIcon(getAllPlayers(), eventPlayer.raycast_hit_position + vect(0, 5, 0), Icon.WARNING, IconReeval.VISIBILITY_AND_POSITION, Color.WHITE, true)
            eventPlayer.Effects[7] = getLastCreatedEntity()
            eventPlayer.S = 18
            eventPlayer.C = eventPlayer.getPosition() + vect(false, 40, false)
            createEffect(getAllPlayers(), Effect.SPHERE, Color.RED, eventPlayer.C, eventPlayer.S, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[5] = getLastCreatedEntity()
            wait(2.65)
            chase(eventPlayer.C, eventPlayer.raycast_hit_position, rate=30, ChaseReeval.DESTINATION_AND_RATE)
            waitUntil(eventPlayer.C == eventPlayer.raycast_hit_position or not eventPlayer.Is_Using_Ultimate, 99999)
            damage(getPlayersInRadius(eventPlayer.C, eventPlayer.S, Team.ALL, LosCheck.OFF).exclude(eventPlayer), eventPlayer, 1000)
            getPlayersInRadius(eventPlayer.C, eventPlayer.S, Team.ALL, LosCheck.OFF).startDoT(null, 10, 15)
            playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.RED, eventPlayer.C, eventPlayer.S)
            playEffect(getAllPlayers(), DynamicEffect.EXPLOSION_SOUND, Color.RED, eventPlayer.C, 300)
            stopChasingVariable(eventPlayer.C)
            eventPlayer.Is_Using_Ultimate = false
            destroyEffect(eventPlayer.Effects[5])
            destroyEffect(eventPlayer.Effects[6])
            destroyIcon(eventPlayer.Effects[7])
        elif eventPlayer.selected_hero_list_number == 5:
            FoV_and_LoS_player_select()
            if not entityExists(eventPlayer.FoV_and_lineOFsight_player):
                goto lbl_4
            #set  the event player poison
            eventPlayer.Is_Using_Ultimate = true
            eventPlayer.P[false] = eventPlayer
            eventPlayer.P[true] = eventPlayer.FoV_and_lineOFsight_player
            #dmg was 25
            eventPlayer.P[0].startDoT(null, 9999, eventPlayer.getMaxHealth() / 25)
            #was 40
            eventPlayer.P[true].startDoT(null, 9999, eventPlayer.P[true].getMaxHealth() / 20)
            eventPlayer.is_healing_cursed = true
            eventPlayer.P[true].is_healing_cursed = true
            createIcon(getAllPlayers(), eventPlayer.P[0], Icon.RADIOACTIVE, IconReeval.VISIBILITY_AND_POSITION, Color.LIME_GREEN, true)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            createIcon(getAllPlayers(), eventPlayer.P[true], Icon.RADIOACTIVE, IconReeval.VISIBILITY_AND_POSITION, Color.LIME_GREEN, true)
            eventPlayer.Effects[2] = getLastCreatedEntity()
            waitUntil(eventPlayer.isDead() or not eventPlayer.Is_Using_Ultimate or not entityExists(eventPlayer) or eventPlayer.isInSpawnRoom() or eventPlayer.P[true].isInSpawnRoom() or not entityExists(eventPlayer.P[true]) or eventPlayer.P[true].isDead(), 99999)
            eventPlayer.is_healing_cursed = false
            eventPlayer.P[true].is_healing_cursed = false
            eventPlayer.P[true].stopAllDoT()
            eventPlayer.stopAllDoT()
            #shakespear
            wait(0.25)
            destroyIcon(eventPlayer.Effects[true])
            destroyIcon(eventPlayer.Effects[2])
            if eventPlayer.isDead() or not entityExists(eventPlayer):
                heal(eventPlayer.P[true], eventPlayer, 100000)
            elif eventPlayer.P[true].isDead() or not entityExists(eventPlayer.P[true]):
                heal(eventPlayer, eventPlayer, 10000)
            eventPlayer.Is_Using_Ultimate = false
        lbl_4:
    elif eventPlayer.getCurrentHero() == Hero.GENJI:
        async(can_use_blade_subroutine, AsyncBehavior.RESTART)
        if eventPlayer.selected_hero_list_number == 1:
            eventPlayer.playerSpeed[false] += 125
            createEffect(getAllPlayers(), Effect.GOOD_AURA, Color.PURPLE, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[3] = getLastCreatedEntity()
            smallMessage(eventPlayer, "Death mode activated")
            eventPlayer.Is_Using_Ultimate = true
            hudHeader(getAllPlayers(), "{0} {1}".format(heroIcon(eventPlayer.T.getCurrentHero()), "is target"), HudPosition.TOP, 2, Color.RED, HudReeval.VISIBILITY_AND_STRING, SpecVisibility.DEFAULT)
            eventPlayer.Effects[5] = getLastCreatedText()
            createIcon(eventPlayer, eventPlayer.T, Icon.SKULL, IconReeval.VISIBILITY_AND_POSITION, Color.WHITE, true)
            eventPlayer.Effects[6] = getLastCreatedEntity()
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            async(ultimate_ender, AsyncBehavior.RESTART)
            while eventPlayer.Is_Using_Ultimate:
                eventPlayer.T = ([i for i in eventPlayer.getPlayerClosestToReticle(getOppositeTeam(eventPlayer.getTeam())) if not i.isDummy() and entityExists(i)])[0]
                waitUntil(not eventPlayer.Is_Using_Ultimate or eventPlayer.T.isDead() or not entityExists(eventPlayer.T), 99999)
                wait()
            eventPlayer.allowButton(Button.PRIMARY_FIRE)
            destroyHudText(eventPlayer.Effects[5])
            destroyEffect(eventPlayer.Effects[3])
            destroyIcon(eventPlayer.Effects[6])
            eventPlayer.playerSpeed[false] -= 125
        elif eventPlayer.selected_hero_list_number == 2:
            createEffect(getAllPlayers(), Effect.SPHERE, Color.VIOLET, eventPlayer, 7, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[2] = getLastCreatedEntity()
            for eventPlayer.for_loop_2 in range(0, 3, true):
                eventPlayer.N = getPlayersInRadius(eventPlayer, 7, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES)
                playEffect(getAllPlayers(), DynamicEffect.BAD_PICKUP_EFFECT, Color.RED, eventPlayer, 5)
                playEffect(getAllPlayers(), DynamicEffect.BUFF_IMPACT_SOUND, Color.PURPLE, eventPlayer, 120)
                eventPlayer.N.playerSpeed[false] -= 50
                damage(eventPlayer.N, eventPlayer, 0.1)
                for eventPlayer.for_loop in range(0, 3, true):
                    eventPlayer.N[eventPlayer.for_loop].setHealth(eventPlayer.N[eventPlayer.for_loop].getHealth() - eventPlayer.N[eventPlayer.for_loop].getMaxHealth() / 3)
                wait(0.65)
                eventPlayer.N.playerSpeed[false] += 50
            destroyEffect(eventPlayer.Effects[2])
        elif eventPlayer.selected_hero_list_number == 4:
            FoV_and_LoS_player_select()
            if not eventPlayer.FoV_and_lineOFsight_player:
                goto lbl_5
            if eventPlayer.FoV_and_lineOFsight_player.getCurrentHero() in getAllHeroes():
                createEffect(getAllPlayers(), Effect.CLOUD, Color.GREEN, eventPlayer.FoV_and_lineOFsight_player, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
                eventPlayer.Effects[true] = getLastCreatedEntity()
                eventPlayer.Is_Using_Ultimate = true
                async(hassan_100_loop, AsyncBehavior.RESTART)
                waitUntil(not eventPlayer.Is_Using_Ultimate, 4.2)
                eventPlayer.Is_Using_Ultimate = false
                destroyEffect(eventPlayer.Effects[true])
            else:
                smallMessage(eventPlayer, "No target found")
                lbl_5:
        elif eventPlayer.selected_hero_list_number == 3:
            eventPlayer.allowButton(Button.PRIMARY_FIRE)
            eventPlayer.L = eventPlayer.getPosition()
            eventPlayer.setDamageReceived(50)
            createEffect(getAllPlayers(), Effect.LIGHT_SHAFT, Color.SKY_BLUE, eventPlayer.L, 10, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[2] = getLastCreatedEntity()
            eventPlayer.P = getPlayersInRadius(eventPlayer, 12, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)
            eventPlayer.playerSpeed[false] += 25
            while eventPlayer.isUsingUltimate():
                for eventPlayer.for_loop_2 in range(0, len(eventPlayer.P), true):
                    if distance(eventPlayer.P[eventPlayer.for_loop_2] * vect(1, 0, 1), eventPlayer.L * vect(1, 0, 1)) > 10:
                        damage(eventPlayer.P[eventPlayer.for_loop_2], eventPlayer, 8)
                        eventPlayer.P[eventPlayer.for_loop_2].setStatusEffect(eventPlayer, Status.ROOTED, 0.2)
                        eventPlayer.P[eventPlayer.for_loop_2].applyImpulse(directionTowards(eventPlayer.P[eventPlayer.for_loop_2], eventPlayer.L), 15, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
                wait()
                if eventPlayer.isUsingUltimate():
                    goto lbl_6
                break
                lbl_6:
            eventPlayer.setDamageReceived(70)
            destroyEffect(eventPlayer.Effects[2])
            eventPlayer.playerSpeed[false] -= 25
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            eventPlayer.P = []
        elif eventPlayer.selected_hero_list_number == 5:
            eventPlayer.playerSpeed[false] += 20
            eventPlayer.allowButton(Button.PRIMARY_FIRE)
            waitUntil(not eventPlayer.isUsingUltimate() or eventPlayer.isInSpawnRoom(), 99999)
            eventPlayer.playerSpeed[false] -= 20
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
        elif eventPlayer.selected_hero_list_number == 6:
            eventPlayer.playerSpeed[false] += 20
            eventPlayer.allowButton(Button.PRIMARY_FIRE)
            wait(0.05)
            async(Bedivere_ult, AsyncBehavior.RESTART)
            waitUntil(not eventPlayer.isUsingUltimate() or eventPlayer.isInSpawnRoom(), 99999)
            eventPlayer.playerSpeed[false] -= 20
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
        elif eventPlayer.selected_hero_list_number == 7:
            eventPlayer.playerSpeed[false] += 20
            eventPlayer.setDamageDealt(130)
            eventPlayer.allowButton(Button.PRIMARY_FIRE)
            eventPlayer.Is_Using_Ultimate = true
            eventPlayer.Lanling_array = [player for player in getPlayersInRadius(eventPlayer, 9, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF) if not player.isDummy()]
            eventPlayer.Lanling_array.Lanling_master = eventPlayer
            for eventPlayer.X in range(0, len(eventPlayer.Lanling_array), true):
                eventPlayer.Lanling_array[eventPlayer.X].startFacing(eventPlayer.getFacingDirection(), 9999, Relativity.TO_WORLD, FacingReeval.DIRECTION_AND_TURN_RATE)
            async(ultimate_ender, AsyncBehavior.RESTART)
            while eventPlayer.Is_Using_Ultimate:
                heal(getPlayersInRadius(eventPlayer, 6.5, eventPlayer.getTeam(), LosCheck.OFF), eventPlayer, 135)
                playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.YELLOW, eventPlayer + vect(false, 1.2, false), 6.5)
                playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.ROSE, eventPlayer + vect(false, 1.2, false), 6.5)
                wait(0.65)
            eventPlayer.Lanling_array.stopFacing()
            eventPlayer.Lanling_array = null
            smallMessage(eventPlayer, "ultimate over")
            eventPlayer.playerSpeed[false] -= 20
            eventPlayer.setDamageDealt(110)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
        elif eventPlayer.selected_hero_list_number == 8:
            eventPlayer.raycast_hit_position = eventPlayer.getPosition()
            eventPlayer.color = Color.RED
            Area_Casting_Animation()
            eventPlayer.Is_Using_Ultimate = true
            createEffect(getAllPlayers(), Effect.SPHERE, Color.RED, eventPlayer.raycast_hit_position, 23, EffectReeval.NONE)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            createEffect(getAllPlayers(), Effect.GOOD_AURA, Color.RED, eventPlayer, true, EffectReeval.NONE)
            eventPlayer.Effects[2] = getLastCreatedEntity()
            eventPlayer.allowButton(Button.PRIMARY_FIRE)
            async(ultimate_ender, AsyncBehavior.RESTART)
            while eventPlayer.Is_Using_Ultimate:
                waitUntil(distance(eventPlayer, eventPlayer.raycast_hit_position) <= 23 or not eventPlayer.Is_Using_Ultimate, 99999)
                eventPlayer.setDamageDealt(160)
                eventPlayer.playerSpeed[false] += 85
                eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 9999)
                waitUntil(distance(eventPlayer, eventPlayer.raycast_hit_position) > 23 or not eventPlayer.hasStatusEffect(Status.UNKILLABLE) or not eventPlayer.Is_Using_Ultimate, 99999)
                eventPlayer.setDamageDealt(110)
                eventPlayer.playerSpeed[false] -= 85
                eventPlayer.clearStatusEffect(Status.UNKILLABLE)
                if eventPlayer.Is_Using_Ultimate:
                    goto lbl_7
                break
                lbl_7:
            destroyEffect(eventPlayer.Effects[true])
            destroyEffect(eventPlayer.Effects[2])
            eventPlayer.clearStatusEffect(Status.UNKILLABLE)
            wait(0.5)
            eventPlayer.allowButton(Button.PRIMARY_FIRE)
        elif eventPlayer.selected_hero_list_number == 9:
            eventPlayer.Is_Using_Ultimate = true
            eventPlayer.Y = eventPlayer.getPosition()
            createEffect(getAllPlayers(), Effect.SPHERE, Color.BLACK, eventPlayer.Y, eventPlayer.G, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[2] = getLastCreatedEntity()
            chase(eventPlayer.G, 13, duration=0.45, ChaseReeval.DESTINATION_AND_DURATION)
            waitUntil(eventPlayer.isDead() or eventPlayer.isInSpawnRoom() or not eventPlayer.Is_Using_Ultimate or eventPlayer.G == 13, 99999)
            getPlayersInRadius(eventPlayer.Y, eventPlayer.G, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES_AND_ENEMY_BARRIERS).Is_Using_Ultimate = false
            eventPlayer.setAbilityCooldown(Button.ABILITY_2, 0)
            smallMessage(getPlayersInRadius(eventPlayer.Y, eventPlayer.G, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), "{0} Ultimate disabled".format(heroIcon(eventPlayer.getCurrentHero())))
            getPlayersInRadius(eventPlayer.Y, eventPlayer.G, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES_AND_ENEMY_BARRIERS).cancelPrimaryAction()
            stopChasingVariable(eventPlayer.G)
            eventPlayer.G = null
            destroyEffect(eventPlayer.Effects[2])
            eventPlayer.Is_Using_Ultimate = false
            eventPlayer.disallowButton(Button.ULTIMATE)
        elif eventPlayer.selected_hero_list_number == 10 and not eventPlayer.Is_Using_Ultimate:
            eventPlayer.Is_Using_Ultimate = true
            createEffect(getAllPlayers(), Effect.BAD_AURA, Color.BLUE, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[7] = getLastCreatedEntity()
            wait(0.45)
            async(ultimate_ender, AsyncBehavior.RESTART)
            while eventPlayer.Is_Using_Ultimate:
                waitUntil(not eventPlayer.Is_Using_Ultimate or eventPlayer.isHoldingButton(Button.PRIMARY_FIRE), 99999)
                createProjectile(Projectile.REINHARDT_FIRE_STRIKE, eventPlayer, null, null, Relativity.TO_WORLD, ModifyHealth.DAMAGE, getOppositeTeam(eventPlayer.getTeam()), 200, 0.3, 3, DynamicEffect.ECHO_STICKY_BOMB_EXPLOSION, DynamicEffect.EXPLOSION_SOUND, 0, 35, 7, 0, 0, 0)
                wait(1)
            eventPlayer.Is_Using_Ultimate = false
            destroyEffect(eventPlayer.Effects[7])
            wait(0.5)
            eventPlayer.allowButton(Button.PRIMARY_FIRE)
        elif eventPlayer.selected_hero_list_number == 11:
            eventPlayer.setStatusEffect(eventPlayer, Status.ROOTED, 3)
            eventPlayer.setStatusEffect(eventPlayer, Status.BURNING, 3)
            eventPlayer.Is_Using_Ultimate = true
            raycast_hit_position1()
            wait(true)
            eventPlayer.raycast_hit_position += eventPlayer.getFacingDirection() * 150
            eventPlayer.Blood_arthur_1 = eventPlayer.getPosition()
            eventPlayer.Blood_arthur_2 = eventPlayer.getPosition()
            eventPlayer.Blood_arthur_3 = eventPlayer.getPosition()
            eventPlayer.Blood_arthur_4 = eventPlayer.getPosition()
            eventPlayer.Blood_arthur_5 = eventPlayer.getPosition()
            eventPlayer.setStatusEffect(eventPlayer, Status.UNKILLABLE, 2)
            async(mordred_ultimate_damage_loop, AsyncBehavior.RESTART)
            async(ultimate_ender, AsyncBehavior.RESTART)
            createEffect(getAllPlayers(), Effect.SPHERE, Color.RED, updateEveryTick(eventPlayer.Blood_arthur_1), 5, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            createEffect(getAllPlayers(), Effect.SPHERE, Color.RED, updateEveryTick(eventPlayer.Blood_arthur_2), 5, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[2] = getLastCreatedEntity()
            createEffect(getAllPlayers(), Effect.SPHERE, Color.RED, updateEveryTick(eventPlayer.Blood_arthur_3), 5, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[3] = getLastCreatedEntity()
            createEffect(getAllPlayers(), Effect.SPHERE, Color.RED, updateEveryTick(eventPlayer.Blood_arthur_4), 5, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[4] = getLastCreatedEntity()
            createEffect(getAllPlayers(), Effect.SPHERE, Color.RED, updateEveryTick(eventPlayer.Blood_arthur_5), 5, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[5] = getLastCreatedEntity()
            chase(eventPlayer.Blood_arthur_1, eventPlayer.raycast_hit_position, rate=40, ChaseReeval.DESTINATION_AND_RATE)
            wait(0.3)
            chase(eventPlayer.Blood_arthur_2, eventPlayer.raycast_hit_position, rate=40, ChaseReeval.DESTINATION_AND_RATE)
            wait(0.3)
            chase(eventPlayer.Blood_arthur_3, eventPlayer.raycast_hit_position, rate=40, ChaseReeval.DESTINATION_AND_RATE)
            wait(0.3)
            chase(eventPlayer.Blood_arthur_4, eventPlayer.raycast_hit_position, rate=40, ChaseReeval.DESTINATION_AND_RATE)
            wait(0.3)
            chase(eventPlayer.Blood_arthur_5, eventPlayer.raycast_hit_position, rate=40, ChaseReeval.DESTINATION_AND_RATE)
            ultimate_ender()
            eventPlayer.raycast_hit_position = null
            stopChasingVariable(eventPlayer.Blood_arthur_1)
            stopChasingVariable(eventPlayer.Blood_arthur_2)
            stopChasingVariable(eventPlayer.Blood_arthur_3)
            stopChasingVariable(eventPlayer.Blood_arthur_4)
            stopChasingVariable(eventPlayer.Blood_arthur_5)
            eventPlayer.Is_Using_Ultimate = false
            eventPlayer.Blood_arthur_1 = vect(-222, 10000, 44)
            eventPlayer.Blood_arthur_2 = vect(-222, 10000, 44)
            eventPlayer.Blood_arthur_3 = vect(-222, 10000, 44)
            eventPlayer.Blood_arthur_4 = vect(-222, 10000, 44)
            eventPlayer.Blood_arthur_5 = vect(-222, 10000, 44)
            destroyEffect(eventPlayer.Effects[true])
            destroyEffect(eventPlayer.Effects[2])
            destroyEffect(eventPlayer.Effects[3])
            destroyEffect(eventPlayer.Effects[4])
            destroyEffect(eventPlayer.Effects[5])
        elif eventPlayer.selected_hero_list_number == 12:
            eventPlayer.Is_Using_Ultimate = true
            eventPlayer.startFacing(vect(random.randint(-360, 360), random.randint(-360, 360), random.randint(-360, 360)), 10000, Relativity.TO_PLAYER, FacingReeval.DIRECTION_AND_TURN_RATE)
            eventPlayer.startCamera(eventPlayer.getPosition() + vect(3, 14, 2), eventPlayer, 0)
            for eventPlayer.for_loop_2 in range(80):
                createHomingProjectile(Projectile.GENJI_SHURIKEN, eventPlayer, null, null, Relativity.TO_WORLD, ModifyHealth.DAMAGE, getOppositeTeam(eventPlayer.getTeam()), 135, 1, 0, DynamicEffect.BAD_EXPLOSION, DynamicEffect.EXPLOSION_SOUND, 0.08, 3, 25, 0, eventPlayer.getPlayerClosestToReticle(getOppositeTeam(eventPlayer.getTeam())), 0.9)
                if eventPlayer.isDead():
                    return
                wait()
            eventPlayer.stopCamera()
            eventPlayer.stopFacing()
            eventPlayer.Is_Using_Ultimate = false
    elif eventPlayer.getCurrentHero() == Hero.MOIRA:
        if eventPlayer.selected_hero_list_number == 0:
            eventPlayer.setDamageDealt(550)
            eventPlayer.setMoveSpeed(200)
            eventPlayer.setDamageReceived(140)
            waitUntil(not eventPlayer.isUsingUltimate(), 7)
            eventPlayer.setStatusEffect(eventPlayer, Status.HACKED, 0.1)
            eventPlayer.setDamageDealt(60)
            eventPlayer.setDamageReceived(70)
            eventPlayer.setMoveSpeed(130)
        elif eventPlayer.selected_hero_list_number == 1:
            raycast_hit_position2()
            eventPlayer.Z = eventPlayer.getPosition()
            createEffect(getAllPlayers(), Effect.ORB, Color.VIOLET, updateEveryTick(eventPlayer.Z), true, EffectReeval.POSITION_AND_RADIUS)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            chase(eventPlayer.Z, eventPlayer.raycast_hit_position2, rate=4.5, ChaseReeval.DESTINATION_AND_RATE)
            createIcon(getAllPlayers(), updateEveryTick(eventPlayer.Z), Icon.WARNING, IconReeval.VISIBILITY_AND_POSITION, Color.WHITE, false)
            eventPlayer.Effects[2] = getLastCreatedEntity()
            createEffect(getAllPlayers(), Effect.SPHERE, Color.BLACK, eventPlayer.Z, 13, EffectReeval.POSITION_AND_RADIUS)
            eventPlayer.Effects[3] = getLastCreatedEntity()
            eventPlayer.Is_Using_Ultimate = true
            async(vlad_effect_beam_loop, AsyncBehavior.RESTART)
            async(ultimate_ender, AsyncBehavior.RESTART)
            while eventPlayer.Is_Using_Ultimate:
                eventPlayer.Medusa_trap = [player for player in getPlayersInRadius(eventPlayer.Z, 13, Team.ALL, LosCheck.SURFACES) if player.isAlive()]
                eventPlayer.Medusa_trap.Vlad_effect_master = eventPlayer
                damage(eventPlayer.Medusa_trap, eventPlayer, 13)
                heal(eventPlayer, eventPlayer, len(eventPlayer.Medusa_trap) * 15)
                wait(0.1)
            stopChasingVariable(eventPlayer.Z)
            destroyEffect(eventPlayer.Effects[true])
            destroyEffect(eventPlayer.Effects[3])
            destroyIcon(eventPlayer.Effects[2])
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.saber_wind_gust = eventPlayer
            createEffect(getAllPlayers(), Effect.SPHERE, Color.PURPLE, eventPlayer.saber_wind_gust, 6, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[3] = getLastCreatedEntity()
            eventPlayer.color = Color.WHITE
            eventPlayer.Is_Using_Ultimate = true
            waitUntil(eventPlayer.isDead() or not eventPlayer.Is_Using_Ultimate or eventPlayer.isHoldingButton(Button.PRIMARY_FIRE), 10)
            createIcon(getAllPlayers(), updateEveryTick(eventPlayer.saber_wind_gust), Icon.ARROW_DOWN, IconReeval.VISIBILITY_POSITION_AND_COLOR, eventPlayer.color, true)
            eventPlayer.Effects[5] = getLastCreatedEntity()
            raycast_hit_position1()
            eventPlayer.saber_wind_gust = eventPlayer.getPosition()
            chase(eventPlayer.saber_wind_gust, eventPlayer.raycast_hit_position, rate=9, ChaseReeval.DESTINATION_AND_RATE)
            createBeam(getAllPlayers(), Beam.BAD, eventPlayer.getEyePosition(), eventPlayer.raycast_hit_position, Color.PURPLE, EffectReeval.NONE)
            eventPlayer.Effects[4] = getLastCreatedEntity()
            wait(1.25)
            eventPlayer.color = Color.RED
            async(ultimate_ender, AsyncBehavior.RESTART)
            while eventPlayer.isAlive() and eventPlayer.Is_Using_Ultimate:
                eventPlayer.has_soul.append(getPlayersInRadius(eventPlayer.saber_wind_gust, 6, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF))
                eventPlayer.R = [player for player in eventPlayer.has_soul if distance(player, eventPlayer.saber_wind_gust) > 6]
                eventPlayer.has_soul.remove(eventPlayer.R)
                Falling_floor_array.append(eventPlayer.has_soul)
                wait(0.1)
            eventPlayer.has_soul.enableEnvironmentCollision()
            destroyEffect(eventPlayer.Effects[3])
            destroyEffect(eventPlayer.Effects[4])
            destroyIcon(eventPlayer.Effects[5])
            stopChasingVariable(eventPlayer.saber_wind_gust)
        elif eventPlayer.selected_hero_list_number == 3:
            eventPlayer.H = 1500
            createEffect(getAllPlayers(), Effect.RING, Color.LIME_GREEN, eventPlayer, eventPlayer.A, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            createEffect(getAllPlayers(), Effect.RING, Color.YELLOW, eventPlayer, eventPlayer.A, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[2] = getLastCreatedEntity()
            chase(eventPlayer.A, 100, rate=25, ChaseReeval.DESTINATION_AND_RATE)
            chase(eventPlayer.H, false, rate=25, ChaseReeval.DESTINATION_AND_RATE)
            eventPlayer.startCamera(eventPlayer + vect(false, 35, false), eventPlayer, 50)
            eventPlayer.Is_Using_Ultimate = true
            async(ultimate_ender, AsyncBehavior.RESTART)
            wait(0.3)
            waitUntil(eventPlayer.isHoldingButton(Button.ULTIMATE) or not eventPlayer.Is_Using_Ultimate, 99999)
            stopChasingVariable(eventPlayer.H)
            stopChasingVariable(eventPlayer.A)
            eventPlayer.mordred_extra_armor = [player for player in getPlayersInRadius(eventPlayer, eventPlayer.A, Team.ALL, LosCheck.OFF) if player.isDead()].exclude(eventPlayer)
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.YELLOW, eventPlayer + vect(false, 2, false), eventPlayer.A)
            eventPlayer.trump_wait_middle = getPlayersInRadius(eventPlayer, eventPlayer.A, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)
            for eventPlayer.for_loop_2 in range(len(eventPlayer.trump_wait_middle)):
                eventPlayer.trump_wait_middle[eventPlayer.for_loop_2].startDoT(null, 4, eventPlayer.trump_wait_middle[eventPlayer.for_loop_2].getMaxHealth() / 4.5)
                wait(0.1)
            eventPlayer.mordred_extra_armor.resurrect()
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.LIME_GREEN, eventPlayer + vect(false, 2, false), eventPlayer.A)
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION_SOUND, Color.YELLOW, eventPlayer + vect(false, 2, false), 150)
            heal(([player for player in eventPlayer.mordred_extra_armor if player.getTeam() == eventPlayer.getTeam()]).concat(eventPlayer), eventPlayer, eventPlayer.H)
            smallMessage(eventPlayer.mordred_extra_armor, "Asclepius has cured you of Death")
            getPlayersInRadius(eventPlayer, eventPlayer.A, Team.ALL, LosCheck.OFF).is_healing_cursed = false
            getPlayersInRadius(eventPlayer, eventPlayer.A, Team.ALL, LosCheck.OFF).setHealingReceived(100)
            eventPlayer.A = 1
            destroyEffect(eventPlayer.Effects[true])
            destroyEffect(eventPlayer.Effects[2])
            eventPlayer.stopCamera()
            eventPlayer.Is_Using_Ultimate = false
        elif eventPlayer.selected_hero_list_number == 4:
            raycast_hit_position2()
            #area of guy inside
            eventPlayer.C = []
            eventPlayer.Z = null
            createEffect(getAllPlayers(), Effect.SPHERE, Color.TURQUOISE, eventPlayer.raycast_hit_position2, updateEveryTick(eventPlayer.Z), EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[5] = getLastCreatedEntity()
            chase(eventPlayer.Z, 13.5, duration=2.5, ChaseReeval.DESTINATION_AND_DURATION)
            wait(1.5)
            createProjectileEffect(getAllPlayers(), Projectile.ZARYA_GRAVITON, getAllPlayers(), eventPlayer.raycast_hit_position2, null, 0.35, ProjectileEffectReeval.VISIBILITY_POSITION_DIRECTION_AND_SIZE)
            eventPlayer.Effects[false] = getLastCreatedEntity()
            eventPlayer.Is_Using_Ultimate = true
            async(ultimate_ender, AsyncBehavior.RESTART)
            while eventPlayer.Is_Using_Ultimate:
                eventPlayer.C.append(getPlayersInRadius(eventPlayer.raycast_hit_position2, eventPlayer.Z, Team.ALL, LosCheck.OFF))
                eventPlayer.C.setGravity(false)
                for eventPlayer.for_loop in range(len(eventPlayer.C)):
                    eventPlayer.C[eventPlayer.for_loop].applyImpulse(directionTowards(eventPlayer.C[eventPlayer.for_loop], eventPlayer.raycast_hit_position2), 1, Relativity.TO_WORLD, Impulse.INCORPORATE_CONTRARY_MOTION)
                damage(getPlayersInRadius(eventPlayer.raycast_hit_position2, 2, Team.ALL, LosCheck.OFF), eventPlayer, 900)
                damage(eventPlayer.C, eventPlayer, 3)
                for eventPlayer.for_loop in range(len(eventPlayer.C)):
                    if distance(eventPlayer.C[eventPlayer.for_loop], eventPlayer.raycast_hit_position2) > eventPlayer.Z:
                        eventPlayer.C[eventPlayer.for_loop].setGravity(100)
                        eventPlayer.C.remove(eventPlayer.C[eventPlayer.for_loop])
                wait(0.1)
            eventPlayer.C.setGravity(100)
            stopChasingVariable(eventPlayer.Z)
            destroyEffect(eventPlayer.Effects[0])
            destroyEffect(eventPlayer.Effects[5])
        elif eventPlayer.selected_hero_list_number == 5:
            eventPlayer.A = 0
            eventPlayer.O = []
            eventPlayer.Q = []
            eventPlayer.Is_Using_Ultimate = true
            chase(eventPlayer.A, 1000, rate=15, ChaseReeval.DESTINATION_AND_RATE)
            eventPlayer.L = eventPlayer.getPosition()
            createEffect(getAllPlayers(), Effect.SPHERE, Color.SKY_BLUE, eventPlayer.L, updateEveryTick(eventPlayer.A), EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            createIcon(getAllPlayers(), eventPlayer.L + vect(false, 2, false), Icon.QUESTION_MARK, IconReeval.VISIBILITY_AND_POSITION, Color.RED, true)
            eventPlayer.Effects[2] = getLastCreatedEntity()
            async(ultimate_ender, AsyncBehavior.RESTART)
            while eventPlayer.Is_Using_Ultimate:
                eventPlayer.Q.append(getPlayersInRadius(eventPlayer.L, eventPlayer.A, Team.ALL, LosCheck.OFF).exclude(eventPlayer))
                damage(eventPlayer.Q.exclude(eventPlayer.O), eventPlayer, 320)
                eventPlayer.O = eventPlayer.Q
                eventPlayer.Q.remove([player for player in eventPlayer.Q if distance(player, eventPlayer.L) > eventPlayer.A])
                wait(0.1)
            stopChasingVariable(eventPlayer.A)
            destroyEffect(eventPlayer.Effects[true])
            destroyIcon(eventPlayer.Effects[2])
    elif eventPlayer.getCurrentHero() == Hero.DOOMFIST:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.setAbilityCooldown(Button.SECONDARY_FIRE, false)
            createEffect(getAllPlayers(), Effect.BAD_AURA, Color.PURPLE, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[4] = getLastCreatedEntity()
            eventPlayer.Hassan_Hand_ULT = true
            eventPlayer.Is_Using_Ultimate = true
            ultimate_ender()
            destroyIcon(eventPlayer.Effects[3])
            destroyEffect(eventPlayer.Effects[4])
            eventPlayer.Is_Using_Ultimate = false
            eventPlayer.Hassan_Hand_ULT = false
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.allowButton(Button.PRIMARY_FIRE)
            eventPlayer.F = eventPlayer.getPosition()
            eventPlayer.Is_Using_Ultimate = true
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.RED, eventPlayer.F + vect(false, 4, false), 23)
            playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.RED, eventPlayer.F + vect(false, 4, false), 150)
            createEffect(getAllPlayers(), Effect.RING, Color.RED, eventPlayer.F, 23, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            waitUntil(isAssemblingHeroes(), 4)
            destroyEffect(eventPlayer.Effects[true])
            eventPlayer.forceButtonPress(Button.PRIMARY_FIRE)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            eventPlayer.Is_Using_Ultimate = false
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.setAbilityCooldown(Button.SECONDARY_FIRE, 0)
            eventPlayer.setDamageDealt(140)
            eventPlayer.Is_Using_Ultimate = true
            createEffect(getAllPlayers(), Effect.ANA_NANO_BOOSTED, Color.TEAM_2, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            ultimate_ender()
            destroyEffect(eventPlayer.Effects[true])
            eventPlayer.Is_Using_Ultimate = false
        elif eventPlayer.selected_hero_list_number == 3:
            eventPlayer.P = random.choice([player for player in getLivingPlayers(Team.ALL) if not player.isDummy() and not player.isInSpawnRoom()])
            if eventPlayer.isInSpawnRoom():
                goto lbl_8
            eventPlayer.P.clearStatusEffect(Status.UNKILLABLE)
            eventPlayer.P.clearStatusEffect(Status.PHASED_OUT)
            eventPlayer.P.clearStatusEffect(Status.INVINCIBLE)
            kill(eventPlayer.P, eventPlayer.P)
            lbl_8:
            smallMessage(getAllPlayers(), "{0} Randomly killed {1}".format(heroIcon(Hero.DOOMFIST), eventPlayer.P))
    eventPlayer.setUltCharge(0)


rule "ULTIMATE SETUP #3: Echo, Roadhog, Mei, Sigma, Bastion, Briggite, Reaper, Rein, Mauga, Rammatra, Winston, Widowmaker":
    @Event eachPlayer
    @Condition (eventPlayer.isHoldingButton(Button.ULTIMATE) and eventPlayer.getUltCharge() == 100 or eventPlayer.isUsingUltimate()) == true
    @Condition eventPlayer.isAlive() == true
    @Condition eventPlayer.isInSpawnRoom() == false
    @Condition eventPlayer.getCurrentHero() in Global_ULTButton_3 == true
    
    if eventPlayer.getCurrentHero() == Hero.ECHO:
        if eventPlayer.selected_hero_list_number == 0:
            eventPlayer.P = eventPlayer.getPosition()
            eventPlayer.Is_Using_Ultimate = true
            chase(eventPlayer.C, 18, rate=10, ChaseReeval.DESTINATION_AND_RATE)
            createEffect(getAllPlayers(), Effect.SPHERE, Color.YELLOW, eventPlayer.P, updateEveryTick(eventPlayer.C), EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Gate_of_Babylon_index[true] = getLastCreatedEntity()
            createEffect(getAllPlayers(), Effect.RING, Color.YELLOW, eventPlayer.P, eventPlayer.C, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Gate_of_Babylon_index[2] = getLastCreatedEntity()
            waitUntil(not eventPlayer.Is_Using_Ultimate or eventPlayer.C == 18, 99999)
            playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.WHITE, eventPlayer.P, 130)
            eventPlayer.trump_wait_middle = getPlayersInRadius(eventPlayer.P, eventPlayer.C, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)
            damage(getPlayersInRadius(eventPlayer.P, eventPlayer.C, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, 125)
            eventPlayer.trump_wait_middle.is_healing_cursed = true
            for eventPlayer.for_loop_2 in range(0, len(eventPlayer.trump_wait_middle), true):
                if eventPlayer.trump_wait_middle[eventPlayer.for_loop_2].is_player_anchored <= 0:
                    eventPlayer.trump_wait_middle[eventPlayer.for_loop_2].is_player_anchored = 235
                else:
                    eventPlayer.trump_wait_middle[eventPlayer.for_loop_2].is_player_anchored += 110
            wait(0.3)
            destroyEffect(eventPlayer.Gate_of_Babylon_index[true])
            destroyEffect(eventPlayer.Gate_of_Babylon_index[2])
            stopChasingVariable(eventPlayer.C)
            eventPlayer.C = 1
            eventPlayer.Is_Using_Ultimate = false
            wait(6)
            eventPlayer.trump_wait_middle.is_healing_cursed = false
        elif eventPlayer.selected_hero_list_number == 1:
            smallMessage(getAllPlayers(), "{0} ALL UNDER THE SKY PERISHES".format(heroIcon(Hero.ECHO)))
            bigMessage(getAllPlayers(), "{0} ALL UNDER THE SKY PERISHES".format(heroIcon(Hero.ECHO)))
            wait(3.26)
            eventPlayer.W = getAllPlayers().exclude(eventPlayer)
            for eventPlayer.F in range(len(eventPlayer.W)):
                eventPlayer.Q = eventPlayer.W[eventPlayer.F]
                eventPlayer.J = eventPlayer.Q.getEyePosition() + Vector.UP * 1000
                createBeam(getAllPlayers(), Beam.GOOD, eventPlayer.Q.getEyePosition(), eventPlayer.J, Color.YELLOW, EffectReeval.NONE)
                eventPlayer.E.append(getLastCreatedEntity())
                damage(eventPlayer.Q, eventPlayer, 1000 if isInLoS(eventPlayer.Q, eventPlayer.J, BarrierLos.PASS_THROUGH_BARRIERS) else 100)
            wait(1)
            destroyEffect([player for player in eventPlayer.E if entityExists(player)])
            eventPlayer.E = []
    elif eventPlayer.getCurrentHero() == Hero.MERCY:
        createEffect(getAllPlayers(), Effect.GOOD_AURA, Color.YELLOW, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[7] = getLastCreatedEntity()
        getPlayersInRadius(eventPlayer, 8, eventPlayer.getTeam(), LosCheck.OFF).setStatusEffect(null, Status.UNKILLABLE, 6)
        eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 15)
        eventPlayer.Is_Using_Ultimate = true
        eventPlayer.D = 1
        eventPlayer.disallowButton(Button.MELEE)
        wait(1.5)
        waitUntil(not eventPlayer.Is_Using_Ultimate or eventPlayer.isHoldingButton(Button.ULTIMATE), 15)
        eventPlayer.allowButton(Button.MELEE)
        eventPlayer.Is_Using_Ultimate = false
        heal(getPlayersInRadius(eventPlayer, 12, eventPlayer.getTeam(), LosCheck.OFF), eventPlayer, eventPlayer.D * 1.65)
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.YELLOW, eventPlayer + vect(false, 2, false), 12)
        damage(getPlayersInRadius(eventPlayer, 12, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES_AND_ENEMY_BARRIERS), eventPlayer, eventPlayer.D * 4)
        playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION_SOUND, Color.YELLOW, eventPlayer, 100)
        destroyEffect(eventPlayer.Effects[7])
        eventPlayer.clearStatusEffect(Status.UNKILLABLE)
    elif eventPlayer.getCurrentHero() == Hero.ROADHOG:
        if eventPlayer.selected_hero_list_number:
            eventPlayer.G = getPlayersInRadius(eventPlayer, 8, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)
            eventPlayer.G.setHealingReceived(0)
            eventPlayer.G.is_healing_cursed = true
            eventPlayer.G.setGravity(false)
            eventPlayer.G.applyImpulse(Vector.UP, 18, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
            eventPlayer.G.moctezuma_lifted[false] = 2
            waitUntil(eventPlayer.isInSpawnRoom() or eventPlayer.isDead(), 2)
            eventPlayer.G.setGravity(100)
            eventPlayer.G = []
        else:
            eventPlayer.setDamageDealt(80)
            waitUntil(not eventPlayer.isUsingUltimate(), 99999)
            eventPlayer.setDamageDealt(230)
    elif eventPlayer.getCurrentHero() == Hero.MEI:
        if eventPlayer.selected_hero_list_number == 0:
            eventPlayer.Is_Using_Ultimate = true
            eventPlayer.P = eventPlayer.getPosition() + vect(false, 1, false)
            playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.SKY_BLUE, eventPlayer.P, 100)
            createEffect(getAllPlayers(), Effect.SPHERE, Color.SKY_BLUE, eventPlayer.P, eventPlayer.chase_Variable_time, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            createEffect(getAllPlayers(), Effect.RING, Color.RED, eventPlayer.P, 15, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[3] = getLastCreatedEntity()
            createIcon(getAllPlayers(), eventPlayer.P, Icon.WARNING, IconReeval.VISIBILITY_AND_POSITION, Color.RED, false)
            eventPlayer.Effects[2] = getLastCreatedEntity()
            eventPlayer.chase_Variable_time = 1
            eventPlayer.chase_variable_destination = 15
            eventPlayer.chase_variable_duration = 2.15
            chase_player_var_time()
            waitUntil(eventPlayer.isInSpawnRoom() or not entityExists(eventPlayer) or eventPlayer.isDead() or eventPlayer.chase_Variable_time == 15 or not eventPlayer.Is_Using_Ultimate, 99999)
            if eventPlayer.isDead() or not entityExists(eventPlayer) or eventPlayer.isInSpawnRoom() or not eventPlayer.Is_Using_Ultimate:
                goto lbl_0
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION_SOUND, Color.SKY_BLUE, eventPlayer.P, 300)
            eventPlayer.filtered_array = getPlayersInRadius(eventPlayer.P, 15, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES)
            eventPlayer.filtered_array.setStatusEffect(null, Status.FROZEN, 7)
            lbl_0:
            stopChasingVariable(eventPlayer.chase_Variable_time)
            eventPlayer.Is_Using_Ultimate = false
            destroyIcon(eventPlayer.Effects[2])
            destroyEffect(eventPlayer.Effects[true])
            destroyEffect(eventPlayer.Effects[3])
            stopChasingVariable(eventPlayer.chase_Variable_time)
        elif eventPlayer.selected_hero_list_number == 1:
            destroyEffect(eventPlayer.Effects[1])
            eventPlayer.selected_hero_list_number = 13
            eventPlayer.startForcingHero(Hero.REINHARDT)
            eventPlayer.Selected_Hero[13] = "Mahito"
            Enable_Buttons_sub()
            eventPlayer.setDamageDealt(240)
            eventPlayer.playerSpeed[false] = 160
            wait(2)
            H.append(eventPlayer)
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.P = eventPlayer.getPosition()
            eventPlayer.setInvisibility(Invis.ENEMIES)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            eventPlayer.allowButton(Button.PRIMARY_FIRE)
            create_dummy_of_EventPlayer()
            eventPlayer.Solomon_pillar_array = eventPlayer.Solomon_pillar_array.last()
            eventPlayer.Is_Using_Ultimate = true
            createEffect(getAllPlayers(), Effect.SPHERE, Color.BLUE, eventPlayer.getPosition() + vect(0, 1, 0), 1, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[1] = getLastCreatedEntity()
            createInWorldText(getAllPlayers(), "{0}".format(heroIcon(Hero.MEI)), eventPlayer.getPosition() + vect(0, 1, 0), 4, Clip.SURFACES, WorldTextReeval.VISIBILITY_POSITION_AND_STRING, Color.WHITE, SpecVisibility.DEFAULT)
            eventPlayer.Effects[3] = getLastCreatedText()
            createEffect(getAllPlayers(), Effect.BAD_AURA, Color.BLUE, eventPlayer.getPosition() + vect(0, 1, 0), 1.25, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[2] = getLastCreatedEntity()
            eventPlayer.setGravity(0)
            eventPlayer.setDamageReceived(105)
            wait(0.25)
            waitUntil(not eventPlayer.Is_Using_Ultimate or eventPlayer.isHoldingButton(Button.ULTIMATE) or eventPlayer.isDead() or eventPlayer.Solomon_pillar_array.isDead() or not entityExists(eventPlayer.Solomon_pillar_array), 99999)
            if eventPlayer.Solomon_pillar_array.isAlive():
                goto lbl_1
            kill(eventPlayer, eventPlayer)
            lbl_1:
            if eventPlayer.Solomon_pillar_array.isDead():
                goto lbl_2
            eventPlayer.teleport(eventPlayer.P)
            eventPlayer.resurrect()
            lbl_2:
            eventPlayer.allowButton(Button.SECONDARY_FIRE)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            eventPlayer.setGravity(100)
            kill(eventPlayer.Solomon_pillar_array, null)
            destroyEffect(eventPlayer.Effects[1])
            destroyEffect(eventPlayer.Effects[2])
            destroyInWorldText(eventPlayer.Effects[3])
            eventPlayer.Is_Using_Ultimate = false
            eventPlayer.setInvisibility(Invis.NONE)
            eventPlayer.setDamageReceived(70)
    elif eventPlayer.getCurrentHero() == Hero.SIGMA:
        if eventPlayer.selected_hero_list_number == 0:
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.SKY_BLUE, eventPlayer, 9)
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION_SOUND, Color.SKY_BLUE, eventPlayer, 100)
            eventPlayer.L = []
            eventPlayer.L.append(getPlayersInRadius(eventPlayer, 16, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF).exclude(eventPlayer))
            eventPlayer.L.setGravity(false)
            wait(0.35)
            eventPlayer.L.clearStatusEffect(Status.UNKILLABLE)
            eventPlayer.L.applyImpulse(eventPlayer.getFacingDirection(), 6000, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
            damage(eventPlayer.L, eventPlayer, 55)
            waitUntil(eventPlayer.isDead() or eventPlayer.isInSpawnRoom(), 4)
            eventPlayer.L.setGravity(100)
    elif eventPlayer.getCurrentHero() == Hero.BASTION:
        if eventPlayer.selected_hero_list_number == 0:
            eventPlayer.Is_Using_Ultimate = true
            while eventPlayer.Is_Using_Ultimate and not eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) and eventPlayer.getUltCharge() > 0:
                playEffect(getAllPlayers().exclude(eventPlayer), DynamicEffect.GOOD_PICKUP_EFFECT, Color.WHITE, eventPlayer, 1)
                eventPlayer.setUltCharge(eventPlayer.getUltCharge() - 3.5)
                eventPlayer.D += 20
                eventPlayer.setStatusEffect(null, Status.ROOTED, 0.3)
                wait(0.25)
                if eventPlayer.isHoldingButton(Button.PRIMARY_FIRE):
                    goto lbl_3
            waitUntil(eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) or not eventPlayer.Is_Using_Ultimate, 99999)
            lbl_3:
            eventPlayer.Z = eventPlayer.getEyePosition()
            eventPlayer.Is_Using_Ultimate = false
            raycast_hit_position1()
            createBeam(getAllPlayers(), Beam.GOOD, evalOnce(eventPlayer), eventPlayer.raycast_hit_position, Color.WHITE, EffectReeval.NONE)
            eventPlayer.Effects[3] = getLastCreatedEntity()
            createEffect(getAllPlayers(), Effect.SPHERE, Color.BLUE, updateEveryTick(eventPlayer.Z), 4, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[2] = getLastCreatedEntity()
            chase(eventPlayer.Z, eventPlayer.raycast_hit_position, rate=40, ChaseReeval.DESTINATION_AND_RATE)
            waitUntil(eventPlayer.isDead() or eventPlayer.isInSpawnRoom() or eventPlayer.Z == eventPlayer.raycast_hit_position or len([player for player in getPlayersInRadius(eventPlayer.Z, 4, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES) if player.getCurrentHero() in getAllHeroes()]) > 0, 99999)
            damage(getPlayersInRadius(eventPlayer.Z, 5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES), eventPlayer, eventPlayer.D)
            playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.WHITE, eventPlayer.raycast_hit_position, 6)
            playEffect(getAllPlayers(), DynamicEffect.EXPLOSION_SOUND, Color.WHITE, eventPlayer.raycast_hit_position, 110)
            wait(0.1)
            stopChasingVariable(eventPlayer.Z)
            destroyEffect(eventPlayer.Effects[2])
            destroyEffect(eventPlayer.Effects[3])
            eventPlayer.D = 100
        elif eventPlayer.selected_hero_list_number == 1:
            smallMessage(getAllPlayers(), "{0} It's morbin' Time".format(heroIcon(eventPlayer.getCurrentHero())))
            eventPlayer.setProjectileSpeed(500)
            eventPlayer.Is_Using_Ultimate = true
            async(ultimate_ender, AsyncBehavior.RESTART)
            eventPlayer.allowButton(Button.SECONDARY_FIRE)
            while eventPlayer.Is_Using_Ultimate:
                eventPlayer.setAbilityCooldown(Button.SECONDARY_FIRE, 0)
                eventPlayer.forceButtonPress(Button.SECONDARY_FIRE)
                wait()
            eventPlayer.Is_Using_Ultimate = false
            eventPlayer.setProjectileSpeed(100)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.Is_Using_Ultimate = true
            eventPlayer.is_damage_reversing = true
            eventPlayer.addHealthPool(Health.ARMOR, 300, false, true)
            eventPlayer.Effects[1] = getLastCreatedHealthPool()
            ultimate_ender()
            eventPlayer.is_damage_reversing = false
            eventPlayer.Is_Using_Ultimate = false
            removeHealthPool(eventPlayer.Effects[1])
    elif eventPlayer.getCurrentHero() == Hero.BRIGITTE:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.applyImpulse(Vector.UP, 1000, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
            eventPlayer.setGravity(false)
            wait(0.5)
            eventPlayer.Y = eventPlayer.getPosition().y
            eventPlayer.N = true
            async(float_player_above_level, AsyncBehavior.RESTART)
            eventPlayer.Is_Using_Ultimate = true
            createBeam(getAllPlayers(), Beam.GOOD, updateEveryTick(eventPlayer.getPosition()), updateEveryTick(raycast(eventPlayer.getEyePosition(), eventPlayer.getEyePosition() + eventPlayer.getFacingDirection() * 500, getAllPlayers(), eventPlayer, true).getHitPosition()), Color.RED, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[6] = getLastCreatedEntity()
            createEffect(getAllPlayers(), Effect.BAD_AURA, Color.AQUA, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[7] = getLastCreatedEntity()
            waitUntil(eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) or eventPlayer.isInSpawnRoom() or not eventPlayer.Is_Using_Ultimate, 10)
            eventPlayer.N = null
            eventPlayer.setGravity(100)
            eventPlayer.Q = eventPlayer.getPosition()
            eventPlayer.startForcingPosition(eventPlayer.Q, true)
            eventPlayer.K = raycast(eventPlayer.getEyePosition(), eventPlayer.getEyePosition() + eventPlayer.getFacingDirection() * 150, getAllPlayers(), eventPlayer, true).getHitPosition()
            chase(eventPlayer.Q, eventPlayer.K, rate=120, ChaseReeval.DESTINATION_AND_RATE)
            waitUntil(not distance(eventPlayer.Q, eventPlayer.K), 5)
            eventPlayer.stopForcingPosition()
            damage(getPlayersInRadius(eventPlayer, 8, Team.ALL, LosCheck.OFF).exclude(eventPlayer), eventPlayer, 300)
            playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.SKY_BLUE, eventPlayer, 6)
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION_SOUND, Color.WHITE, eventPlayer, 139)
            eventPlayer.Is_Using_Ultimate = false
            destroyEffect(eventPlayer.Effects[6])
            destroyEffect(eventPlayer.Effects[7])
            wait(0.25)
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.Is_Using_Ultimate = true
            eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 2)
            eventPlayer.disallowButton(Button.SECONDARY_FIRE)
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.SKY_BLUE, eventPlayer + vect(0, 1, 0), 9)
            eventPlayer.startForcingButton(Button.PRIMARY_FIRE)
            getPlayersInRadius(eventPlayer, 8.15, eventPlayer.getTeam(), LosCheck.OFF).exclude(eventPlayer).setStatusEffect(eventPlayer, Status.UNKILLABLE, 5)
            eventPlayer.allowButton(Button.ABILITY_1)
            async(ultimate_ender, AsyncBehavior.RESTART)
            while eventPlayer.Is_Using_Ultimate:
                if eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) or eventPlayer.isUsingAbility1():
                    eventPlayer.forceButtonPress(Button.ABILITY_1)
                wait(0.3)
                eventPlayer.setAbilityCooldown(Button.ABILITY_1, 0)
            eventPlayer.disallowButton(Button.ABILITY_1)
            eventPlayer.allowButton(Button.SECONDARY_FIRE)
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 2)
            createEffect(getAllPlayers(), Effect.BAD_AURA, Color.ORANGE, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            eventPlayer.Is_Using_Ultimate = true
            async(ultimate_ender, AsyncBehavior.RESTART)
            eventPlayer.S = 0
            waitUntil(not eventPlayer.Is_Using_Ultimate or eventPlayer.S == 2, 99999)
            eventPlayer.Is_Using_Ultimate = false
            destroyEffect(eventPlayer.Effects[true])
        elif eventPlayer.selected_hero_list_number == 3:
            eventPlayer.setMoveSpeed(125)
            eventPlayer.setGravity(80)
            eventPlayer.Is_Using_Ultimate = true
            eventPlayer.setDamageReceived(5)
            eventPlayer.setDamageDealt(335)
            eventPlayer.startScalingSize(3, true)
            waitUntil(not eventPlayer.Is_Using_Ultimate, 10)
            eventPlayer.stopScalingSize()
            eventPlayer.setDamageDealt(100)
            eventPlayer.setDamageReceived(70)
            eventPlayer.Is_Using_Ultimate = false
            eventPlayer.setGravity(100)
            eventPlayer.setMoveSpeed(135)
        elif eventPlayer.selected_hero_list_number == 4:
            eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 4)
            eventPlayer.startHoT(null, 4, 10000)
            eventPlayer.K += 1
            level_up_call_subroutine()
            eventPlayer.Is_Using_Ultimate = true
            ultimate_ender()
            eventPlayer.K -= 1
            level_up_call_subroutine()
    elif eventPlayer.getCurrentHero() == Hero.REAPER:
        if eventPlayer.selected_hero_list_number == 0:
            eventPlayer.setMoveSpeed(650)
            eventPlayer.Solomon_pillar_array.setUltCharge(100)
            eventPlayer.Solomon_pillar_array.forceButtonPress(Button.ULTIMATE)
            waitUntil(not eventPlayer.isUsingUltimate() or isAssemblingHeroes(), 99999)
            eventPlayer.setMoveSpeed(125)
        elif eventPlayer.selected_hero_list_number == 1:
            FoV_and_LoS_player_select()
            if not eventPlayer.FoV_and_lineOFsight_player:
                goto lbl_4
            eventPlayer.A = eventPlayer.FoV_and_lineOFsight_player.getNormalizedHealth()
            eventPlayer.B = eventPlayer.getNormalizedHealth()
            eventPlayer.setHealth(eventPlayer.A * eventPlayer.getMaxHealth())
            eventPlayer.FoV_and_lineOFsight_player.setHealth(eventPlayer.B * eventPlayer.FoV_and_lineOFsight_player.getMaxHealth())
            smallMessage(getAllPlayers(), "{0} switched Health - {1}".format(heroIcon(Hero.REAPER), eventPlayer.FoV_and_lineOFsight_player))
        lbl_4:
    elif eventPlayer.getCurrentHero() == Hero.REINHARDT:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.Berserker_lives += 1 if eventPlayer.Berserker_lives < 12 else 0
            eventPlayer.setHealth(eventPlayer.getHealth() + 1200)
        elif eventPlayer.selected_hero_list_number == 1:
            eventPlayer.startForcingThrottle(true, false, false, false, false, false)
            eventPlayer.disallowButton(Button.PRIMARY_FIRE)
            eventPlayer.setGravity(5)
            eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 6)
            createEffect(getAllPlayers(), Effect.BAD_AURA, Color.RED, eventPlayer, true, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            eventPlayer.setMoveSpeed(200)
            eventPlayer.Is_Using_Ultimate = true
            async(ultimate_ender, AsyncBehavior.RESTART)
            while eventPlayer.Is_Using_Ultimate and eventPlayer.isAlive() and (not (eventPlayer.hasStatusEffect(Status.ASLEEP) or eventPlayer.hasStatusEffect(Status.FROZEN) or eventPlayer.hasStatusEffect(Status.KNOCKED_DOWN) or eventPlayer.hasStatusEffect(Status.ROOTED) or eventPlayer.hasStatusEffect(Status.STUNNED) or eventPlayer.hasStatusEffect(Status.HACKED))):
                damage(getPlayersInRadius(eventPlayer, 4, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF).exclude(eventPlayer), eventPlayer, 60)
                ([player for player in getPlayersInRadius(eventPlayer, 4, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES) if not player.hasStatusEffect(Status.KNOCKED_DOWN)]).setStatusEffect(eventPlayer, Status.KNOCKED_DOWN, 3)
                getPlayersInRadius(eventPlayer, 4, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF).exclude(eventPlayer).applyImpulse(eventPlayer.getFacingDirection(), 105, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
                wait(0.1)
            eventPlayer.setMoveSpeed(125)
            destroyEffect(getLastCreatedEntity())
            eventPlayer.setGravity(100)
            eventPlayer.allowButton(Button.PRIMARY_FIRE)
            destroyEffect(eventPlayer.Effects[true])
            eventPlayer.stopForcingThrottle()
        elif eventPlayer.selected_hero_list_number == 2:
            playEffect(getAllPlayers(), DynamicEffect.EXPLOSION_SOUND, Color.YELLOW, eventPlayer, 150)
            wait(0.7)
            getPlayersInRadius(eventPlayer, 6.5, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES).setStatusEffect(null, Status.ROOTED, 2.5)
            eventPlayer.setStatusEffect(null, Status.ROOTED, 10)
            eventPlayer.raycast_hit_position = eventPlayer
            eventPlayer.color = Color.ORANGE
            Area_Casting_Animation()
            if eventPlayer.isDead():
                return
            getPlayersInRadius(eventPlayer, 16, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF).clearStatusEffect(Status.UNKILLABLE)
            damage(getPlayersInRadius(eventPlayer, 16, Team.ALL, LosCheck.SURFACES), eventPlayer, 5000)
            playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.YELLOW, eventPlayer, 35)
            playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.RED, eventPlayer, 35)
            kill(eventPlayer, eventPlayer)
        elif eventPlayer.selected_hero_list_number == 3:
            eventPlayer.Is_Using_Ultimate = true
            createEffect(getAllPlayers().exclude(eventPlayer), Effect.SPHERE, Color.SKY_BLUE, eventPlayer, eventPlayer.A, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[true] = getLastCreatedEntity()
            createEffect(getAllPlayers(), Effect.RING, Color.SKY_BLUE, eventPlayer, eventPlayer.A, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[2] = getLastCreatedEntity()
            chase(eventPlayer.A, 16, duration=2.5, ChaseReeval.DESTINATION_AND_DURATION)
            wait(true)
            waitUntil(eventPlayer.isHoldingButton(Button.ULTIMATE) or eventPlayer.isInSpawnRoom() or not eventPlayer.Is_Using_Ultimate, 3)
            playEffect(getAllPlayers(), DynamicEffect.RING_EXPLOSION, Color.SKY_BLUE, eventPlayer + vect(false, 2.1, false), eventPlayer.A)
            playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.SKY_BLUE, eventPlayer, eventPlayer.A)
            playEffect(getAllPlayers(), DynamicEffect.DEBUFF_IMPACT_SOUND, Color.WHITE, eventPlayer, 150)
            stopChasingVariable(eventPlayer.A)
            destroyEffect(eventPlayer.Effects[true])
            destroyEffect(eventPlayer.Effects[2])
            eventPlayer.P = getPlayersInRadius(eventPlayer, eventPlayer.A, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)
            eventPlayer.P.startScalingSize(0.8, true)
            eventPlayer.P.setDamageReceived(105)
            eventPlayer.P.setDamageDealt(60)
            eventPlayer.P.playerSpeed[false] -= 20
            ultimate_ender()
            eventPlayer.P.stopScalingSize()
            eventPlayer.P.setDamageDealt(115)
            eventPlayer.P.setDamageReceived(70)
            eventPlayer.P.playerSpeed[false] += 20
            eventPlayer.P = []
            eventPlayer.Is_Using_Ultimate = false
            eventPlayer.A = 1
        elif eventPlayer.selected_hero_list_number == 4:
            eventPlayer.setHealth(eventPlayer.getMaxHealth())
            create_dummy_of_EventPlayer()
            eventPlayer.Solomon_pillar_array.setProjectileSpeed(345)
            eventPlayer.Solomon_pillar_array.setDamageReceived(45)
            eventPlayer.Solomon_pillar_array.setMoveSpeed(165)
            eventPlayer.Solomon_pillar_array.setDamageDealt(175)
            Farthest_solomon_array_minion()
        elif eventPlayer.selected_hero_list_number == 5:
            FoV_and_LoS_player_select()
            if not entityExists(eventPlayer.FoV_and_lineOFsight_player):
                goto lbl_5
            eventPlayer.A[eventPlayer.FoV_and_lineOFsight_player.getSlot()] = eventPlayer.FoV_and_lineOFsight_player
            eventPlayer.U = eventPlayer.FoV_and_lineOFsight_player.getSlot() + 5
            eventPlayer.A[eventPlayer.U] += 1
            smallMessage(getAllPlayers(), "{0} Adapted {2}% to {1}".format(heroIcon(Hero.REINHARDT), eventPlayer.FoV_and_lineOFsight_player, eventPlayer.A[eventPlayer.U] * 100))
            eventPlayer.Is_Using_Ultimate = true
            async(ultimate_ender, AsyncBehavior.RESTART)
            waitUntil(not eventPlayer.Is_Using_Ultimate, 99999)
            eventPlayer.A[eventPlayer.U] = 0.3
            lbl_5:
    elif eventPlayer.getCurrentHero() == Hero.MAUGA:
        if eventPlayer.selected_hero_list_number == null:
            eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 9999)
            wait(0.6)
            waitUntil(not eventPlayer.isUsingUltimate(), 99999)
            eventPlayer.clearStatusEffect(Status.UNKILLABLE)
            wait(0.6)
        else:
            eventPlayer.cancelPrimaryAction()
            FoV_and_LoS_player_select()
            eventPlayer.setStatusEffect(null, Status.PHASED_OUT, 6)
            if not eventPlayer.FoV_and_lineOFsight_player:
                goto lbl_6
            eventPlayer.startCamera(eventPlayer.FoV_and_lineOFsight_player + vect(0, 5, 0), eventPlayer.FoV_and_lineOFsight_player, 200)
            eventPlayer.setMoveSpeed(1)
            eventPlayer.FoV_and_lineOFsight_player.startThrottleInDirection(eventPlayer.getThrottle(), 1, Relativity.TO_PLAYER, Throttle.REPLACE_EXISTING, ThrottleReeval.DIRECTION_AND_MAGNITUDE)
            eventPlayer.FoV_and_lineOFsight_player.startFacing(eventPlayer.getFacingDirection(), 1000, Relativity.TO_WORLD, FacingReeval.DIRECTION_AND_TURN_RATE)
            smallMessage(eventPlayer, eventPlayer.FoV_and_lineOFsight_player)
            waitUntil(eventPlayer.FoV_and_lineOFsight_player.isDead(), 8)
            eventPlayer.FoV_and_lineOFsight_player.stopTransformingThrottle()
            smallMessage(eventPlayer, "end")
            eventPlayer.FoV_and_lineOFsight_player.stopFacing()
            eventPlayer.setMoveSpeed(100)
            eventPlayer.stopCamera()
            eventPlayer.FoV_and_lineOFsight_player.stopThrottleInDirection()
            lbl_6:
    elif eventPlayer.getCurrentHero() == Hero.WIDOWMAKER:
        if eventPlayer.selected_hero_list_number:
            eventPlayer.Is_Using_Ultimate = true
            wait(3)
            eventPlayer.Is_Using_Ultimate = false
    elif eventPlayer.getCurrentHero() == Hero.RAMATTRA:
        if eventPlayer.selected_hero_list_number == 1:
            create_dummy_of_EventPlayer()
            eventPlayer.K = getLastCreatedEntity()
            getLastCreatedEntity().attachTo(eventPlayer, vect(0, 5.5, 0))
            eventPlayer.setDamageDealt(185)
            createEffect(getAllPlayers(), Effect.SPHERE, Color.PURPLE, eventPlayer, 14, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
            eventPlayer.Effects[1] = getLastCreatedEntity()
            while entityExists(eventPlayer.K):
                eventPlayer.R.append(getPlayersInRadius(eventPlayer, 14, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES))
                eventPlayer.P = [player for player in eventPlayer.R if distance(player, eventPlayer) > 14]
                eventPlayer.R.remove(eventPlayer.P)
                eventPlayer.R.is_healing_cursed = true
                eventPlayer.P.is_healing_cursed = false
                eventPlayer.startHoT(eventPlayer, 1, 9999)
                wait(0.1)
            eventPlayer.R.is_healing_cursed = false
            eventPlayer.setDamageDealt(100)
            destroyEffect(eventPlayer.Effects[1])
        elif eventPlayer.selected_hero_list_number == 2:
            eventPlayer.T = [player for player in getPlayers(getOppositeTeam(eventPlayer.getTeam())) if dotProduct(eventPlayer.getFacingDirection(), directionTowards(eventPlayer.getPosition(), player.getPosition())) >= 0.992 and not isInLoS(eventPlayer, player, BarrierLos.BLOCKED_BY_ALL_BARRIERS)]
            damage(eventPlayer.T, eventPlayer, 125)
            eventPlayer.T.setStatusEffect(eventPlayer, Status.FROZEN, 2.5)
            smallMessage(eventPlayer.T, "{0} GET RAILED".format(heroIcon(Hero.RAMATTRA)))
    eventPlayer.setUltCharge(eventPlayer.getUltCharge() - (70 if eventPlayer.getCurrentHero() == Hero.REINHARDT and eventPlayer.selected_hero_list_number == 4 else 100))


rule "Unkillable Loop (very easy to get ult or just Passive)":
    @Event eachPlayer
    @Hero orisa
    @Condition eventPlayer.selected_hero_list_number == 1
    @Condition eventPlayer.hasSpawned() == true
    @Condition eventPlayer.isInSpawnRoom() == false
    
    waitUntil(not eventPlayer.hasStatusEffect(Status.UNKILLABLE) or eventPlayer.isInSpawnRoom(), 99999)
    eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 3)
    wait(1)
    if RULE_CONDITION:
        goto RULE_START


rule "Orisa Marcus freeze at 1hp":
    @Event eachPlayer
    @Hero orisa
    @Condition eventPlayer.getHealth() <= 1
    @Condition eventPlayer.selected_hero_list_number == 1
    
    eventPlayer.setStatusEffect(null, Status.FROZEN, 8)
    wait(10)
    eventPlayer.setHealth(eventPlayer.getMaxHealth())


rule "Push Orisa Marcus if damaged at 1hp":
    @Event playerTookDamage
    @Condition (eventPlayer.selected_hero_list_number and eventPlayer.getHealth() <= 1 and eventPlayer.getCurrentHero() == Hero.ORISA or eventPlayer.selected_hero_list_number == 2 and eventPlayer.X == 2 and eventPlayer.getCurrentHero() == Hero.DOOMFIST) == true
    
    eventPlayer.applyImpulse(directionTowards(attacker - vect(0, 2, 0), eventPlayer), 70 if eventPlayer.selected_hero_list_number else 20, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)


rule "Orisa Ab1 Marcus healing for people in range":
    @Event eachPlayer
    @Hero orisa
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_1) == 0
    
    if eventPlayer.isInSpawnRoom() or eventPlayer.hasStatusEffect(Status.FROZEN):
        goto lbl_0
    eventPlayer.H = getPlayersInRadius(eventPlayer, 16, eventPlayer.getTeam(), LosCheck.SURFACES).exclude(eventPlayer)
    playEffect(getAllPlayers(), DynamicEffect.HEAL_TARGET_ACTIVE, Color.TEAM_1, eventPlayer.H, 0.7)
    heal(eventPlayer.H, eventPlayer, 65)
    eventPlayer.setHealth(eventPlayer.getHealth() - 100)
    wait(0.6)
    stopHoT(eventPlayer.heal_over_time)
    eventPlayer.startHoT(eventPlayer, 9999, 30)
    eventPlayer.heal_over_time = getLastHoT()
    lbl_0:
    async(stop_healing_over_time, AsyncBehavior.RESTART)
    eventPlayer.setAbilityCooldown(Button.ABILITY_1, 2.5)


rule "SOMBRA HERO KILLSTREAK: Damage multiplies by the difference of kills of enemies / 2":
    @Event playerDealtDamage
    @Hero sombra
    @Condition eventAbility == Button.PRIMARY_FIRE
    @Condition eventPlayer.selected_hero_list_number == true
    @Condition victim.getNumberOfElims() > eventPlayer.getNumberOfElims()
    
    #difference in kills / 2
    damage(victim, eventPlayer, eventDamage * ((victim.getNumberOfElims() - eventPlayer.getNumberOfElims()) / 2))


rule "Sombra Junji Ito ULT Reverse damage to parasite":
    @Event playerTookDamage
    @Hero sombra
    @Condition eventPlayer.Is_Using_Ultimate == true
    @Condition eventPlayer.selected_hero_list_number == true
    
    eventPlayer.setHealth(eventPlayer.getHealth() + eventDamage * 6)
    damage(eventPlayer.FoV_and_lineOFsight_player, attacker, eventDamage)


rule "All Mei ab2 (Marie Antoinette stick to enemy and mahito transform)":
    @Event eachPlayer
    @Hero mei
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0
    
    if eventPlayer.selected_hero_list_number == 0:
        eventPlayer.detach()
        if getPlayersInRadius(eventPlayer, 10, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF) >= 1:
            eventPlayer.W = [player for player in getPlayersInRadius(eventPlayer, 10, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF) if player.isAlive() and getClosestPlayer(eventPlayer, getOppositeTeam(eventPlayer.getTeam())) == player]
            eventPlayer.attachTo(eventPlayer.W, vect(false, 0.6, -1))
            smallMessage(eventPlayer.W, "Crouch to escape")
            wait(0.3)
            waitUntil(eventPlayer.W.isHoldingButton(Button.CROUCH) or eventPlayer.isHoldingButton(Button.ABILITY_2), 6)
            eventPlayer.detach()
            eventPlayer.W = []
        else:
            smallMessage(eventPlayer, "No players in range")
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 8)
    elif eventPlayer.selected_hero_list_number == 1:
        eventPlayer.K = true
        createEffect(getAllPlayers(), Effect.ANA_NANO_BOOSTED, Color.TEAM_2, eventPlayer, 1, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
        eventPlayer.Effects[1] = getLastCreatedEntity()
        wait(5)
        destroyEffect(eventPlayer.Effects[1])
        eventPlayer.K = false
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 10)


rule "Mahito Mei Transform enemy":
    @Event playerTookDamage
    @Condition attacker.getCurrentHero() == Hero.MEI
    @Condition attacker.K == true
    @Condition eventAbility == Button.MELEE
    @Condition attacker.selected_hero_list_number == 1
    
    transfigure_victim()


rule "Make people fall through floor for 3s Global value":
    @Event eachPlayer
    @Condition eventPlayer in Falling_floor_array == true
    
    eventPlayer.disableEnvironmentCollision(true)
    if eventPlayer.is_falling[0] == true:
        goto lbl_0
    waitUntil(eventPlayer.isDead() or eventPlayer.isInSpawnRoom(), 1.5)
    lbl_0:
    if eventPlayer.is_falling[0] == false:
        goto lbl_1
    waitUntil(distance(eventPlayer.getPosition() * vect(0, 1, 0), eventPlayer.is_falling[1] * vect(0, 1, 0)) <= 3, 99999)
    lbl_1:
    eventPlayer.enableEnvironmentCollision()
    Falling_floor_array.remove(eventPlayer)
    eventPlayer.is_falling[0] = false


rule "Pull enemies  camping in walls":
    @Event eachPlayer
    @Condition eventPlayer.isMeleeing() == true
    
    eventPlayer.Wallee_ing = [player for player in getPlayersInRadius(eventPlayer, 10, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF) if isInLoS(player, eventPlayer, BarrierLos.PASS_THROUGH_BARRIERS) and not isInLoS(eventPlayer, player, BarrierLos.PASS_THROUGH_BARRIERS)]
    eventPlayer.Wallee_ing.applyImpulse(directionTowards(eventPlayer.Wallee_ing, eventPlayer.getEyePosition()), 40, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
    wait(6)


def transfigure_victim():
    @Name "Mahito Transfigure Victim Subroutine"
    
    eventPlayer.Mahito_Transfigured[0] = true
    eventPlayer.Mahito_Transfigured[2] = eventPlayer.selected_hero_list_number
    smallMessage(eventPlayer, "{0} Transformed you".format(heroIcon(Hero.MEI)))
    wait(0.25)
    Transport_Hero.append(victim)
    wait(0.8)
    eventPlayer.setMaxHealth(40)
    eventPlayer.setMoveSpeed(50)
    eventPlayer.disallowButton(Button.ABILITY_1)
    eventPlayer.disallowButton(Button.ABILITY_2)
    eventPlayer.disallowButton(Button.ULTIMATE)
    wait(5)
    if eventPlayer.isDead():
        goto lbl_0
    #second loop for become hero, when you go back to original
    eventPlayer.Mahito_Transfigured[3] = true
    eventPlayer.selecting_HUD = false
    wait(0.3)
    Transport_Hero.append(victim)
    lbl_0:
    eventPlayer.Mahito_Transfigured[0] = false


rule "Mahito Rein Transform enemy":
    @Event playerTookDamage
    @Condition attacker.getCurrentHero() == Hero.REINHARDT
    @Condition eventAbility == Button.ABILITY_2
    @Condition attacker.selected_hero_list_number == 13
    
    transfigure_victim()


def remove_mordred_armor():
    @Name "Remove mordred armor subroutine"
    
    removeHealthPool(eventPlayer.mordred_extra_armor)
    eventPlayer.playerSpeed[false] += 20
    eventPlayer.setJumpVerticalSpeed(150)
    eventPlayer.K = true
    eventPlayer.setDamageDealt(125)
    eventPlayer.setDamageReceived(70)
    heal(eventPlayer, eventPlayer, 100000)
    eventPlayer.clearStatusEffect(Status.UNKILLABLE)
    smallMessage(eventPlayer, "{0} Armor taken off".format(heroIcon(eventPlayer.getCurrentHero())))


rule "Illary servant airburst passive":
    @Event eachPlayer
    @Hero illari
    @Condition eventPlayer.isFiringPrimaryFire() == true
    @Condition eventPlayer.selected_hero_list_number == true
    
    eventPlayer.A = eventPlayer.getAmmo(0)
    waitUntil(not eventPlayer.isFiringPrimaryFire(), 99999)
    FoV_and_LoS_player_select()
    if eventPlayer.getAmmo(0) < eventPlayer.A:
        eventPlayer.C = 28 - distance(eventPlayer, eventPlayer.FoV_and_lineOFsight_player) / 1.18
        if eventPlayer.isInViewAngle(eventPlayer.FoV_and_lineOFsight_player, eventPlayer.C):
            eventPlayer.B = getPlayersInRadius(eventPlayer.FoV_and_lineOFsight_player, 2, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES_AND_ENEMY_BARRIERS)
            damage(eventPlayer.B, eventPlayer, 15)
            playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.YELLOW, eventPlayer.B, 2.5)


rule "Illary or Winston combat status passive in area":
    @Event eachPlayer
    @Condition eventPlayer.O == 191
    @Condition eventPlayer.isInSpawnRoom() == false
    @Condition eventPlayer.isAlive() == true
    
    eventPlayer.setDamageReceived(100 - len(getPlayersInRadius(eventPlayer, 13, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF)) * 15)
    wait(0.1)
    if RULE_CONDITION:
        goto RULE_START


rule "Illari healing stuff":
    @Event playerDealtHealing
    @Hero illari
    @Condition eventAbility == Button.PRIMARY_FIRE
    @Condition eventPlayer.selected_hero_list_number == 1
    @Condition eventPlayer != healee
    
    healee.setStatusEffect(eventPlayer, Status.UNKILLABLE, 1.25)


rule "Lifeweaver passive for disable helthpack":
    @Event playerTookDamage
    @Condition (attacker.getCurrentHero() == Hero.BRIGITTE and eventAbility == Button.ABILITY_1 and attacker.selected_hero_list_number == 4 or attacker.getCurrentHero() == Hero.LIFEWEAVER and attacker.selected_hero_list_number) == true
    
    eventPlayer.healthpack_cursed[1] = attacker
    eventPlayer.healthpack_cursed[0] = true
    wait(7, Wait.RESTART_WHEN_TRUE)
    eventPlayer.healthpack_cursed[0] = false


rule "Queen elzabeth received healing damage stuff rules":
    @Event playerReceivedHealing
    @Condition eventPlayer.healthpack_cursed[0] == true
    @Condition eventPlayer.isInSpawnRoom() == false
    
    if eventWasHealthPack:
        wait(0.6)
        damage(eventPlayer, eventPlayer.healthpack_cursed[1], 150)
    if eventPlayer.healthpack_cursed[4]:
        damage(eventPlayer, eventPlayer.healthpack_cursed[1], eventHealing * (4 if eventPlayer.healthpack_cursed[1].Is_Using_Ultimate else 1))


rule "Reset healthpack denied effects":
    @Event eachPlayer
    @Condition (eventPlayer.healthpack_cursed[0] or eventPlayer.healthpack_cursed[4]) == true
    
    destroyEffect(eventPlayer.healthpack_cursed[2])
    createEffect(getAllPlayers(), Effect.REAPER_WRAITH_FORM, eventPlayer.getTeam(), eventPlayer, 1, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.healthpack_cursed[2] = getLastCreatedEntity()
    waitUntil(not eventPlayer.healthpack_cursed[0] and not eventPlayer.healthpack_cursed[4], 99999)
    destroyEffect(eventPlayer.healthpack_cursed[2])


rule "Check when a player just took damage":
    @Event playerTookDamage
    @Condition eventPlayer != attacker
    
    eventPlayer.was_damaged += eventDamage
    wait(0.45, Wait.RESTART_WHEN_TRUE)
    eventPlayer.was_damaged = false


rule "Mei flying Sec.Fire while droning surtr":
    @Event eachPlayer
    @Hero mei
    @Condition eventPlayer.isHoldingButton(Button.SECONDARY_FIRE) == true
    @Condition eventPlayer.Is_Using_Ultimate == true
    @Condition eventPlayer.selected_hero_list_number == 2
    
    eventPlayer.applyImpulse(eventPlayer.getFacingDirection(), 1.3, Relativity.TO_WORLD, Impulse.INCORPORATE_CONTRARY_MOTION)
    wait(0.09)
    if RULE_CONDITION:
        goto RULE_START


rule "Is Crippled Rule for players":
    @Event eachPlayer
    @Condition eventPlayer.Is_Crippled == true
    
    eventPlayer.setMeleeEnabled(false)
    eventPlayer.setPrimaryFireEnabled(false)
    eventPlayer.setSecondaryFireEnabled(false)
    eventPlayer.Crippled_ULT_saved = eventPlayer.getUltCharge()
    eventPlayer.setAbilityCooldown(Button.ABILITY_1, 8)
    eventPlayer.setAbilityCooldown(Button.ABILITY_2, 8)
    eventPlayer.setUltEnabled(false)
    eventPlayer.setStatusEffect(null, Status.HACKED, 5)
    waitUntil(not eventPlayer.Is_Crippled, 5)
    eventPlayer.setUltEnabled(true)
    eventPlayer.setPrimaryFireEnabled(true)
    smallMessage(eventPlayer, "enabled")
    eventPlayer.setMeleeEnabled(true)
    eventPlayer.setPrimaryFireEnabled(true)
    eventPlayer.setSecondaryFireEnabled(true)
    eventPlayer.clearStatusEffect(Status.HACKED)
    eventPlayer.Is_Crippled = false
    eventPlayer.setUltCharge(eventPlayer.Crippled_ULT_saved)


def houdini_create_clone():
    @Name "Houdini Create Clone Subroutine"
    
    create_dummy_of_EventPlayer()
    eventPlayer.Solomon_pillar_array = getLastCreatedEntity()
    eventPlayer.Solomon_pillar_array.setDamageReceived(80)


rule "Choose rock paper or scissors":
    @Event eachPlayer
    @Condition eventPlayer.Choice_rock_paper_scissors == -1
    @Condition (eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) or eventPlayer.isHoldingButton(Button.SECONDARY_FIRE) or eventPlayer.isHoldingButton(Button.MELEE)) == true
    
    if eventPlayer.isHoldingButton(Button.PRIMARY_FIRE):
        eventPlayer.Choice_rock_paper_scissors = 0
    elif eventPlayer.isHoldingButton(Button.SECONDARY_FIRE):
        eventPlayer.Choice_rock_paper_scissors = 1
    elif eventPlayer.isHoldingButton(Button.MELEE):
        eventPlayer.Choice_rock_paper_scissors = 2
    smallMessage(eventPlayer, "You chose {0}".format(eventPlayer.B[eventPlayer.Choice_rock_paper_scissors]))


rule "Higurama only dies from melee or fall":
    @Event playerDied
    @Hero torbjorn
    @Condition eventPlayer.selected_hero_list_number != null
    @Condition (eventPlayer == attacker or eventWasEnvironment or eventAbility == Button.MELEE or attacker.getCurrentHero() in [Hero.BRIGITTE, Hero.REINHARDT, null] and eventAbility == Button.PRIMARY_FIRE) == false
    
    smallMessage(attacker, "{0} Punch Higurama to kill him".format(heroIcon(Hero.TORBJORN)))
    eventPlayer.resurrect()
    wait(0.125)
    eventPlayer.setWeapon(2)


rule "Ana semiramis damage taken poison healing":
    @Event playerTookDamage
    @Condition attacker.getCurrentHero() == Hero.ANA
    @Condition attacker.selected_hero_list_number == 2
    @Condition eventAbility != Button.PRIMARY_FIRE
    
    eventPlayer.is_healing_cursed = true
    wait(3.5, Wait.RESTART_WHEN_TRUE)
    eventPlayer.is_healing_cursed = false


rule "ALL RAMATTRA ab1 maxlife when coming back nerf":
    @Event eachPlayer
    @Hero ramattra
    @Condition eventPlayer.isUsingAbility1() == true
    @Condition eventPlayer.selected_hero_list_number != 2
    
    eventPlayer.disallowButton(Button.SECONDARY_FIRE)
    eventPlayer.setMaxHealth(50)
    chase(eventPlayer.H, eventPlayer.getNormalizedHealth(), rate=1, ChaseReeval.DESTINATION_AND_RATE)
    waitUntil(not eventPlayer.isUsingAbility1(), 99999)
    stopChasingVariable(eventPlayer.H)
    eventPlayer.setMaxHealth(100 if eventPlayer.selected_hero_list_number else 130)
    wait(0.1)
    eventPlayer.setHealth(eventPlayer.H * eventPlayer.getMaxHealth())
    eventPlayer.allowButton(Button.SECONDARY_FIRE)


rule "New Brigg ab 2 throw sphere":
    @Event eachPlayer
    @Hero brigitte
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.K < 4
    @Condition eventPlayer.getAbilityCharge(Button.ABILITY_2) >= 2
    @Condition eventPlayer.selected_hero_list_number == 4
    
    Felix_ballin()
    eventPlayer.setAbilityCharge(Button.ABILITY_2, false)


def Felix_ballin():
    @Name "Felix_ballin Rule"
    
    eventPlayer.Moving_ball_array = []
    eventPlayer.Moving_ball = eventPlayer.getPosition()
    #choose area
    raycast_hit_position2()
    chase(eventPlayer.Moving_ball, eventPlayer.raycast_hit_position2, rate=26, ChaseReeval.DESTINATION_AND_RATE)
    createEffect(getAllPlayers(), Effect.SPHERE, Color.ROSE, updateEveryTick(eventPlayer.Moving_ball), 3, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.Effects[true] = getLastCreatedEntity()
    waitUntil(distance(eventPlayer.Moving_ball, eventPlayer.raycast_hit_position2) <= 0.2 or len(getPlayersInRadius(eventPlayer.Moving_ball, 3.1, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES_AND_ENEMY_BARRIERS)) >= 1, 6)
    #trapped player
    eventPlayer.W = (getPlayersInRadius(eventPlayer.Moving_ball, 3.1, getOppositeTeam(eventPlayer.getTeam()), LosCheck.SURFACES_AND_ENEMY_BARRIERS) if eventPlayer.isAlive() else [])[0]
    Spiderman_trap_list.append(eventPlayer.W)
    stopChasingVariable(eventPlayer.Moving_ball)
    destroyEffect(eventPlayer.Effects[true])
    if eventPlayer.W.is_player_anchored <= 0:
        eventPlayer.W.is_player_anchored = 60
    else:
        eventPlayer.W.is_player_anchored += 35


rule "Zarya Choso ab2 can stop all damage over time":
    @Event eachPlayer
    @Hero zarya
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0
    @Condition eventPlayer.selected_hero_list_number == true
    @Condition eventPlayer.isAlive() == true
    
    createEffect(getAllPlayers(), Effect.RING, Color.RED, eventPlayer, 8, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.Effects[3] = getLastCreatedEntity()
    wait(0.25)
    while not eventPlayer.isHoldingButton(Button.ABILITY_2) and eventPlayer.isAlive():
        heal(getPlayersInRadius(eventPlayer, 8, eventPlayer.getTeam(), LosCheck.OFF).exclude(eventPlayer), eventPlayer, 6)
        damage(getPlayersInRadius(eventPlayer, 8, getOppositeTeam(eventPlayer.getTeam()), LosCheck.OFF), eventPlayer, 3.5)
        if eventPlayer.Is_Using_Ultimate:
            goto lbl_0
        damage(eventPlayer, null, 5)
        lbl_0:
        wait(0.05)
    eventPlayer.stopAllDoT()
    destroyEffect(eventPlayer.Effects[3])
    if eventPlayer.Is_Using_Ultimate:
        goto lbl_1
    waitUntil(eventPlayer.Is_Using_Ultimate, 8)
    lbl_1:
    wait(1)
    smallMessage(eventPlayer, "Aura ready")


rule "Zarya Choso ab1 laser":
    @Event eachPlayer
    @Hero zarya
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_1) == true
    @Condition eventPlayer.selected_hero_list_number == true
    @Condition eventPlayer.isAlive() == true
    
    eventPlayer.setAimSpeed(40)
    eventPlayer.startForcingThrottle(false, false, false, false, false, false)
    FoV_and_LoS_player_select()
    eventPlayer.startFacing(directionTowards(eventPlayer, eventPlayer.FoV_and_lineOFsight_player), 480, Relativity.TO_WORLD, FacingReeval.DIRECTION_AND_TURN_RATE)
    eventPlayer.color = Color.RED
    async(create_beam_effect_subroutine, AsyncBehavior.RESTART)
    wait(0.017)
    while eventPlayer.isHoldingButton(Button.ABILITY_1):
        FoV_and_LoS_player_select()
        if not entityExists(eventPlayer.FoV_and_lineOFsight_player) or eventPlayer.isDead():
            goto lbl_0
        if eventPlayer.Is_Using_Ultimate:
            goto lbl_1
        damage(eventPlayer, null, 3)
        lbl_1:
        damage(eventPlayer.FoV_and_lineOFsight_player, eventPlayer, 10)
        wait(0.1)
    lbl_0:
    eventPlayer.stopForcingThrottle()
    eventPlayer.setAimSpeed(100)
    destroy_beam_effect_subroutine()
    eventPlayer.stopFacing()
    if eventPlayer.Is_Using_Ultimate:
        goto lbl_2
    waitUntil(eventPlayer.Is_Using_Ultimate, 5)
    lbl_2:
    wait(1)
    smallMessage(eventPlayer, "Laser ready")


def level_up_call_subroutine():
    @Name "Brigg new guy level UP call"
    
    eventPlayer.playerSpeed[false] = 125 + eventPlayer.K * 10
    eventPlayer.setDamageDealt(125 + 15 * eventPlayer.K)
    smallMessage(eventPlayer, "Level UP: {0}".format(eventPlayer.K))


rule "Iskandar || Genghis || Hercules ab2 (throw weapon) || Frankenstein more damage if enemy more ult":
    @Event playerTookDamage
    @Condition attacker.getCurrentHero() == Hero.REINHARDT
    @Condition eventAbility == Button.ABILITY_2
    
    if attacker.selected_hero_list_number == 1 or attacker.isDummy() and attacker in attacker.solomon_master.G:
        attacker.trump_wait_middle = victim.getPosition()
        victim.startForcingPosition(attacker.trump_wait_middle, true)
        attacker.trump_wait_time = attacker.getEyePosition()
        chase(attacker.trump_wait_middle, attacker.trump_wait_time, duration=0.55, ChaseReeval.DESTINATION_AND_DURATION)
        waitUntil(eventPlayer.isInSpawnRoom() or not entityExists(attacker) or eventPlayer.isDead() or attacker.trump_wait_middle == attacker.trump_wait_time, 7)
        victim.setStatusEffect(null, Status.ROOTED, 0.2)
        victim.stopForcingPosition()
        stopChasingVariable(eventPlayer.trump_wait_middle)


rule "Jean D'Arc ultimate 2/2 (for the pocketed player)":
    @Event playerTookDamage
    @Condition eventPlayer.mercy_attached_master.Is_Using_Ultimate == true
    @Condition eventPlayer.mercy_attached_master.getCurrentHero() == Hero.MERCY
    
    eventPlayer.mercy_attached_master.D += eventDamage
    heal(eventPlayer, eventPlayer, eventDamage * 1.6)
    wait()


rule "Venture is using ability 1 in walls":
    @Event eachPlayer
    @Hero venture
    @Condition eventPlayer.isUsingAbility1() == true
    
    eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 0.65)
    eventPlayer.disableEnvironmentCollision(false)
    eventPlayer.allowButton(Button.PRIMARY_FIRE)
    waitUntil(not eventPlayer.isUsingAbility1(), 10)
    eventPlayer.enableEnvironmentCollision()


def bounty_loop():
    @Name "Bounty loop for cancelling unkillable on player"
    
    eventPlayer.FoV_and_lineOFsight_player.clearStatusEffect(Status.UNKILLABLE)
    eventPlayer.FoV_and_lineOFsight_player.clearStatusEffect(Status.INVINCIBLE)
    eventPlayer.FoV_and_lineOFsight_player.setDamageReceived(120)
    wait(1)
    if eventPlayer.FoV_and_lineOFsight_player != null:
        goto RULE_START


def simo_haya_debug():
    @Name "Simo haya ULT debug, cant prefire"
    
    eventPlayer.J = true
    wait(0.6)
    eventPlayer.J = false


def create_beam_effect_subroutine():
    @Name "Create Beam Effect of Variable color and destination"
    
    destroy_beam_effect_subroutine()
    createBeam(getAllPlayers(), Beam.BAD, updateEveryTick(eventPlayer.getPosition()), eventPlayer.FoV_and_lineOFsight_player if eventPlayer.getCurrentHero() == Hero.ZARYA else updateEveryTick(eventPlayer.raycast_hit_position2), eventPlayer.color, EffectReeval.VISIBILITY_POSITION_RADIUS_AND_COLOR)
    eventPlayer.Effects[15] = getLastCreatedEntity()
    while eventPlayer.isAlive() and entityExists(eventPlayer.Effects[15]):
        raycast_hit_position2()
        wait(0.001)
    destroy_beam_effect_subroutine()


def destroy_beam_effect_subroutine():
    @Name "Destroy beam effect (effects[15])"
    
    destroyEffect(eventPlayer.Effects[15])


def Experimental():
    @Name "Copy-cat baptiste ULT"
    
    Enable_Buttons_sub()
    eventPlayer.setMaxHealth(50)
    eventPlayer.selecting_HUD = 2
    wait()
    eventPlayer.selecting_HUD = false
    wait(0.5)
    eventPlayer.setUltCharge(100)
    wait(0.1)
    eventPlayer.forceButtonPress(Button.ULTIMATE)
    wait(1)
    waitUntil(eventPlayer.isDead(), 10)
    kill(eventPlayer.K, eventPlayer)
    if eventPlayer.isDead():
        goto lbl_0
    waitUntil(not eventPlayer.Is_Using_Ultimate, 99999)
    wait(0.6)
    eventPlayer.startForcingHero(Hero.BAPTISTE)
    eventPlayer.stopForcingCurrentHero()
    Enable_Buttons_sub()
    eventPlayer.selected_hero_list_number = 2
    eventPlayer.selecting_HUD = 2
    wait(0.1)
    eventPlayer.selecting_HUD = false
    lbl_0:
    eventPlayer.Mahito_Transfigured[0] = false


rule "Diermuid Soldier 76 spear makes enemy remove invincible stats":
    @Event playerDealtKnockback
    @Hero soldier
    @Condition eventPlayer.selected_hero_list_number == 2
    @Condition eventAbility == Button.SECONDARY_FIRE
    @Condition eventPlayer.D == 1
    
    playEffect(getAllPlayers(), DynamicEffect.BAD_EXPLOSION, Color.RED, victim, 3)
    playEffect(getAllPlayers(), DynamicEffect.EXPLOSION_SOUND, Color.RED, victim, 110)
    damage(victim, eventPlayer, 15)
    victim.clearStatusEffect(Status.UNKILLABLE)
    victim.clearStatusEffect(Status.INVINCIBLE)


rule "Soujourn 2 trap snare":
    @Event eachPlayer
    @Hero sojourn
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) != true
    @Condition eventPlayer.selected_hero_list_number == true
    
    FoV_and_LoS_player_select()
    smallMessage(eventPlayer.FoV_and_lineOFsight_player, "TRAP BEAM:CONNECTED")
    createBeam(getAllPlayers(), Beam.GRAPPLE, eventPlayer, eventPlayer.FoV_and_lineOFsight_player, Color.RED, EffectReeval.VISIBILITY_POSITION_AND_RADIUS)
    eventPlayer.Effects[1] = getLastCreatedEntity()
    waitUntil(not isInLoS(eventPlayer, eventPlayer.FoV_and_lineOFsight_player, BarrierLos.PASS_THROUGH_BARRIERS), 2.5)
    eventPlayer.FoV_and_lineOFsight_player = eventPlayer.FoV_and_lineOFsight_player if isInLoS(eventPlayer, eventPlayer.FoV_and_lineOFsight_player, BarrierLos.PASS_THROUGH_BARRIERS) else null
    destroyEffect(eventPlayer.Effects[1])
    damage(eventPlayer.FoV_and_lineOFsight_player, eventPlayer, 80)
    eventPlayer.FoV_and_lineOFsight_player.setStatusEffect(null, Status.STUNNED, 2)
    eventPlayer.setAbilityCooldown(Button.ABILITY_2, 12)


rule "Mauga ab2 anti-burst damage":
    @Event playerTookDamage
    @Hero mauga
    @Condition eventDamage > 50
    @Condition eventPlayer.selected_hero_list_number == true
    
    heal(eventPlayer, null, eventDamage)
    wait(0.5, Wait.RESTART_WHEN_TRUE)
    if eventPlayer.isAlive():
        goto lbl_0
    eventPlayer.resurrect()
    lbl_0:


rule "Rein Mahoraga Do Anti-healing with swing":
    @Event playerTookDamage
    @Condition attacker.getCurrentHero() == Hero.REINHARDT
    @Condition attacker.selected_hero_list_number == 5
    
    victim.is_healing_cursed = true
    heal(attacker, attacker, eventDamage)
    wait(2)
    victim.is_healing_cursed = false


rule "Symmetra Gordon Freeman ULT - status & Cancel":
    @Event playerTookDamage
    @Condition attacker.selected_hero_list_number == 2
    @Condition attacker.getCurrentHero() == Hero.SYMMETRA
    @Condition eventAbility != Button.PRIMARY_FIRE
    @Condition eventAbility != Button.MELEE
    
    eventPlayer.Is_Using_Ultimate = false
    eventPlayer.setStatusEffect(attacker, Status.ROOTED, 5)
    eventPlayer.setGravity(0)
    eventPlayer.applyImpulse(attacker.getFacingDirection(), 300, Relativity.TO_WORLD, Impulse.CANCEL_CONTRARY_MOTION)
    wait(1.15)
    eventPlayer.startForcingPosition(eventPlayer.getPosition(), false)
    wait()
    eventPlayer.stopForcingPosition()
    wait(4)
    eventPlayer.setGravity(100)


def Remove_healee_debuffs():
    @Name "Remove all bad status effects from person Healed"
    
    healee.is_healing_cursed = false
    healee.is_player_anchored = 0
    healee.healthpack_cursed[0] = false
    healee.Is_Crippled = false
    healee.setAimSpeed(100)
    healee.stopForcingPosition()
    healee.detach()
    healee.playerSpeed[false] += 0.1


rule "Widowmaker Double Pistol":
    @Event eachPlayer
    @Hero widowmaker
    @Condition (eventPlayer.isHoldingButton(Button.PRIMARY_FIRE) or eventPlayer.Is_Using_Ultimate) == true
    @Condition eventPlayer.isHoldingButton(Button.SECONDARY_FIRE) == false
    @Condition eventPlayer.selected_hero_list_number == true
    
    raycast_hit_position1()
    eventPlayer.Z = eventPlayer.getEyePosition() + worldVector(vect(eventPlayer.A, 0, 0), eventPlayer, Transform.ROTATION)
    createProjectile(Projectile.MEI_ICICLE, eventPlayer, eventPlayer.Z, directionTowards(eventPlayer.Z, eventPlayer.raycast_hit_position + worldVector(vect(random.uniform(-1, 1), 0, 0), eventPlayer, Transform.ROTATION)), Relativity.TO_WORLD, ModifyHealth.DAMAGE, getOppositeTeam(eventPlayer.getTeam()), 45, 1.8, 0, DynamicEffect.BAD_EXPLOSION, DynamicEffect.EXPLOSION_SOUND, 0, 200, 3, 0, 0, 0)
    eventPlayer.A *= -1
    if eventPlayer.Is_Using_Ultimate:
        goto lbl_0
    wait(0.1)
    lbl_0:
    if not eventPlayer.Is_Using_Ultimate:
        goto lbl_1
    wait(0.025)
    if RULE_CONDITION:
        goto RULE_START
    lbl_1:


rule "Widowmaker ab2 teleport back":
    @Event eachPlayer
    @Hero widowmaker
    @Condition eventPlayer.isHoldingButton(Button.ABILITY_2) == true
    @Condition eventPlayer.getAbilityCooldown(Button.ABILITY_2) == 0
    @Condition eventPlayer.selected_hero_list_number == true
    
    eventPlayer.P = eventPlayer.getPosition()
    eventPlayer.setAbilityCooldown(Button.ABILITY_2, 1000)
    wait(0.25)
    waitUntil(eventPlayer.isHoldingButton(Button.ABILITY_2) or eventPlayer.isDead(), 99999)
    if eventPlayer.isDead():
        goto lbl_0
    playEffect(getAllPlayers(), DynamicEffect.TRACER_RECALL_DISAPPEAR, Color.WHITE, eventPlayer.getPosition(), 1)
    eventPlayer.teleport(eventPlayer.P)
    eventPlayer.setStatusEffect(null, Status.STUNNED, 0.3)
    eventPlayer.setAbilityCooldown(Button.ABILITY_2, 19)
    lbl_0:


rule "New Tracer Stuff. Ultimate thingy":
    @Event eachPlayer
    @Condition eventPlayer.Cursed_facing_status == true
    
    waitUntil(evalOnce(eventPlayer.getFacingDirection()) != eventPlayer.getFacingDirection(), 99999)
    if eventPlayer.hasStatusEffect(Status.FROZEN):
        goto lbl_0
    eventPlayer.setStatusEffect(null, Status.FROZEN, 0.45)
    eventPlayer.setStatusEffect(null, Status.UNKILLABLE, 0.7)
    lbl_0:
    if RULE_CONDITION:
        goto RULE_START


rule "New Tracer super Escape":
    @Event eachPlayer
    @Hero tracer
    @Condition (eventPlayer.isUsingAbility2() or eventPlayer.getHealth() <= 50) == true
    @Condition eventPlayer.selected_hero_list_number == true
    
    eventPlayer.forceButtonPress(Button.ABILITY_2)
    wait(0.1)
    if not eventPlayer.isUsingAbility2():
        goto lbl_0
    eventPlayer.startHoT(null, 0.3, 450)
    waitUntil(not eventPlayer.isUsingAbility2(), 99999)
    eventPlayer.setAbilityCooldown(Button.ABILITY_2, 25)
    lbl_0:


rule "robin hood Ana  coordowns":
    @Event eachPlayer
    @Hero ana
    @Condition (eventPlayer.isUsingAbility1() or eventPlayer.isUsingAbility2()) == true
    @Condition eventPlayer.selected_hero_list_number == 1
    
    if eventPlayer.isUsingAbility1():
        wait(1.5)
        eventPlayer.setAbilityCooldown(Button.ABILITY_1, 10)
    elif eventPlayer.isUsingAbility2():
        wait(1.5)
        eventPlayer.setAbilityCooldown(Button.ABILITY_2, 10)


rule "Check when a player just took damage BIG one":
    @Event playerTookDamage
    @Condition eventPlayer.was_damaged >= 80
    @Condition eventPlayer != attacker
    
    eventPlayer.was_damagedBig = true
    waitUntil(not eventPlayer.was_damaged, 2)
    eventPlayer.was_damagedBig = false


rule "Rock Paper Scissors UI":
    @Event eachPlayer
    @Condition eventPlayer.Choice_rock_paper_scissors < 0
    
    createInWorldText(eventPlayer, "Choose rock, paper or scissors\r\nRock:{0}        Paper:{1}        Scissors:{2}".format(buttonString(Button.PRIMARY_FIRE), buttonString(Button.SECONDARY_FIRE), buttonString(Button.MELEE)), updateEveryTick(eventPlayer.getEyePosition() + eventPlayer.getFacingDirection()), 1.5, Clip.NONE, WorldTextReeval.VISIBILITY_POSITION_AND_STRING, Color.WHITE, SpecVisibility.DEFAULT)
    #delete this if it doesnt work (it worked)
    eventPlayer.in_world_text[2] = getLastCreatedText()
    waitUntil(eventPlayer.Choice_rock_paper_scissors != -1, 99999)
    destroyInWorldText(eventPlayer.in_world_text.last())


rule "Hero Player availability reset for spawn bugs":
    @Event playerDied
    
    eventPlayer.setAllowedHeroes(eventPlayer.getCurrentHero())
    waitUntil(eventPlayer.isInSpawnRoom(), 99999)
    eventPlayer.resetHeroAvailability()


